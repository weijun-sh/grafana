"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4156],{"./public/app/core/components/NodeGraphSettings.tsx":(e,a,t)=>{t.d(a,{n:()=>l});var s,n=t("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/0/cache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=(t("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),t("./packages/grafana-data/src/index.ts")),r=t("./packages/grafana-ui/src/index.ts"),o=t("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function l(e){var a;let{options:t,onOptionsChange:n}=e;const l=(0,r.useStyles)(c);return(0,o.jsxs)("div",{className:l.container,children:[s||(s=(0,o.jsx)("h3",{className:"page-heading",children:"Node Graph"})),(0,o.jsx)(r.InlineFieldRow,{className:l.row,children:(0,o.jsx)(r.InlineField,{tooltip:"Enables the Node Graph visualization in the trace viewer.",label:"Enable Node Graph",labelWidth:26,children:(0,o.jsx)(r.InlineSwitch,{id:"enableNodeGraph",value:null===(a=t.jsonData.nodeGraph)||void 0===a?void 0:a.enabled,onChange:e=>(0,i.updateDatasourcePluginJsonDataOption)({onOptionsChange:n,options:t},"nodeGraph",Object.assign({},t.jsonData.nodeGraph,{enabled:e.currentTarget.checked}))})})})]})}const c=e=>({container:n.css`
    label: container;
    width: 100%;
  `,row:n.css`
    label: row;
    align-items: baseline;
  `})},"./public/app/core/components/TraceToLogs/TraceToLogsSettings.tsx":(e,a,t)=>{t.d(a,{Z:()=>g});var s,n,i,r=t("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/0/cache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),o=(t("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),t("./packages/grafana-data/src/index.ts")),l=t("./packages/grafana-runtime/src/index.ts"),c=t("./packages/grafana-ui/src/index.ts"),u=t("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const d=e=>{let{values:a,onChange:t,id:r,keyPlaceholder:o="Key",valuePlaceholder:l="Value (optional)"}=e;const d=(0,c.useStyles)(p);return(0,u.jsx)("div",{className:d.wrapper,children:a.length?a.map(((e,i)=>(0,u.jsxs)("div",{className:d.pair,children:[(0,u.jsx)(c.SegmentInput,{id:`${r}-key-${i}`,placeholder:o,value:e.key,onChange:e=>{t(a.map(((a,t)=>(t===i&&(a.key=String(e)),a))))}}),(0,u.jsx)(c.InlineLabel,{"aria-label":"equals",className:d.operator,width:3,children:"="}),(0,u.jsx)(c.SegmentInput,{id:`${r}-value-${i}`,placeholder:l,value:e.value,onChange:e=>{t(a.map(((a,t)=>(t===i&&(a.value=String(e)),a))))}}),(0,u.jsx)("button",{onClick:()=>t([...a.slice(0,i),...a.slice(i+1)]),className:"gf-form-label query-part","aria-label":"Remove tag",children:s||(s=(0,u.jsx)(c.Icon,{name:"times"}))}),i===a.length-1?(0,u.jsx)("button",{onClick:()=>t([...a,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",children:n||(n=(0,u.jsx)(c.Icon,{name:"plus"}))}):null]},i))):(0,u.jsx)("button",{onClick:()=>t([...a,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",children:i||(i=(0,u.jsx)(c.Icon,{name:"plus"}))})})},p=e=>({wrapper:r.css`
    display: flex;
    flex-direction: column;
    gap: ${e.spacing.xs} 0;
  `,pair:r.css`
    display: flex;
    justify-content: start;
    align-items: center;
  `,operator:r.css`
    color: ${e.palette.orange};
  `});var h;function g(e){var a,t,s,n,i,p,g,v,j,b,x,f,y,T;let{options:D,onOptionsChange:S}=e;const w=(0,c.useStyles)(m);return(0,u.jsxs)("div",{className:(0,r.css)({width:"100%"}),children:[h||(h=(0,u.jsx)("h3",{className:"page-heading",children:"Trace to logs"})),(0,u.jsx)("div",{className:w.infoText,children:"Trace to logs lets you navigate from a trace span to the selected data source's logs."}),(0,u.jsx)(c.InlineFieldRow,{children:(0,u.jsx)(c.InlineField,{tooltip:"The data source the trace is going to navigate to",label:"Data source",labelWidth:26,children:(0,u.jsx)(l.DataSourcePicker,{inputId:"trace-to-logs-data-source-picker",filter:e=>"loki"===e.type||"grafana-splunk-datasource"===e.type,current:null===(a=D.jsonData.tracesToLogs)||void 0===a?void 0:a.datasourceUid,noDefault:!0,width:40,onChange:e=>{var a;return(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:S,options:D},"tracesToLogs",Object.assign({},D.jsonData.tracesToLogs,{datasourceUid:e.uid,tags:null===(a=D.jsonData.tracesToLogs)||void 0===a?void 0:a.tags}))}})})}),null!==(t=D.jsonData.tracesToLogs)&&void 0!==t&&t.mapTagNamesEnabled?(0,u.jsx)(c.InlineFieldRow,{children:(0,u.jsx)(c.InlineField,{tooltip:"Tags that will be used in the Loki query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'",label:"Tags",labelWidth:26,children:(0,u.jsx)(d,{keyPlaceholder:"Tag",values:null!==(s=null!==(n=null===(i=D.jsonData.tracesToLogs)||void 0===i?void 0:i.mappedTags)&&void 0!==n?n:null===(p=D.jsonData.tracesToLogs)||void 0===p||null===(g=p.tags)||void 0===g?void 0:g.map((e=>({key:e}))))&&void 0!==s?s:[],onChange:e=>(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:S,options:D},"tracesToLogs",Object.assign({},D.jsonData.tracesToLogs,{mappedTags:e}))})})}):(0,u.jsx)(c.InlineFieldRow,{children:(0,u.jsx)(c.InlineField,{tooltip:"Tags that will be used in the Loki query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'",label:"Tags",labelWidth:26,children:(0,u.jsx)(c.TagsInput,{tags:null===(v=D.jsonData.tracesToLogs)||void 0===v?void 0:v.tags,width:40,onChange:e=>(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:S,options:D},"tracesToLogs",Object.assign({},D.jsonData.tracesToLogs,{tags:e}))})})}),(0,u.jsx)(c.InlineFieldRow,{children:(0,u.jsx)(c.InlineField,{label:"Map tag names",labelWidth:26,grow:!0,tooltip:"Map trace tag names to log label names. Ex: k8s.pod.name -> pod",children:(0,u.jsx)(c.InlineSwitch,{id:"mapTagNames",value:null!==(j=null===(b=D.jsonData.tracesToLogs)||void 0===b?void 0:b.mapTagNamesEnabled)&&void 0!==j&&j,onChange:e=>(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:S,options:D},"tracesToLogs",Object.assign({},D.jsonData.tracesToLogs,{mapTagNamesEnabled:e.currentTarget.checked}))})})}),(0,u.jsx)(c.InlineFieldRow,{children:(0,u.jsx)(c.InlineField,{label:"Span start time shift",labelWidth:26,grow:!0,tooltip:"Shifts the start time of the span. Default 0 (Time units can be used here, for example: 5s, 1m, 3h)",children:(0,u.jsx)(c.Input,{type:"text",placeholder:"1h",width:40,onChange:e=>(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:S,options:D},"tracesToLogs",Object.assign({},D.jsonData.tracesToLogs,{spanStartTimeShift:e.currentTarget.value})),value:(null===(x=D.jsonData.tracesToLogs)||void 0===x?void 0:x.spanStartTimeShift)||""})})}),(0,u.jsx)(c.InlineFieldRow,{children:(0,u.jsx)(c.InlineField,{label:"Span end time shift",labelWidth:26,grow:!0,tooltip:"Shifts the end time of the span. Default 0 Time units can be used here, for example: 5s, 1m, 3h",children:(0,u.jsx)(c.Input,{type:"text",placeholder:"1h",width:40,onChange:e=>(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:S,options:D},"tracesToLogs",Object.assign({},D.jsonData.tracesToLogs,{spanEndTimeShift:e.currentTarget.value})),value:(null===(f=D.jsonData.tracesToLogs)||void 0===f?void 0:f.spanEndTimeShift)||""})})}),(0,u.jsx)(c.InlineFieldRow,{children:(0,u.jsx)(c.InlineField,{label:"Filter by Trace ID",labelWidth:26,grow:!0,tooltip:"Filters logs by Trace ID. Appends '|=<trace id>' to the query.",children:(0,u.jsx)(c.InlineSwitch,{id:"filterByTraceID",value:null===(y=D.jsonData.tracesToLogs)||void 0===y?void 0:y.filterByTraceID,onChange:e=>(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:S,options:D},"tracesToLogs",Object.assign({},D.jsonData.tracesToLogs,{filterByTraceID:e.currentTarget.checked}))})})}),(0,u.jsx)(c.InlineFieldRow,{children:(0,u.jsx)(c.InlineField,{label:"Filter by Span ID",labelWidth:26,grow:!0,tooltip:"Filters logs by Span ID. Appends '|=<span id>' to the query.",children:(0,u.jsx)(c.InlineSwitch,{id:"filterBySpanID",value:null===(T=D.jsonData.tracesToLogs)||void 0===T?void 0:T.filterBySpanID,onChange:e=>(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:S,options:D},"tracesToLogs",Object.assign({},D.jsonData.tracesToLogs,{filterBySpanID:e.currentTarget.checked}))})})})]})}const m=e=>({infoText:r.css`
    padding-bottom: ${e.spacing.md};
    color: ${e.colors.textSemiWeak};
  `})},"./public/app/core/components/TraceToMetrics/TraceToMetricsSettings.tsx":(e,a,t)=>{t.d(a,{F:()=>c});var s,n=t("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/0/cache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=(t("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),t("./packages/grafana-data/src/index.ts")),r=t("./packages/grafana-runtime/src/index.ts"),o=t("./packages/grafana-ui/src/index.ts"),l=t("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function c(e){var a,t,c;let{options:d,onOptionsChange:p}=e;const h=(0,o.useStyles)(u);return(0,l.jsxs)("div",{className:(0,n.css)({width:"100%"}),children:[s||(s=(0,l.jsx)("h3",{className:"page-heading",children:"Trace to metrics"})),(0,l.jsx)("div",{className:h.infoText,children:"Trace to metrics lets you navigate from a trace span to the selected data source."}),(0,l.jsxs)(o.InlineFieldRow,{className:h.row,children:[(0,l.jsx)(o.InlineField,{tooltip:"The data source the trace is going to navigate to",label:"Data source",labelWidth:26,children:(0,l.jsx)(r.DataSourcePicker,{inputId:"trace-to-metrics-data-source-picker",pluginId:"prometheus",current:null===(a=d.jsonData.tracesToMetrics)||void 0===a?void 0:a.datasourceUid,noDefault:!0,width:40,onChange:e=>(0,i.updateDatasourcePluginJsonDataOption)({onOptionsChange:p,options:d},"tracesToMetrics",Object.assign({},d.jsonData.tracesToMetrics,{datasourceUid:e.uid}))})}),null!==(t=d.jsonData.tracesToMetrics)&&void 0!==t&&t.datasourceUid?(0,l.jsx)(o.Button,{type:"button",variant:"secondary",size:"sm",fill:"text",onClick:()=>{(0,i.updateDatasourcePluginJsonDataOption)({onOptionsChange:p,options:d},"tracesToMetrics",Object.assign({},d.jsonData.tracesToMetrics,{datasourceUid:void 0}))},children:"Clear"}):null]}),(0,l.jsx)(o.InlineFieldRow,{children:(0,l.jsx)(o.InlineField,{label:"Query",labelWidth:26,tooltip:"The Prometheus query that will run when navigating from a trace to metrics",grow:!0,children:(0,l.jsx)(o.Input,{label:"Query",type:"text",allowFullScreen:!0,value:null===(c=d.jsonData.tracesToMetrics)||void 0===c?void 0:c.query,onChange:e=>{(0,i.updateDatasourcePluginJsonDataOption)({onOptionsChange:p,options:d},"tracesToMetrics",Object.assign({},d.jsonData.tracesToMetrics,{query:e.currentTarget.value}))}})})})]})}const u=e=>({infoText:n.css`
    padding-bottom: ${e.spacing.md};
    color: ${e.colors.textSemiWeak};
  `,row:n.css`
    label: row;
    align-items: baseline;
  `})},"./public/app/plugins/datasource/tempo/module.ts":(e,a,t)=>{t.r(a),t.d(a,{plugin:()=>ge});var s,n=t("./packages/grafana-data/src/index.ts"),i=t("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=t("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");var o=t("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/0/cache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),l=t("./.yarn/__virtual__/react-use-virtual-00326e70ba/0/cache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/lib/useAsync.js"),c=t("./packages/grafana-runtime/src/index.ts"),u=t("./packages/grafana-ui/src/index.ts"),d=t("./public/app/plugins/datasource/loki/components/LokiQueryField.tsx"),p=t("./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),h=t("./.yarn/cache/prismjs-npm-1.27.0-ca4e1667c6-85c7f4a3e9.zip/node_modules/prismjs/prism.js"),g=t.n(h),m=t("./public/app/core/actions/index.ts"),v=t("./public/app/core/copy/appNotification.ts"),j=t("./public/app/store/store.ts");function b(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class x extends n.LanguageProvider{constructor(e,a){var t;super(),t=this,b(this,"datasource",void 0),b(this,"tags",void 0),b(this,"request",(async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=await t.datasource.metadataRequest(e,a);return null==s?void 0:s.data})),b(this,"start",(async()=>(await this.fetchTags(),[]))),b(this,"provideCompletionItems",(async function(e){let{prefix:a,text:s,value:n,labelKey:i,wrapperClasses:r}=e;const o={suggestions:[]};if(!n)return o;const l=n.endText.getText(),c="="===l[l.indexOf(s)-1];return c||"="===s?t.getTagValueCompletionItems(n):t.getTagsCompletionItems()})),b(this,"getTagsCompletionItems",(()=>{const{tags:e}=this,a=[];return null!=e&&e.length&&a.push({label:"Tag",items:e.map((e=>({label:e})))}),{suggestions:a}})),this.datasource=e,Object.assign(this,a)}async fetchTags(){const e=await this.request("/api/search/tags",[]);this.tags=e.tagNames}async getTagValueCompletionItems(e){var a;const t=e.endText.getText().split(" ");let s=null!==(a=t[t.length-1])&&void 0!==a?a:"";s=s.split("=")[0];const n=await this.request(`/api/search/tag/${s}/values`,[]),i=[];return n&&n.tagValues&&i.push({label:"Tag Values",items:n.tagValues.map((e=>({label:e})))}),{suggestions:i}}async getOptions(e){const a=await this.request(`/api/search/tag/${e}/values`);let t=[];return a&&a.tagValues&&(t=a.tagValues.map((e=>({value:e,label:e})))),t}}const f="tempo",y="e.g. 1.2s, 100ms",T=[(0,u.BracesPlugin)(),(0,u.SlatePrism)({onlyIn:e=>"block"===e.object&&"code_block"===e.type,getSyntax:()=>f})];g().languages.tempo={key:{pattern:/[^\s]+(?==)/,alias:"attr-name"},operator:/[=]/,value:[{pattern:/"(.+)"/},{pattern:/[^\s]+/}]};const D=e=>{let{datasource:a,query:t,onChange:s,onBlur:o,onRunQuery:l}=e;const d=(0,u.useStyles2)(S),h=(0,i.useMemo)((()=>new x(a)),[a]),[g,b]=(0,i.useState)(!1),[f,D]=(0,i.useState)({value:""}),[w,k]=(0,i.useState)({value:""}),[O,I]=(0,i.useState)(null),[_,C]=(0,i.useState)({}),[N,F]=(0,i.useState)({serviceName:!1,spanName:!1});async function q(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{F((a=>Object.assign({},a,{[e]:!1})));const s=await a.getOptions(e);return s.filter((e=>!!e.value&&(0,u.fuzzyMatch)(e.value,t).found))}catch(a){return 404===(null==a?void 0:a.status)?F((a=>Object.assign({},a,{[e]:!1}))):((0,j.WI)((0,m.$l)((0,v.t_)("Error",a))),F((a=>Object.assign({},a,{[e]:!1})))),I(a),[]}}const L=(0,i.useCallback)((e=>(F((a=>Object.assign({},a,{[e]:!0}))),q(e,h))),[h]),P=(0,i.useCallback)((e=>(0,p.debounce)((()=>L(e)),500,{leading:!0,trailing:!0})),[L]),R=(e,a)=>(F((e=>Object.assign({},e,{[a]:!0}))),q(a,h,e)),$=(0,p.debounce)((e=>R(e,"service.name")),500,{leading:!0,trailing:!0}),M=(0,p.debounce)((e=>R(e,"name")),500,{leading:!0,trailing:!0});(0,i.useEffect)((()=>{(async()=>{try{await h.start(),q("service.name",h),q("name",h),b(!0)}catch(e){404===(null==e?void 0:e.status)?I(e):(0,j.WI)((0,m.$l)((0,v.t_)("Error",e))),b(!0)}})()}),[h,P]);const Q=e=>{"Enter"===e.key&&(e.shiftKey||e.ctrlKey)&&l()},U=(0,c.getTemplateSrv)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:d.container,children:[(0,r.jsx)(u.InlineFieldRow,{children:(0,r.jsx)(u.InlineField,{label:"Service Name",labelWidth:14,grow:!0,children:(0,r.jsx)(u.AsyncSelect,{inputId:"service",cacheOptions:!1,loadOptions:$,onOpenMenu:P("service.name"),isLoading:N.serviceName,value:f.value,onChange:e=>{D({value:e}),s(Object.assign({},t,{serviceName:(null==e?void 0:e.value)||void 0}))},placeholder:"Select a service",isClearable:!0,defaultOptions:!0,onKeyDown:Q,"aria-label":"select-service-name"})})}),(0,r.jsx)(u.InlineFieldRow,{children:(0,r.jsx)(u.InlineField,{label:"Span Name",labelWidth:14,grow:!0,children:(0,r.jsx)(u.AsyncSelect,{inputId:"spanName",cacheOptions:!1,loadOptions:M,onOpenMenu:P("name"),isLoading:N.spanName,value:w.value,onChange:e=>{k({value:e}),s(Object.assign({},t,{spanName:(null==e?void 0:e.value)||void 0}))},placeholder:"Select a span",isClearable:!0,defaultOptions:!0,onKeyDown:Q,"aria-label":"select-span-name"})})}),(0,r.jsx)(u.InlineFieldRow,{children:(0,r.jsx)(u.InlineField,{label:"Tags",labelWidth:14,grow:!0,tooltip:"Values should be in the logfmt format.",children:(0,r.jsx)(u.QueryField,{additionalPlugins:T,query:t.search,onTypeahead:async e=>await h.provideCompletionItems(e),onBlur:o,onChange:e=>{s(Object.assign({},t,{search:e}))},placeholder:"http.status_code=200 error=true",cleanText:e=>{const a=e.split(/\s+(?=([^"]*"[^"]*")*[^"]*$)/g);return a.length>1?a[a.length-1]:e},onRunQuery:l,syntaxLoaded:g,portalOrigin:"tempo"})})}),(0,r.jsx)(u.InlineFieldRow,{children:(0,r.jsx)(u.InlineField,{label:"Min Duration",invalid:!!_.minDuration,labelWidth:14,grow:!0,children:(0,r.jsx)(u.Input,{id:"minDuration",value:t.minDuration||"",placeholder:y,onBlur:()=>{var e;const a=U.replace(null!==(e=t.minDuration)&&void 0!==e?e:"");t.minDuration&&!(0,n.isValidGoDuration)(a)?C(Object.assign({},_,{minDuration:!0})):C(Object.assign({},_,{minDuration:!1}))},onChange:e=>s(Object.assign({},t,{minDuration:e.currentTarget.value})),onKeyDown:Q})})}),(0,r.jsx)(u.InlineFieldRow,{children:(0,r.jsx)(u.InlineField,{label:"Max Duration",invalid:!!_.maxDuration,labelWidth:14,grow:!0,children:(0,r.jsx)(u.Input,{id:"maxDuration",value:t.maxDuration||"",placeholder:y,onBlur:()=>{var e;const a=U.replace(null!==(e=t.maxDuration)&&void 0!==e?e:"");t.maxDuration&&!(0,n.isValidGoDuration)(a)?C(Object.assign({},_,{maxDuration:!0})):C(Object.assign({},_,{maxDuration:!1}))},onChange:e=>s(Object.assign({},t,{maxDuration:e.currentTarget.value})),onKeyDown:Q})})}),(0,r.jsx)(u.InlineFieldRow,{children:(0,r.jsx)(u.InlineField,{label:"Limit",invalid:!!_.limit,labelWidth:14,grow:!0,tooltip:"Maximum numbers of returned results",children:(0,r.jsx)(u.Input,{id:"limit",value:t.limit||"",type:"number",onChange:e=>{let a=e.currentTarget.value?parseInt(e.currentTarget.value,10):void 0;a&&(!Number.isInteger(a)||a<=0)?C(Object.assign({},_,{limit:!0})):C(Object.assign({},_,{limit:!1})),s(Object.assign({},t,{limit:e.currentTarget.value?parseInt(e.currentTarget.value,10):void 0}))},onKeyDown:Q})})})]}),O?(0,r.jsxs)(u.Alert,{title:"Unable to connect to Tempo search",severity:"info",className:d.alert,children:["Please ensure that Tempo is configured with search enabled. If you would like to hide this tab, you can configure it in the ",(0,r.jsx)("a",{href:`/datasources/edit/${a.uid}`,children:"datasource settings"}),"."]}):null]})},S=e=>({container:o.css`
    max-width: 500px;
  `,alert:o.css`
    max-width: 75ch;
    margin-top: ${e.spacing(2)};
  `});var w,k,O,I=t("./public/app/features/variables/adhoc/picker/AdHocFilter.tsx");async function _(e){if(!e)return;const a=(0,c.getDataSourceSrv)();try{return await a.get(e)}catch(e){return}}function C(e){let{graphDatasourceUid:a,query:t,onChange:s}=e;const n=(0,u.useStyles2)(F),o=(0,l.Z)((()=>_(a)),[a]),[c,d]=(0,i.useState)(void 0);if((0,i.useEffect)((()=>{!o.loading&&o.value&&async function(e){const a=await e.getTagKeys({series:["traces_service_graph_request_server_seconds_sum","traces_service_graph_request_total","traces_service_graph_request_failed_total"]});d(Boolean(a.length))}(o.value)}),[o]),o.loading)return null;const p=o.value;if(!a)return w||(w=(0,r.jsx)("div",{className:"text-warning",children:"Please set up a service graph datasource in the datasource settings."}));if(a&&!p)return k||(k=(0,r.jsx)("div",{className:"text-warning",children:"Service graph datasource is configured but the data source no longer exists. Please configure existing data source to use the service graph functionality."}));const h=function(e){let a,t=[];const s=/([\w_]+)(=|!=|<|>|=~|!~)"(.*?)"/g;for(;null!==(a=s.exec(e));)t.push({key:a[1],operator:a[2],value:a[3],condition:""});return t}(t.serviceMapQuery||"");return(0,r.jsxs)("div",{children:[(0,r.jsx)(u.InlineFieldRow,{children:(0,r.jsx)(u.InlineField,{label:"Filter",labelWidth:14,grow:!0,children:(0,r.jsx)(I.F,{datasource:{uid:a},filters:h,getTagKeysOptions:{series:["traces_service_graph_request_server_seconds_sum","traces_service_graph_request_total","traces_service_graph_request_failed_total"]},addFilter:e=>{s(Object.assign({},t,{serviceMapQuery:N([...h,e])}))},removeFilter:e=>{const a=[...h];a.splice(e,1),s(Object.assign({},t,{serviceMapQuery:N(a)}))},changeFilter:(e,a)=>{const n=[...h];n.splice(e,1,a),s(Object.assign({},t,{serviceMapQuery:N(n)}))}})})}),!1===c?(0,r.jsxs)(u.Alert,{title:"No service graph data found",severity:"info",className:n.alert,children:["Please ensure that service graph metrics are set up correctly according to the"," ",O||(O=(0,r.jsx)("a",{target:"_blank",rel:"noreferrer noopener",href:"https://grafana.com/docs/tempo/next/grafana-agent/service-graphs/",children:"Tempo documentation"})),"."]}):null]})}function N(e){return`{${e.map((e=>`${e.key}${e.operator}"${e.value}"`)).join(",")}}`}const F=e=>({alert:o.css`
    max-width: 75ch;
    margin-top: ${e.spacing(2)};
  `});var q,L,P;function R(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class $ extends i.PureComponent{constructor(e){super(e),R(this,"onChangeLinkedQuery",(e=>{const{query:a,onChange:t}=this.props;t(Object.assign({},a,{linkedQuery:Object.assign({},e,{refId:"linked"})}))})),R(this,"onRunLinkedQuery",(()=>{this.props.onRunQuery()})),R(this,"onClearResults",(()=>{const{onChange:e,query:a,onRunQuery:t}=this.props;e(Object.assign({},a,{queryType:"clear"})),t()}))}async componentDidMount(){this.props.query.queryType||this.props.onChange(Object.assign({},this.props.query,{queryType:"traceId"}))}render(){var e,a;const{query:t,onChange:s,datasource:n}=this.props,i=n.getLokiSearchDS(),l=null===(e=n.serviceMap)||void 0===e?void 0:e.datasourceUid,d=[{value:"traceId",label:"TraceID"},{value:"upload",label:"JSON file"}];return c.config.featureToggles.tempoServiceGraph&&d.push({value:"serviceMap",label:"Service Graph"}),!c.config.featureToggles.tempoSearch||null!=n&&null!==(a=n.search)&&void 0!==a&&a.hide||d.unshift({value:"nativeSearch",label:"Search - Beta"}),i&&(c.config.featureToggles.tempoSearch?d.push({value:"search",label:"Loki Search"}):d.unshift({value:"search",label:"Search"})),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.InlineFieldRow,{children:(0,r.jsx)(u.InlineField,{label:"Query type",children:(0,r.jsx)(u.RadioButtonGroup,{options:d,value:t.queryType,onChange:e=>{this.onClearResults(),s(Object.assign({},t,{queryType:e}))},size:"md"})})}),"nativeSearch"===t.queryType&&(0,r.jsxs)("div",{style:{maxWidth:"65ch"},children:[q||(q=(0,r.jsx)(u.Badge,{icon:"rocket",text:"Beta",color:"blue"})),c.config.featureToggles.tempoBackendSearch?(0,r.jsx)(r.Fragment,{children:" Tempo search is currently in beta."}):(0,r.jsx)(r.Fragment,{children:" Tempo search is currently in beta and is designed to return recent traces only. It ignores the time range picker. We are actively working on full backend search. Look for improvements in the near future!"})]}),"search"===t.queryType&&(0,r.jsx)(M,{logsDatasourceUid:i,query:t,onRunQuery:this.onRunLinkedQuery,onChange:this.onChangeLinkedQuery}),"nativeSearch"===t.queryType&&(0,r.jsx)(D,{datasource:this.props.datasource,query:t,onChange:s,onBlur:this.props.onBlur,onRunQuery:this.props.onRunQuery}),"upload"===t.queryType&&(0,r.jsx)("div",{className:(0,o.css)({padding:this.props.theme.spacing(2)}),children:(0,r.jsx)(u.FileDropzone,{options:{multiple:!1},onLoad:e=>{this.props.datasource.uploadedJson=e,this.props.onRunQuery()}})}),"traceId"===t.queryType&&(0,r.jsx)(u.InlineFieldRow,{children:(0,r.jsx)(u.InlineField,{label:"Trace ID",labelWidth:14,grow:!0,children:(0,r.jsx)(u.QueryField,{query:t.query,onChange:e=>{s(Object.assign({},t,{query:e,queryType:"traceId",linkedQuery:void 0}))},onBlur:this.props.onBlur,onRunQuery:this.props.onRunQuery,placeholder:"Enter a Trace ID (run with Shift+Enter)",portalOrigin:"tempo"})})}),"serviceMap"===t.queryType&&(0,r.jsx)(C,{graphDatasourceUid:l,query:t,onChange:s})]})}}function M(e){let{logsDatasourceUid:a,onChange:t,onRunQuery:s,query:n}=e;const i=(0,l.Z)((()=>_(a)),[a]);if(i.loading)return null;const o=i.value;var c;return o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(u.InlineLabel,{children:["Tempo uses ",o.name," to find traces."]}),(0,r.jsx)(d.n,{datasource:o,onChange:t,onRunQuery:s,query:null!==(c=n.linkedQuery)&&void 0!==c?c:{refId:"linked"},history:[]})]}):a?a&&!o?P||(P=(0,r.jsx)("div",{className:"text-warning",children:"Loki search datasource is configured but the data source no longer exists. Please configure existing data source to use the search."})):null:L||(L=(0,r.jsx)("div",{className:"text-warning",children:"Please set up a Loki search datasource in the datasource settings."}))}const Q=(0,u.withTheme2)($);var U,z=t("./public/app/core/components/NodeGraphSettings.tsx"),W=t("./public/app/core/components/TraceToLogs/TraceToLogsSettings.tsx"),B=t("./public/app/core/components/TraceToMetrics/TraceToMetricsSettings.tsx");function E(e){var a,t,s,i;let{options:l,onOptionsChange:d}=e;const p=(0,u.useStyles)(G),h=!1!==(null===(a=l.jsonData.tracesToLogs)||void 0===a?void 0:a.lokiSearch)?null===(t=l.jsonData.tracesToLogs)||void 0===t?void 0:t.datasourceUid:void 0;return h&&void 0===l.jsonData.lokiSearch&&(0,n.updateDatasourcePluginJsonDataOption)({onOptionsChange:d,options:l},"lokiSearch",{datasourceUid:h}),(0,r.jsxs)("div",{className:(0,o.css)({width:"100%"}),children:[U||(U=(0,r.jsx)("h3",{className:"page-heading",children:"Loki Search"})),(0,r.jsx)("div",{className:p.infoText,children:"Select a Loki datasource to search for traces. Derived fields must be configured in the Loki data source."}),(0,r.jsxs)(u.InlineFieldRow,{className:p.row,children:[(0,r.jsx)(u.InlineField,{tooltip:"The Loki data source with the service graph data",label:"Data source",labelWidth:26,children:(0,r.jsx)(c.DataSourcePicker,{inputId:"loki-search-data-source-picker",pluginId:"loki",current:null===(s=l.jsonData.lokiSearch)||void 0===s?void 0:s.datasourceUid,noDefault:!0,width:40,onChange:e=>(0,n.updateDatasourcePluginJsonDataOption)({onOptionsChange:d,options:l},"lokiSearch",{datasourceUid:e.uid})})}),null!==(i=l.jsonData.lokiSearch)&&void 0!==i&&i.datasourceUid?(0,r.jsx)(u.Button,{type:"button",variant:"secondary",size:"sm",fill:"text",onClick:()=>{(0,n.updateDatasourcePluginJsonDataOption)({onOptionsChange:d,options:l},"lokiSearch",{datasourceUid:void 0})},children:"Clear"}):null]})]})}const G=e=>({infoText:o.css`
    label: infoText;
    padding-bottom: ${e.spacing.md};
    color: ${e.colors.textSemiWeak};
  `,row:o.css`
    label: row;
    align-items: baseline;
  `});var J;function V(e){var a;let{options:t,onOptionsChange:s}=e;const i=(0,u.useStyles)(K);return(0,r.jsxs)("div",{className:i.container,children:[J||(J=(0,r.jsx)("h3",{className:"page-heading",children:"Search"})),(0,r.jsx)(u.InlineFieldRow,{className:i.row,children:(0,r.jsx)(u.InlineField,{tooltip:"Removes the Search tab from the Tempo query editor.",label:"Hide search",labelWidth:26,children:(0,r.jsx)(u.InlineSwitch,{id:"hideSearch",value:null===(a=t.jsonData.search)||void 0===a?void 0:a.hide,onChange:e=>(0,n.updateDatasourcePluginJsonDataOption)({onOptionsChange:s,options:t},"search",Object.assign({},t.jsonData.search,{hide:e.currentTarget.checked}))})})})]})}const K=e=>({container:o.css`
    label: container;
    width: 100%;
  `,row:o.css`
    label: row;
    align-items: baseline;
  `});var A;function H(e){var a,t;let{options:s,onOptionsChange:i}=e;const l=(0,u.useStyles)(Z);return(0,r.jsxs)("div",{className:(0,o.css)({width:"100%"}),children:[A||(A=(0,r.jsx)("h3",{className:"page-heading",children:"Service Graph"})),(0,r.jsx)("div",{className:l.infoText,children:"To allow querying service graph data you have to select a Prometheus instance where the data is stored."}),(0,r.jsxs)(u.InlineFieldRow,{className:l.row,children:[(0,r.jsx)(u.InlineField,{tooltip:"The Prometheus data source with the service graph data",label:"Data source",labelWidth:26,children:(0,r.jsx)(c.DataSourcePicker,{inputId:"service-graph-data-source-picker",pluginId:"prometheus",current:null===(a=s.jsonData.serviceMap)||void 0===a?void 0:a.datasourceUid,noDefault:!0,width:40,onChange:e=>(0,n.updateDatasourcePluginJsonDataOption)({onOptionsChange:i,options:s},"serviceMap",{datasourceUid:e.uid})})}),null!==(t=s.jsonData.serviceMap)&&void 0!==t&&t.datasourceUid?(0,r.jsx)(u.Button,{type:"button",variant:"secondary",size:"sm",fill:"text",onClick:()=>{(0,n.updateDatasourcePluginJsonDataOption)({onOptionsChange:i,options:s},"serviceMap",{datasourceUid:void 0})},children:"Clear"}):null]})]})}const Z=e=>({infoText:o.css`
    label: infoText;
    padding-bottom: ${e.spacing.md};
    color: ${e.colors.textSemiWeak};
  `,row:o.css`
    label: row;
    align-items: baseline;
  `});var Y=t("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js"),X=t("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/observable/from.js"),ee=t("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/observable/throwError.js"),ae=t("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/observable/merge.js"),te=t("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/observable/empty.js"),se=t("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),ne=t("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),ie=t("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),re=t("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/operators/toArray.js"),oe=t("./public/app/core/utils/fetch.ts"),le=t("./public/app/features/plugins/datasource_srv.ts"),ce=t("./public/app/plugins/datasource/tempo/graphTransform.ts"),ue=t("./public/app/plugins/datasource/tempo/resultTransformer.ts");function de(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class pe extends c.DataSourceWithBackend{constructor(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,c.getTemplateSrv)();super(e),this.instanceSettings=e,this.templateSrv=a,de(this,"tracesToLogs",void 0),de(this,"serviceMap",void 0),de(this,"search",void 0),de(this,"nodeGraph",void 0),de(this,"lokiSearch",void 0),de(this,"uploadedJson",null),de(this,"getLokiSearchDS",(()=>{var e,a,t,s;const n=!1!==(null===(e=this.tracesToLogs)||void 0===e?void 0:e.lokiSearch)&&void 0===this.lokiSearch?null===(a=this.tracesToLogs)||void 0===a?void 0:a.datasourceUid:void 0;return null!==(t=null===(s=this.lokiSearch)||void 0===s?void 0:s.datasourceUid)&&void 0!==t?t:n})),this.instanceSettings=e,this.templateSrv=a,this.tracesToLogs=e.jsonData.tracesToLogs,this.serviceMap=e.jsonData.serviceMap,this.search=e.jsonData.search,this.nodeGraph=e.jsonData.nodeGraph,this.lokiSearch=e.jsonData.lokiSearch}query(e){var a,t,s,i,r,o;const l=[],u=e.targets.filter((e=>!e.hide)),d=(0,p.groupBy)(u,(e=>e.queryType||"traceId"));if(d.clear)return(0,Y.of)({data:[],state:n.LoadingState.Done});const h=this.getLokiSearchDS();if(h&&(null===(a=d.search)||void 0===a?void 0:a.length)>0){const a=(0,le.ak)();l.push((0,X.D)(a.get(h)).pipe((0,se.z)((a=>{var t;const s=Object.assign({},e,{targets:d.search.map((e=>e.linkedQuery))}),n=(null===(t=a.instanceSettings.jsonData.derivedFields)||void 0===t?void 0:t.filter((e=>e.datasourceUid===this.uid&&e.matcherRegex)).map((e=>e.matcherRegex)))||[];return n&&0!==n.length?a.query(s).pipe((0,ne.U)((e=>e.error?e:(0,ue.RY)(e,this.uid,this.name,n)))):(0,ee._)((()=>new Error("No Loki datasource configured for search. Set up Derived Fields for traces in a Loki datasource settings and link it to this Tempo datasource.")))}))))}if(null!==(t=d.nativeSearch)&&void 0!==t&&t.length)try{const a=c.config.featureToggles.tempoBackendSearch?{startTime:e.range.from.unix(),endTime:e.range.to.unix()}:void 0,t=this.applyVariables(d.nativeSearch[0],e.scopedVars),s=this.buildSearchQuery(t,a);l.push(this._request("/api/search",s).pipe((0,ne.U)((e=>({data:[(0,ue.n4)(e.data.traces,this.instanceSettings)]}))),(0,ie.K)((e=>(0,Y.of)({error:{message:e.data.message},data:[]})))))}catch(e){return(0,Y.of)({error:{message:e.message},data:[]})}if(null!==(s=d.upload)&&void 0!==s&&s.length)if(this.uploadedJson){const e=JSON.parse(this.uploadedJson);var g;if(e.batches)l.push((0,Y.of)((0,ue.IM)(e.batches,null===(g=this.nodeGraph)||void 0===g?void 0:g.enabled)));else l.push((0,Y.of)({error:{message:"JSON is not valid OpenTelemetry format"},data:[]}))}else l.push((0,Y.of)({data:[],state:n.LoadingState.Done}));var m,v;return null!==(i=this.serviceMap)&&void 0!==i&&i.datasourceUid&&(null===(r=d.serviceMap)||void 0===r?void 0:r.length)>0&&l.push((m=e,v=this.serviceMap.datasourceUid,function(e,a){return(0,X.D)((0,le.ak)().get(a)).pipe((0,se.z)((a=>a.query(e))))}(function(e){return Object.assign({},e,{targets:ce.t3.map((a=>({refId:a,expr:`delta(${a}${e.targets[0].serviceMapQuery||""}[$__range])`,instant:!0})))})}(m),v).pipe((0,re.q)(),(0,ne.U)((e=>{const a=e.find((e=>!!e.error));if(a)throw new Error(a.error.message);const{nodes:t,edges:s}=(0,ce.BC)(e,m.range);return t.fields[0].config={links:[he("Request rate",`rate(${ce.Yt}{server="\${__data.fields.id}"}[$__rate_interval])`,v),he("Request histogram",`histogram_quantile(0.9, sum(rate(${ce.NZ}{server="\${__data.fields.id}"}[$__rate_interval])) by (le, client, server))`,v),he("Failed request rate",`rate(${ce.yf}{server="\${__data.fields.id}"}[$__rate_interval])`,v)]},{data:[t,s],state:n.LoadingState.Done}}))))),(null===(o=d.traceId)||void 0===o?void 0:o.length)>0&&l.push(this.handleTraceIdQuery(e,d.traceId)),(0,ae.T)(...l)}applyTemplateVariables(e,a){return this.applyVariables(e,a)}interpolateVariablesInQueries(e,a){return e&&0!==e.length?e.map((e=>Object.assign({},e,{datasource:this.getRef()},this.applyVariables(e,a)))):[]}applyVariables(e,a){var t,s,n,i;const r=Object.assign({},e);var o,l;e.linkedQuery&&(r.linkedQuery=Object.assign({},e.linkedQuery,{expr:this.templateSrv.replace(null!==(o=null===(l=e.linkedQuery)||void 0===l?void 0:l.expr)&&void 0!==o?o:"",a)}));return Object.assign({},r,{query:this.templateSrv.replace(null!==(t=e.query)&&void 0!==t?t:"",a),search:this.templateSrv.replace(null!==(s=e.search)&&void 0!==s?s:"",a),minDuration:this.templateSrv.replace(null!==(n=e.minDuration)&&void 0!==n?n:"",a),maxDuration:this.templateSrv.replace(null!==(i=e.maxDuration)&&void 0!==i?i:"",a)})}handleTraceIdQuery(e,a){const t=a.filter((e=>e.query));if(!t.length)return te.E;const s=Object.assign({},e,{targets:t});return super.query(s).pipe((0,ne.U)((e=>{var a;return e.error?e:(0,ue.Jk)(e,null===(a=this.nodeGraph)||void 0===a?void 0:a.enabled)})))}async metadataRequest(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this._request(e,a,{method:"GET",hideFromInspector:!0}).toPromise()}_request(e,a,t){const s=a?(0,oe.tW)(a):"",n=`${this.instanceSettings.url}${e}${s.length?`?${s}`:""}`,i=Object.assign({},t,{url:n});return(0,c.getBackendSrv)().fetch(i)}async testDatasource(){const e={headers:{},method:"GET",url:`${this.instanceSettings.url}/api/echo`},a=await(0,c.getBackendSrv)().fetch(e).toPromise();if(null!=a&&a.ok)return{status:"success",message:"Data source is working"}}getQueryDisplayText(e){if("nativeSearch"===e.queryType){let a=[];for(const t of["serviceName","spanName","search","minDuration","maxDuration","limit"])e.hasOwnProperty(t)&&e[t]&&a.push(`${(0,p.startCase)(t)}: ${e[t]}`);return a.join(", ")}return e.query}buildSearchQuery(e,a){var t;let s=null!==(t=e.search)&&void 0!==t?t:"",i=(0,p.pick)(e,["minDuration","maxDuration","limit"]);if(i=(0,p.pickBy)(i,p.identity),e.serviceName&&(s+=` service.name="${e.serviceName}"`),e.spanName&&(s+=` name="${e.spanName}"`),i.limit||(i.limit=20),i.minDuration){var r;if(i.minDuration=this.templateSrv.replace(null!==(r=i.minDuration)&&void 0!==r?r:""),!(0,n.isValidGoDuration)(i.minDuration))throw new Error("Please enter a valid min duration.");i.minDuration=i.minDuration.replace(/\s/g,"")}if(i.maxDuration){var o;if(i.maxDuration=this.templateSrv.replace(null!==(o=i.maxDuration)&&void 0!==o?o:""),!(0,n.isValidGoDuration)(i.maxDuration))throw new Error("Please enter a valid max duration.");i.maxDuration=i.maxDuration.replace(/\s/g,"")}if(!Number.isInteger(i.limit)||i.limit<=0)throw new Error("Please enter a valid limit.");let l=Object.assign({tags:s},i);return a&&(l.start=a.startTime,l.end=a.endTime),l}async getServiceGraphLabels(){return(await(0,le.ak)().get(this.serviceMap.datasourceUid)).getTagKeys()}async getServiceGraphLabelValues(e){return(await(0,le.ak)().get(this.serviceMap.datasourceUid)).getTagValues({key:e})}}function he(e,a,t){return{url:"",title:e,internal:{query:{expr:a},datasourceUid:t,datasourceName:"Prometheus"}}}const ge=new n.DataSourcePlugin(pe).setQueryEditor(Q).setConfigEditor((e=>{let{options:a,onOptionsChange:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.DataSourceHttpSettings,{defaultUrl:"http://tempo",dataSourceConfig:a,showAccessOptions:!1,onChange:t}),(0,r.jsx)("div",{className:"gf-form-group",children:(0,r.jsx)(W.Z,{options:a,onOptionsChange:t})}),c.config.featureToggles.traceToMetrics?(0,r.jsx)("div",{className:"gf-form-group",children:(0,r.jsx)(B.F,{options:a,onOptionsChange:t})}):null,c.config.featureToggles.tempoServiceGraph&&(0,r.jsx)("div",{className:"gf-form-group",children:(0,r.jsx)(H,{options:a,onOptionsChange:t})}),c.config.featureToggles.tempoSearch&&(0,r.jsx)("div",{className:"gf-form-group",children:(0,r.jsx)(V,{options:a,onOptionsChange:t})}),(0,r.jsx)("div",{className:"gf-form-group",children:(0,r.jsx)(z.n,{options:a,onOptionsChange:t})}),(0,r.jsx)("div",{className:"gf-form-group",children:(0,r.jsx)(E,{options:a,onOptionsChange:t})})]})})).setQueryEditorHelp((function(){return s||(s=(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{id:"tempo-cheat-sheet",children:"Tempo Cheat Sheet"}),(0,r.jsx)("p",{children:"Tempo is a trace id lookup store. Enter a trace id in the above field and hit “Run Query” to retrieve your trace. Tempo is generally paired with other datasources such as Loki or Prometheus to find traces."}),(0,r.jsxs)("p",{children:["Here are some"," ",(0,r.jsx)("a",{href:"https://grafana.com/docs/tempo/latest/guides/instrumentation/",target:"blank",children:"instrumentation examples"})," ","to get you started with trace discovery through logs and metrics (exemplars)."]})]}))}))}}]);