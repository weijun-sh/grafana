"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[743],{"./public/app/features/notifications/NotificationsPage.tsx":(e,a,n)=>{n.r(a),n.d(a,{NotificationsPage:()=>N,default:()=>z});var s=n("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),t=n("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/0/cache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js"),r=n("./packages/grafana-runtime/src/index.ts"),i=n("./public/app/core/components/Page/Page.tsx"),c=n("./public/app/core/selectors/navModel.ts"),o=n("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/0/cache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),d=n("./.yarn/__virtual__/react-use-virtual-00326e70ba/0/cache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useEffectOnce.js"),l=n("./packages/grafana-ui/src/index.ts"),p=n("./.yarn/cache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/formatDistance/index.js"),f=n("./.yarn/cache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/_lib/requiredArgs/index.js");var m=n("./packages/grafana-ui/src/components/Alert/Alert.tsx"),u=n("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const g=e=>{let{title:a,severity:n="error",traceId:s,timestamp:t,children:i,onRemove:c}=e;const o=(0,l.useTheme2)(),d=x(o,n),g=r.config.featureToggles.tracing&&s;return(0,u.jsxs)("div",{className:d.wrapper,children:[(0,u.jsx)("div",{className:d.icon,children:(0,u.jsx)(l.Icon,{size:"xl",name:(0,m.j)(n)})}),(0,u.jsx)("div",{className:d.title,children:a}),(0,u.jsx)("div",{className:d.body,children:i}),(0,u.jsx)("span",{className:d.trace,children:g&&`Trace ID: ${s}`}),(0,u.jsx)("div",{className:d.close,children:(0,u.jsx)(l.IconButton,{"aria-label":"Close alert",name:"times",onClick:c,size:"lg",type:"button"})}),t&&(0,u.jsx)("span",{className:d.timestamp,children:function(e,a){return(0,f.Z)(1,arguments),(0,p.Z)(e,Date.now(),a)}(t,{addSuffix:!0})})]})},x=(e,a)=>{const n=e.colors[a],s=e.shape.borderRadius();return{wrapper:(0,o.css)({display:"grid",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"auto 1fr auto",gridTemplateAreas:"\n        'icon title close'\n        'icon body body'\n        'icon trace timestamp'",gap:`0 ${e.spacing(2)}`,background:e.colors.background.secondary,borderRadius:s}),icon:(0,o.css)({gridArea:"icon",display:"flex",alignItems:"center",justifyContent:"center",padding:e.spacing(2,3),background:n.main,color:n.contrastText,borderRadius:`${s} 0 0 ${s}`}),title:(0,o.css)({gridArea:"title",alignSelf:"center",fontWeight:e.typography.fontWeightMedium,color:e.colors.text.primary}),body:(0,o.css)({gridArea:"body",maxHeight:"50vh",marginRight:e.spacing(1),overflowY:"auto",overflowWrap:"break-word",wordBreak:"break-word",color:e.colors.text.secondary}),trace:(0,o.css)({gridArea:"trace",justifySelf:"start",alignSelf:"end",paddingBottom:e.spacing(1),fontSize:e.typography.pxToRem(10),color:e.colors.text.secondary}),close:(0,o.css)({gridArea:"close",display:"flex",justifySelf:"end",padding:e.spacing(1,.5),background:"none"}),timestamp:(0,o.css)({gridArea:"timestamp",alignSelf:"end",padding:e.spacing(1),fontSize:e.typography.pxToRem(10),color:e.colors.text.secondary})}};var h,b,y,v=n("./public/app/core/reducers/appNotification.ts"),j=n("./public/app/types/index.ts");function D(){const e=(0,j.I0)(),a=(0,j.v9)(e=>(0,v.mE)(e.appNotifications)),n=(0,s.useRef)((0,j.v9)(e=>(0,v.Av)(e.appNotifications))),t=(0,l.useStyles2)(_);(0,d.Z)(()=>{e((0,v.Jk)(Date.now()))});return 0===a.length?(0,u.jsxs)("div",{className:t.noNotifsWrapper,children:[h||(h=(0,u.jsx)(l.Icon,{name:"bell",size:"xxl"})),b||(b=(0,u.jsx)("span",{children:"Notifications you have received will appear here."}))]}):(0,u.jsxs)("div",{className:t.wrapper,children:[(0,u.jsx)(l.Button,{variant:"destructive",onClick:()=>{e((0,v.F6)())},className:t.clearAll,children:"Clear all notifications"}),(0,u.jsx)("ul",{className:t.list,children:a.map(a=>(0,u.jsx)("li",{className:(0,o.cx)(t.listItem,{[t.newItem]:a.timestamp>n.current}),children:(0,u.jsx)(g,{severity:a.severity,title:a.title,onRemove:()=>(r=a.id,void e((0,v.hS)(r))),timestamp:a.timestamp,traceId:a.traceId,children:(0,u.jsx)("span",{children:a.text})})},a.id))})]});var r}function _(e){return{smallText:(0,o.css)({fontSize:e.typography.pxToRem(10),color:e.colors.text.secondary}),side:(0,o.css)({display:"flex",flexDirection:"column",padding:"3px 6px",paddingTop:e.spacing(1),alignItems:"flex-end",justifyContent:"space-between",flexShrink:0}),list:(0,o.css)({display:"flex",flexDirection:"column",gap:e.spacing(1)}),listItem:(0,o.css)({listStyle:"none",gap:e.spacing(1),alignItems:"center",position:"relative"}),newItem:(0,o.css)({"&::before":{content:'""',height:"100%",position:"absolute",left:"-7px",top:0,background:e.colors.gradients.brandVertical,width:e.spacing(.5),borderRadius:e.shape.borderRadius(1)}}),noNotifsWrapper:(0,o.css)({display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(1)}),wrapper:(0,o.css)({display:"flex",flexDirection:"column",gap:e.spacing(2)}),clearAll:(0,o.css)({alignSelf:"flex-end"})}}const w=e=>({navModel:(0,c.h)(e.navIndex,"notifications")}),N=((0,t.connect)(w,void 0),e=>{let{navModel:a}=e;return r.config.featureToggles.persistNotifications?(0,u.jsx)(i.Z,{navModel:a,children:y||(y=(0,u.jsx)(i.Z.Contents,{children:(0,u.jsx)(D,{})}))}):null}),z=(0,t.connect)(w)(N)},"./.yarn/cache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/formatDistance/index.js":(e,a,n)=>{n.d(a,{Z:()=>(function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,d.Z)(2,arguments);var u=n.locale||i.Z;if(!u.formatDistance)throw new RangeError("locale must contain formatDistance property");var g=(0,s.Z)(e,a);if(isNaN(g))throw new RangeError("Invalid time value");var x,h,b=(y=n,function(e,a){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in a=a||{})Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);return e}({},y));var y;b.addSuffix=Boolean(n.addSuffix),b.comparison=g,g>0?(x=(0,c.Z)(a),h=(0,c.Z)(e)):(x=(0,c.Z)(e),h=(0,c.Z)(a));var v,j=(0,r.Z)(h,x),D=((0,o.Z)(h)-(0,o.Z)(x))/1e3,_=Math.round((j-D)/60);if(_<2)return n.includeSeconds?j<5?u.formatDistance("lessThanXSeconds",5,b):j<10?u.formatDistance("lessThanXSeconds",10,b):j<20?u.formatDistance("lessThanXSeconds",20,b):j<40?u.formatDistance("halfAMinute",null,b):j<60?u.formatDistance("lessThanXMinutes",1,b):u.formatDistance("xMinutes",1,b):0===_?u.formatDistance("lessThanXMinutes",1,b):u.formatDistance("xMinutes",_,b);if(_<45)return u.formatDistance("xMinutes",_,b);if(_<90)return u.formatDistance("aboutXHours",1,b);if(_<l){var w=Math.round(_/60);return u.formatDistance("aboutXHours",w,b)}if(_<p)return u.formatDistance("xDays",1,b);if(_<f){var N=Math.round(_/l);return u.formatDistance("xDays",N,b)}if(_<m)return v=Math.round(_/f),u.formatDistance("aboutXMonths",v,b);if((v=(0,t.Z)(h,x))<12){var z=Math.round(_/f);return u.formatDistance("xMonths",z,b)}var S=v%12,I=Math.floor(v/12);return S<3?u.formatDistance("aboutXYears",I,b):S<9?u.formatDistance("overXYears",I,b):u.formatDistance("almostXYears",I+1,b)})});var s=n("./.yarn/cache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/compareAsc/index.js"),t=n("./.yarn/cache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/differenceInMonths/index.js"),r=n("./.yarn/cache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/differenceInSeconds/index.js"),i=n("./.yarn/cache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/locale/en-US/index.js"),c=n("./.yarn/cache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/toDate/index.js");var o=n("./.yarn/cache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js"),d=n("./.yarn/cache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/_lib/requiredArgs/index.js"),l=1440,p=2520,f=43200,m=86400}}]);