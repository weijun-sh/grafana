"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7040],{"./public/app/features/inspector/InspectDataTab.tsx":(e,t,a)=>{a.d(t,{E:()=>w});var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/0/cache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./.yarn/cache/file-saver-npm-2.0.5-2c3bc40d53-c62d96e5ce.zip/node_modules/file-saver/dist/FileSaver.min.js"),n=a("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),i=a("./.yarn/__virtual__/react-virtualized-auto-sizer-virtual-b5ab366cb0/0/cache/react-virtualized-auto-sizer-npm-1.0.6-50869b8392-81270e9d32.zip/node_modules/react-virtualized-auto-sizer/dist/index.esm.js"),o=a("./packages/grafana-data/src/index.ts"),l=a("./packages/grafana-e2e-selectors/src/index.ts"),d=a("./packages/grafana-ui/src/index.ts"),c=a("./public/app/core/config.ts"),p=a("./public/app/core/logs_model.ts"),u=a("./public/app/plugins/datasource/jaeger/responseTransform.ts"),m=a("./public/app/plugins/datasource/tempo/resultTransformer.ts"),h=a("./public/app/plugins/datasource/zipkin/utils/transforms.ts"),g=a("./public/app/core/components/QueryOperationRow/QueryOperationRow.tsx"),f=a("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const v=e=>s.css`
  margin: 0;
  margin-left: ${e.spacing.md};
  font-size: ${e.typography.size.sm};
  color: ${e.colors.textWeak};
`,y=e=>{let{children:t}=e;const a=(0,d.useStyles)(v);return(0,f.jsx)("p",{className:a,children:t})};var x=a("./public/app/features/inspector/styles.ts");const b=e=>{var t;let{options:a,onOptionsChange:s,panel:r,data:n,dataFrames:i,transformId:l,transformationOptions:c,selectedDataFrame:p,onDataFrameChange:u,downloadForExcel:m,toggleDownloadForExcel:h}=e;const v=(0,x.S)(),b=null==r?void 0:r.getTransformations(),j=Boolean(null==b?void 0:b.length)&&"join by time"!==l,D=r&&!(null!==(t=r.plugin)&&void 0!==t&&t.fieldConfigRegistry.isEmpty());let T=i;p===o.DataTransformerID.seriesToColumns&&(T=n);const w=[...c,...T.map(((e,t)=>({value:t,label:`${(0,o.getFrameDisplayName)(e)} (${t})`})))];return(0,f.jsx)("div",{className:v.dataDisplayOptions,children:(0,f.jsx)(g.t,{id:"Data options",index:0,title:"Data options",headerElement:(0,f.jsx)(y,{children:function(){if(!n)return"";const e=[];return p===o.DataTransformerID.seriesToColumns?e.push("Series joined by time"):n.length>1&&e.push((0,o.getFrameDisplayName)(n[p])),(a.withTransforms||a.withFieldConfig)&&(a.withTransforms&&e.push("Panel transforms"),a.withTransforms&&a.withFieldConfig,a.withFieldConfig&&e.push("Formatted data")),m&&e.push("Excel header"),e.join(", ")}()}),isOpen:!1,children:(0,f.jsx)("div",{className:v.options,"data-testid":"dataOptions",children:(0,f.jsxs)(d.VerticalGroup,{spacing:"none",children:[n.length>1&&(0,f.jsx)(d.Field,{label:"Show data frame",children:(0,f.jsx)(d.Select,{options:w,value:p,onChange:u,width:30,"aria-label":"Select dataframe"})}),(0,f.jsxs)(d.HorizontalGroup,{children:[j&&s&&(0,f.jsx)(d.Field,{label:"Apply panel transformations",description:"Table data is displayed with transformations defined in the panel Transform tab.",children:(0,f.jsx)(d.Switch,{value:!!a.withTransforms,onChange:()=>s(Object.assign({},a,{withTransforms:!a.withTransforms}))})}),D&&s&&(0,f.jsx)(d.Field,{label:"Formatted data",description:"Table data is formatted with options defined in the Field and Override tabs.",children:(0,f.jsx)(d.Switch,{id:"formatted-data-toggle",value:!!a.withFieldConfig,onChange:()=>s(Object.assign({},a,{withFieldConfig:!a.withFieldConfig}))})}),(0,f.jsx)(d.Field,{label:"Download for Excel",description:"Adds header to CSV for use with Excel",children:(0,f.jsx)(d.Switch,{id:"excel-toggle",value:m,onChange:h})})]})]})})})})};var j,D;function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class w extends n.PureComponent{constructor(e){var t,a;super(e),t=this,T(this,"exportCsv",(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{panel:s}=t.props,{transformId:n}=t.state,i=(0,o.toCSV)([e],a),l=new Blob([String.fromCharCode(65279),i],{type:"text/csv;charset=utf-8"}),d=s?s.getDisplayTitle():"Explore",c=n!==o.DataTransformerID.noop?"-as-"+n.toLocaleLowerCase():"",p=`${d}-data${c}-${(0,o.dateTimeFormat)(new Date)}.csv`;(0,r.saveAs)(l,p)})),T(this,"exportLogsAsTxt",(()=>{var e;const{data:t,panel:a}=this.props,s=(0,p.aB)(t||[],void 0);let n="";null===(e=s.meta)||void 0===e||e.forEach((e=>{const t=`${e.label}: ${JSON.stringify(e.value)}\n`;n+=t})),n+="\n\n",s.rows.forEach((e=>{const t=(0,o.dateTimeFormatISO)(e.timeEpochMs)+"\t"+e.entry+"\n";n+=t}));const i=new Blob([n],{type:"text/plain;charset=utf-8"}),l=`${a?a.getDisplayTitle():"Explore"}-logs-${(0,o.dateTimeFormat)(new Date)}.txt`;(0,r.saveAs)(i,l)})),T(this,"exportTracesAsJson",(()=>{var e,t;const{data:a,panel:s}=this.props;if(a)for(const n of a){var r;if("trace"===(null===(r=n.meta)||void 0===r?void 0:r.preferredVisualisationType))switch(null===(e=n.meta)||void 0===e||null===(t=e.custom)||void 0===t?void 0:t.traceFormat){case"jaeger":{let e=(0,u.c6)(new o.MutableDataFrame(n));this.saveTraceJson(e,s);break}case"zipkin":{let e=(0,h.H)(new o.MutableDataFrame(n));this.saveTraceJson(e,s);break}default:{let e=(0,m.g9)(new o.MutableDataFrame(n));this.saveTraceJson(e,s);break}}}})),T(this,"saveTraceJson",((e,t)=>{const a=new Blob([JSON.stringify(e)],{type:"application/json"}),s=`${t?t.getDisplayTitle():"Explore"}-traces-${(0,o.dateTimeFormat)(new Date)}.json`;(0,r.saveAs)(a,s)})),T(this,"onDataFrameChange",(e=>{this.setState({transformId:e.value===o.DataTransformerID.seriesToColumns?o.DataTransformerID.seriesToColumns:o.DataTransformerID.noop,dataFrameIndex:"number"==typeof e.value?e.value:0,selectedDataFrame:e.value})})),T(this,"toggleDownloadForExcel",(()=>{this.setState((e=>({downloadForExcel:!e.downloadForExcel})))})),this.state={selectedDataFrame:0,dataFrameIndex:0,transformId:o.DataTransformerID.noop,transformationOptions:F(),transformedData:null!==(a=e.data)&&void 0!==a?a:[],downloadForExcel:!1}}componentDidUpdate(e,t){if(this.props.data)if(this.props.options.withTransforms)this.setState({transformedData:this.props.data});else if(e.data===this.props.data&&t.transformId===this.state.transformId);else{const e=this.state.transformationOptions.find((e=>e.value===this.state.transformId));if(e&&e.transformer.id!==o.DataTransformerID.noop){const t=this.state.selectedDataFrame,a=this.state.dataFrameIndex,s=(0,o.transformDataFrame)([e.transformer],this.props.data).subscribe((e=>{this.setState({transformedData:e,selectedDataFrame:t,dataFrameIndex:a},(()=>s.unsubscribe()))}));return}this.setState({transformedData:this.props.data})}else this.setState({transformedData:[]})}getProcessedData(){const{options:e,panel:t,timeZone:a}=this.props,s=this.state.transformedData;return e.withFieldConfig&&t?(0,o.applyFieldOverrides)({data:s,theme:c.vc.theme2,fieldConfig:t.fieldConfig,timeZone:a,replaceVariables:e=>e}):(0,o.applyRawFieldOverrides)(s)}render(){const{isLoading:e,options:t,data:a,panel:r,onOptionsChange:n}=this.props,{dataFrameIndex:o,transformId:c,transformationOptions:p,selectedDataFrame:u,downloadForExcel:m}=this.state,h=(0,x.S)();if(e)return j||(j=(0,f.jsxs)("div",{children:[(0,f.jsx)(d.Spinner,{inline:!0})," Loading"]}));const g=this.getProcessedData();if(!g||!g.length)return D||(D=(0,f.jsx)("div",{children:"No Data"}));const v=g[o]?o:0,y=g[v],T=g.some((e=>{var t;return"logs"===(null==e||null===(t=e.meta)||void 0===t?void 0:t.preferredVisualisationType)})),w=g.some((e=>{var t;return"trace"===(null==e||null===(t=e.meta)||void 0===t?void 0:t.preferredVisualisationType)}));return(0,f.jsxs)("div",{className:h.wrap,"aria-label":l.wl.components.PanelInspector.Data.content,children:[(0,f.jsxs)("div",{className:h.toolbar,children:[(0,f.jsx)(b,{data:a,panel:r,options:t,dataFrames:g,transformId:c,transformationOptions:p,selectedDataFrame:u,downloadForExcel:m,onOptionsChange:n,onDataFrameChange:this.onDataFrameChange,toggleDownloadForExcel:this.toggleDownloadForExcel}),(0,f.jsx)(d.Button,{variant:"primary",onClick:()=>this.exportCsv(g[o],{useExcelHeader:this.state.downloadForExcel}),className:s.css`
              margin-bottom: 10px;
            `,children:"Download CSV"}),T&&(0,f.jsx)(d.Button,{variant:"primary",onClick:this.exportLogsAsTxt,className:s.css`
                margin-bottom: 10px;
                margin-left: 10px;
              `,children:"Download logs"}),w&&(0,f.jsx)(d.Button,{variant:"primary",onClick:this.exportTracesAsJson,className:s.css`
                margin-bottom: 10px;
                margin-left: 10px;
              `,children:"Download traces"})]}),(0,f.jsx)("div",{className:h.content,children:(0,f.jsx)(i.Z,{children:e=>{let{width:t,height:a}=e;return 0===t?null:(0,f.jsx)("div",{style:{width:t,height:a},children:(0,f.jsx)(d.Table,{width:t,height:a,data:y,showTypeIcons:!0})})}})})]})}}function F(){return[{value:o.DataTransformerID.seriesToColumns,label:"Series joined by time",transformer:{id:o.DataTransformerID.seriesToColumns,options:{byField:"Time"}}}]}},"./public/app/features/inspector/InspectErrorTab.tsx":(e,t,a)=>{a.d(t,{l:()=>l});a("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s,r,n,i=a("./packages/grafana-ui/src/index.ts"),o=a("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=e=>{let{error:t}=e;if(!t)return null;if(t.data)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h4",{children:t.data.message}),(0,o.jsx)(i.JSONFormatter,{json:t,open:2})]});if(t.message){const{msg:e,json:a}=(e=>{try{const[t,a]=e.split(/(\{.+)/);return{msg:t,json:JSON.parse(a)}}catch{return{msg:e}}})(t.message);return a?(0,o.jsxs)(o.Fragment,{children:[""!==e&&(r||(r=(0,o.jsx)("h3",{children:e}))),n||(n=(0,o.jsx)(i.JSONFormatter,{json:a,open:5}))]}):s||(s=(0,o.jsx)("div",{children:e}))}return(0,o.jsx)(i.JSONFormatter,{json:t,open:2})}},"./public/app/features/inspector/InspectJSONTab.tsx":(e,t,a)=>{a.d(t,{W:()=>h});var s,r=a("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/react-virtualized-auto-sizer-virtual-b5ab366cb0/0/cache/react-virtualized-auto-sizer-npm-1.0.6-50869b8392-81270e9d32.zip/node_modules/react-virtualized-auto-sizer/dist/index.esm.js"),i=a("./packages/grafana-data/src/index.ts"),o=a("./packages/grafana-e2e-selectors/src/index.ts"),l=a("./packages/grafana-ui/src/index.ts"),d=a("./public/app/core/core.ts"),c=a("./public/app/features/inspector/styles.ts"),p=a("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e){e.PanelJSON="panel",e.PanelData="data",e.DataFrames="frames"}(s||(s={}));const m=[{label:"Panel JSON",description:"The model saved in the dashboard JSON that configures how everything works.",value:s.PanelJSON},{label:"Panel data",description:"The raw model passed to the panel visualization",value:s.PanelData},{label:"DataFrame JSON",description:"JSON formatted DataFrames",value:s.DataFrames}];class h extends r.PureComponent{constructor(e){super(e),u(this,"hasPanelJSON",void 0),u(this,"onSelectChanged",(e=>{const t=g(this.getJSONObject(e.value));this.setState({text:t,show:e.value})})),u(this,"onTextChanged",(e=>{this.setState({text:e})})),u(this,"onApplyPanelModel",(()=>{const{panel:e,dashboard:t,onClose:a}=this.props;if(this.hasPanelJSON){try{if(t.meta.canEdit){const a=JSON.parse(this.state.text);t.shouldUpdateDashboardPanelFromJSON(a,e),e.restoreModel(a),e.refresh(),d.h$.emit(i.AppEvents.alertSuccess,["Panel model updated"])}else d.h$.emit(i.AppEvents.alertError,["Unable to apply"])}catch(e){d.h$.emit(i.AppEvents.alertError,["Invalid JSON text"])}a()}})),this.hasPanelJSON=!(!e.panel||!e.dashboard),this.state={show:this.hasPanelJSON?s.PanelJSON:s.DataFrames,text:this.hasPanelJSON?g(e.panel.getSaveModel()):g(e.data)}}getJSONObject(e){const{data:t,panel:a}=this.props;if(e===s.PanelData)return t;if(e===s.DataFrames){return(null==t?void 0:t.series)?t.series.map((e=>(0,i.dataFrameToJSON)(e))):{note:"Missing Response Data"}}return this.hasPanelJSON&&e===s.PanelJSON?a.getSaveModel():{note:`Unknown Object: ${e}`}}render(){const{dashboard:e}=this.props,{show:t,text:a}=this.state,r=this.hasPanelJSON?m:m.slice(1,m.length),i=m.find((e=>e.value===t)),d=t===s.PanelJSON,u=e&&e.meta.canEdit,h=(0,c.S)();return(0,p.jsxs)("div",{className:h.wrap,children:[(0,p.jsxs)("div",{className:h.toolbar,"aria-label":o.wl.components.PanelInspector.Json.content,children:[(0,p.jsx)(l.Field,{label:"Select source",className:"flex-grow-1",children:(0,p.jsx)(l.Select,{inputId:"select-source-dropdown",options:r,value:i,onChange:this.onSelectChanged})}),this.hasPanelJSON&&d&&u&&(0,p.jsx)(l.Button,{className:h.toolbarItem,onClick:this.onApplyPanelModel,children:"Apply"})]}),(0,p.jsx)("div",{className:h.content,children:(0,p.jsx)(n.Z,{disableWidth:!0,children:e=>{let{height:t}=e;return(0,p.jsx)(l.CodeEditor,{width:"100%",height:t,language:"json",showLineNumbers:!0,showMiniMap:(a&&a.length)>100,value:a||"",readOnly:!d,onBlur:this.onTextChanged})}})})]})}}function g(e){return JSON.stringify(e,null,2)}},"./public/app/features/inspector/InspectStatsTab.tsx":(e,t,a)=>{a.d(t,{f:()=>p});a("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-e2e-selectors/src/index.ts"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/0/cache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-data/src/index.ts"),i=a("./packages/grafana-ui/src/index.ts"),o=a("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=e=>{let{timeZone:t,name:a,stats:s}=e;const r=(0,i.useTheme2)(),n=c(r);return s&&s.length?(0,o.jsxs)("div",{className:n.wrapper,children:[(0,o.jsx)("div",{className:"section-heading",children:a}),(0,o.jsx)("table",{className:"filter-table width-30",children:(0,o.jsx)("tbody",{children:s.map(((e,a)=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:e.displayName}),(0,o.jsx)("td",{className:n.cell,children:d(e,t,r)})]},`${e.displayName}-${a}`)))})})]}):null};function d(e,t,a){const s=(0,n.getDisplayProcessor)({field:{type:n.FieldType.number,config:e},theme:a,timeZone:t});return(0,n.formattedValueToString)(s(e.value))}const c=(0,i.stylesFactory)((e=>({wrapper:r.css`
      padding-bottom: ${e.spacing(2)};
    `,cell:r.css`
      text-align: right;
    `}))),p=e=>{var t;let{data:a,timeZone:r}=e;if(!a.request)return null;let n=[];const i=a.request.endTime?a.request.endTime-a.request.startTime:-1,d=(null===(t=a.timings)||void 0===t?void 0:t.dataProcessingTime)||-1;let c=0;for(const e of a.series)c+=e.length;i>0&&n.push({displayName:"Total request time",value:i,unit:"ms"}),d>0&&n.push({displayName:"Data processing time",value:d,unit:"ms"}),n.push({displayName:"Number of queries",value:a.request.targets.length}),n.push({displayName:"Total number rows",value:c});let p=[];for(const e of a.series)e.meta&&e.meta.stats&&(p=p.concat(e.meta.stats));return(0,o.jsxs)("div",{"aria-label":s.wl.components.PanelInspector.Stats.content,children:[(0,o.jsx)(l,{timeZone:r,name:"Stats",stats:n}),(0,o.jsx)(l,{timeZone:r,name:"Data source stats",stats:p})]})}},"./public/app/features/inspector/QueryInspector.tsx":(e,t,a)=>{a.d(t,{D:()=>D});var s,r,n,i,o,l=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/0/cache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),d=a("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),c=a("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/Subscription.js"),p=a("./packages/grafana-data/src/index.ts"),u=a("./packages/grafana-e2e-selectors/src/index.ts"),m=a("./.yarn/__virtual__/@grafana-experimental-virtual-22e4fdfd25/0/cache/@grafana-experimental-npm-0.0.2-canary.30-71a280d204-b5b453b937.zip/node_modules/@grafana/experimental/index.js"),h=a("./packages/grafana-runtime/src/index.ts"),g=a("./packages/grafana-ui/src/index.ts"),f=a("./public/app/core/app_events.ts"),v=a("./public/app/core/services/backend_srv.ts"),y=a("./public/app/features/dashboard/components/PanelEditor/utils.ts"),x=a("./public/app/features/inspector/styles.ts"),b=a("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class D extends d.PureComponent{constructor(e){super(e),j(this,"formattedJson",void 0),j(this,"subs",new c.w0),j(this,"onPanelRefresh",(()=>{this.setState((e=>Object.assign({},e,{dsQuery:{isLoading:!0,response:{}}})))})),j(this,"setFormattedJson",(e=>{this.formattedJson=e})),j(this,"getTextForClipboard",(()=>JSON.stringify(this.formattedJson,null,2))),j(this,"onClipboardSuccess",(()=>{f.Z.emit(p.AppEvents.alertSuccess,["Content copied to clipboard"])})),j(this,"onToggleExpand",(()=>{this.setState((e=>Object.assign({},e,{allNodesExpanded:!this.state.allNodesExpanded})))})),j(this,"onToggleMocking",(()=>{this.setState((e=>Object.assign({},e,{isMocking:!this.state.isMocking})))})),j(this,"getNrOfOpenNodes",(()=>null===this.state.allNodesExpanded?3:this.state.allNodesExpanded?20:1)),j(this,"setMockedResponse",(e=>{const t=e.target.value;this.setState((e=>Object.assign({},e,{mockedResponse:t})))})),this.state={executedQueries:[],allNodesExpanded:null,isMocking:!1,mockedResponse:"",dsQuery:{isLoading:!1,response:{}}}}componentDidMount(){const{panel:e}=this.props;this.subs.add(v.ae.getInspectorStream().subscribe({next:e=>this.onDataSourceResponse(e)})),e&&(this.subs.add(e.events.subscribe(h.RefreshEvent,this.onPanelRefresh)),this.updateQueryList())}componentDidUpdate(e){this.props.data!==e.data&&this.updateQueryList()}updateQueryList(){const{data:e}=this.props,t=[];if(null!=e&&e.length){let a;e.forEach(((e,s)=>{var r;const n=null===(r=e.meta)||void 0===r?void 0:r.executedQueryString;if(n){var i;const s=e.refId||"?";(null===(i=a)||void 0===i?void 0:i.refId)===s?(a.frames++,a.rows+=e.length):(a={refId:s,frames:0,rows:e.length,query:n},t.push(a))}}))}this.setState({executedQueries:t})}componentWillUnmount(){this.subs.unsubscribe()}onDataSourceResponse(e){var t;null!==(t=e.config)&&void 0!==t&&t.hideFromInspector||((e=Object.assign({},e)).headers&&delete e.headers,e.config&&(e.request=e.config,delete e.config,delete e.request.transformRequest,delete e.request.transformResponse,delete e.request.paramSerializer,delete e.request.jsonpCallbackParam,delete e.request.headers,delete e.request.requestId,delete e.request.inspect,delete e.request.retry,delete e.request.timeout),e.data&&(e.response=e.data,delete e.config,delete e.data,delete e.status,delete e.statusText,delete e.ok,delete e.url,delete e.redirected,delete e.type,delete e.$$config),this.setState((t=>Object.assign({},t,{dsQuery:{isLoading:!1,response:e}}))))}renderExecutedQueries(e){if(!e.length)return null;const t={refId:l.css`
        font-weight: ${h.config.theme.typography.weight.semibold};
        color: ${h.config.theme.colors.textBlue};
        margin-right: 8px;
      `};return(0,b.jsx)("div",{children:e.map((e=>(0,b.jsxs)(m.Stack,{gap:1,direction:"column",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:t.refId,children:[e.refId,":"]}),e.frames>1&&(0,b.jsxs)("span",{children:[e.frames," frames, "]}),(0,b.jsxs)("span",{children:[e.rows," rows"]})]}),(0,b.jsx)("pre",{children:e.query})]},e.refId)))})}render(){const{allNodesExpanded:e,executedQueries:t}=this.state,{panel:a,onRefreshQuery:l}=this.props,{response:d,isLoading:c}=this.state.dsQuery,p=this.getNrOfOpenNodes(),m=(0,x.S)(),h=Object.keys(d).length>0;return a&&!(0,y.sY)(a.plugin)?null:(0,b.jsxs)("div",{className:m.wrap,children:[(0,b.jsxs)("div",{"aria-label":u.wl.components.PanelInspector.Query.content,children:[s||(s=(0,b.jsx)("h3",{className:"section-heading",children:"Query inspector"})),r||(r=(0,b.jsx)("p",{className:"small muted",children:"Query inspector allows you to view raw request and response. To collect this data Grafana needs to issue a new query. Click refresh button below to trigger a new query."}))]}),this.renderExecutedQueries(t),(0,b.jsxs)("div",{className:m.toolbar,children:[(0,b.jsx)(g.Button,{icon:"sync",onClick:l,"aria-label":u.wl.components.PanelInspector.Query.refreshButton,children:"Refresh"}),h&&e&&(0,b.jsx)(g.Button,{icon:"minus",variant:"secondary",className:m.toolbarItem,onClick:this.onToggleExpand,children:"Collapse all"}),h&&!e&&(0,b.jsx)(g.Button,{icon:"plus",variant:"secondary",className:m.toolbarItem,onClick:this.onToggleExpand,children:"Expand all"}),h&&(0,b.jsx)(g.ClipboardButton,{getText:this.getTextForClipboard,onClipboardCopy:this.onClipboardSuccess,className:m.toolbarItem,icon:"copy",variant:"secondary",children:"Copy to clipboard"}),n||(n=(0,b.jsx)("div",{className:"flex-grow-1"}))]}),(0,b.jsxs)("div",{className:m.content,children:[c&&(i||(i=(0,b.jsx)(g.LoadingPlaceholder,{text:"Loading query inspector..."}))),!c&&h&&(0,b.jsx)(g.JSONFormatter,{json:d,open:p,onDidRender:this.setFormattedJson}),!c&&!h&&(o||(o=(0,b.jsx)("p",{className:"muted",children:"No request and response collected yet. Hit refresh button"})))]})]})}}},"./public/app/features/inspector/styles.ts":(e,t,a)=>{a.d(t,{S:()=>i});var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/0/cache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-ui/src/index.ts"),n=a("./public/app/core/config.ts");const i=(0,r.stylesFactory)((()=>({wrap:s.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      width: 100%;
      flex: 1 1 0;
    `,toolbar:s.css`
      display: flex;
      width: 100%;
      flex-grow: 0;
      align-items: center;
      justify-content: flex-end;
      margin-bottom: ${n.vc.theme.spacing.sm};
    `,toolbarItem:s.css`
      margin-left: ${n.vc.theme.spacing.md};
    `,content:s.css`
      flex-grow: 1;
      height: 100%;
      overflow: scroll;
    `,editor:s.css`
      font-family: monospace;
      height: 100%;
      flex-grow: 1;
    `,viewer:s.css`
      overflow: scroll;
    `,dataFrameSelect:s.css`
      flex-grow: 2;
    `,leftActions:s.css`
      display: flex;
      flex-grow: 1;

      max-width: 85%;
      @media (max-width: 1345px) {
        max-width: 75%;
      }
    `,options:s.css`
      padding-top: ${n.vc.theme.spacing.sm};
    `,dataDisplayOptions:s.css`
      flex-grow: 1;
      min-width: 300px;
      margin-right: ${n.vc.theme.spacing.sm};
    `,selects:s.css`
      display: flex;
      > * {
        margin-right: ${n.vc.theme.spacing.sm};
      }
    `})))},"./public/app/features/query/components/QueryEditorRows.tsx":(e,t,a)=>{a.d(t,{l:()=>d});var s=a("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./.yarn/__virtual__/react-beautiful-dnd-virtual-27e4b658e7/0/cache/react-beautiful-dnd-npm-13.1.0-fcf5568b1c-12b7e9fbe8.zip/node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js"),n=a("./packages/grafana-runtime/src/index.ts"),i=a("./public/app/features/query/components/QueryEditorRow.tsx"),o=a("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends s.PureComponent{constructor(){super(...arguments),l(this,"onRemoveQuery",(e=>{this.props.onQueriesChange(this.props.queries.filter((t=>t!==e)))})),l(this,"onDragStart",(e=>{const{queries:t,dsSettings:a}=this.props;(0,n.reportInteraction)("query_row_reorder_started",{startIndex:e.source.index,numberOfQueries:t.length,datasourceType:a.type})})),l(this,"onDragEnd",(e=>{const{queries:t,onQueriesChange:a,dsSettings:s}=this.props;if(!e||!e.destination)return;const r=e.source.index,i=e.destination.index;if(r===i)return void(0,n.reportInteraction)("query_row_reorder_canceled",{startIndex:r,endIndex:i,numberOfQueries:t.length,datasourceType:s.type});const o=Array.from(t),[l]=o.splice(r,1);o.splice(i,0,l),a(o),(0,n.reportInteraction)("query_row_reorder_ended",{startIndex:r,endIndex:i,numberOfQueries:t.length,datasourceType:s.type})}))}onChangeQuery(e,t){const{queries:a,onQueriesChange:s}=this.props;s(a.map(((a,s)=>s===t?e:a)))}onDataSourceChange(e,t){const{queries:a,onQueriesChange:s}=this.props;s(a.map(((a,s)=>{if(s!==t)return a;const r={type:e.type,uid:e.uid};if(a.datasource){const t=(0,n.getDataSourceSrv)().getInstanceSettings(a.datasource);if((null==t?void 0:t.type)===e.type)return Object.assign({},a,{datasource:r})}return{refId:a.refId,hide:a.hide,datasource:r}})))}render(){const{dsSettings:e,data:t,queries:a,app:s,history:n,eventBus:l}=this.props;return(0,o.jsx)(r.Z5,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,children:(0,o.jsx)(r.bK,{droppableId:"transformations-list",direction:"vertical",children:r=>(0,o.jsxs)("div",Object.assign({ref:r.innerRef},r.droppableProps,{children:[a.map(((r,d)=>{const p=c(r,e),u=e.meta.mixed?e=>this.onDataSourceChange(e,d):void 0;return(0,o.jsx)(i.x,{id:r.refId,index:d,data:t,query:r,dataSource:p,onChangeDataSource:u,onChange:e=>this.onChangeQuery(e,d),onRemoveQuery:this.onRemoveQuery,onAddQuery:this.props.onAddQuery,onRunQuery:this.props.onRunQueries,queries:a,app:s,history:n,eventBus:l},r.refId)})),r.placeholder]}))})})}}const c=(e,t)=>{if(!e.datasource)return t;return(0,n.getDataSourceSrv)().getInstanceSettings(e.datasource)||t}},"./public/app/plugins/datasource/jaeger/responseTransform.ts":(e,t,a)=>{a.d(t,{Wp:()=>i,c6:()=>l,xM:()=>n});var s=a("./packages/grafana-data/src/index.ts"),r=a("./packages/jaeger-ui-components/src/index.ts");function n(e){const t=e.spans.map((t=>{return a=t,s=e.processes,{spanID:a.spanID,traceID:a.traceID,parentSpanID:null===(r=a.references)||void 0===r||null===(n=r.find((e=>"CHILD_OF"===e.refType)))||void 0===n?void 0:n.spanID,operationName:a.operationName,startTime:a.startTime/1e3,duration:a.duration/1e3,logs:a.logs.map((e=>Object.assign({},e,{timestamp:e.timestamp/1e3}))),tags:a.tags,warnings:null!==(i=a.warnings)&&void 0!==i?i:void 0,stackTraces:a.stackTraces,serviceName:s[a.processID].serviceName,serviceTags:s[a.processID].tags};var a,s,r,n,i})),a=new s.MutableDataFrame({fields:[{name:"traceID",type:s.FieldType.string},{name:"spanID",type:s.FieldType.string},{name:"parentSpanID",type:s.FieldType.string},{name:"operationName",type:s.FieldType.string},{name:"serviceName",type:s.FieldType.string},{name:"serviceTags",type:s.FieldType.other},{name:"startTime",type:s.FieldType.number},{name:"duration",type:s.FieldType.number},{name:"logs",type:s.FieldType.other},{name:"tags",type:s.FieldType.other},{name:"warnings",type:s.FieldType.other},{name:"stackTraces",type:s.FieldType.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"jaeger"}}});for(const e of t)a.add(e);return a}function i(e,t){const a=new s.MutableDataFrame({fields:[{name:"traceID",type:s.FieldType.string,config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:t.uid,datasourceName:t.name,query:{query:"${__value.raw}"}}}]}},{name:"traceName",type:s.FieldType.string,config:{displayNameFromDS:"Trace name"}},{name:"startTime",type:s.FieldType.time,config:{displayNameFromDS:"Start time"}},{name:"duration",type:s.FieldType.number,config:{displayNameFromDS:"Duration",unit:"µs"}}],meta:{preferredVisualisationType:"table"}}),r=e.map(o).sort(((e,t)=>(null==t?void 0:t.startTime)-(null==e?void 0:e.startTime)));for(const e of r)a.add(e);return a}function o(e){const t=(0,r.R1)(e);if(t)return{traceID:t.traceID,startTime:t.startTime/1e3,duration:t.duration,traceName:t.traceName}}function l(e){let t={traceID:"",spans:[],processes:{},warnings:null},a=[];for(let s=0;s<e.length;s++){const r=e.get(s);t.traceID||(t.traceID=r.traceID),a.find((e=>e===r.serviceName))||(a.push(r.serviceName),t.processes[`p${a.length}`]={serviceName:r.serviceName,tags:r.serviceTags}),t.spans.push({traceID:r.traceID,spanID:r.spanID,duration:1e3*r.duration,references:r.parentSpanID?[{refType:"CHILD_OF",spanID:r.parentSpanID,traceID:r.traceID}]:[],flags:0,logs:r.logs.map((e=>Object.assign({},e,{timestamp:1e3*e.timestamp}))),operationName:r.operationName,processID:Object.keys(t.processes).find((e=>t.processes[e].serviceName===r.serviceName))||"",startTime:1e3*r.startTime,tags:r.tags,warnings:r.warnings?r.warnings:null})}return{data:[t],total:0,limit:0,offset:0,errors:null}}},"./public/app/plugins/datasource/zipkin/utils/transforms.ts":(e,t,a)=>{a.d(t,{H:()=>c,m:()=>n});var s=a("./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),r=a("./packages/grafana-data/src/index.ts");function n(e){const t=e.map(i),a=new r.MutableDataFrame({fields:[{name:"traceID",type:r.FieldType.string},{name:"spanID",type:r.FieldType.string},{name:"parentSpanID",type:r.FieldType.string},{name:"operationName",type:r.FieldType.string},{name:"serviceName",type:r.FieldType.string},{name:"serviceTags",type:r.FieldType.other},{name:"startTime",type:r.FieldType.number},{name:"duration",type:r.FieldType.number},{name:"logs",type:r.FieldType.other},{name:"tags",type:r.FieldType.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"zipkin"}}});for(const e of t)a.add(e);return a}function i(e){var t,a,s,r;const n={traceID:e.traceId,spanID:e.id,parentSpanID:e.parentId,operationName:e.name,serviceName:(null===(t=e.localEndpoint)||void 0===t?void 0:t.serviceName)||(null===(a=e.remoteEndpoint)||void 0===a?void 0:a.serviceName)||"unknown",serviceTags:l(e),startTime:e.timestamp/1e3,duration:e.duration/1e3,logs:null!==(s=null===(r=e.annotations)||void 0===r?void 0:r.map(o))&&void 0!==s?s:[],tags:Object.keys(e.tags||{}).reduce(((t,a)=>"error"===a?(t.push({key:"error",value:!0}),t.push({key:"errorValue",value:e.tags.error}),t):(t.push({key:a,value:e.tags[a]}),t)),[])};var i,d;e.kind&&(n.tags=[{key:"kind",value:e.kind},...null!==(i=n.tags)&&void 0!==i?i:[]]);e.shared&&(n.tags=[{key:"shared",value:e.shared},...null!==(d=n.tags)&&void 0!==d?d:[]]);return n}function o(e){return{timestamp:e.timestamp,fields:[{key:"annotation",value:e.value}]}}function l(e){const t=e.localEndpoint||e.remoteEndpoint;return t?[d("ipv4",t.ipv4),d("ipv6",t.ipv6),d("port",t.port),d("endpointType",e.localEndpoint?"local":"remote")].filter(s.identity):[]}function d(e,t){if(t)return{key:e,value:t}}const c=e=>{let t=[];for(let r=0;r<e.length;r++){var a,s;const n=e.get(r);t.push(Object.assign({traceId:n.traceID,parentId:n.parentSpanID,name:n.operationName,id:n.spanID,timestamp:1e3*n.startTime,duration:1e3*n.duration},p(n),{annotations:n.logs.length?n.logs.map((e=>({timestamp:e.timestamp,value:e.fields[0].value}))):void 0,tags:n.tags.length?n.tags.filter((e=>"kind"!==e.key&&"endpointType"!==e.key&&"shared"!==e.key)).reduce(((e,t)=>"error"===t.key?Object.assign({},e,{[t.key]:n.tags.find((e=>"errorValue"===e.key)).value||""}):Object.assign({},e,{[t.key]:t.value})),{}):void 0,kind:null===(a=n.tags.find((e=>"kind"===e.key)))||void 0===a?void 0:a.value,shared:null===(s=n.tags.find((e=>"shared"===e.key)))||void 0===s?void 0:s.value}))}return t},p=e=>{var t,a,s,r;const n="local"===(null===(t=e.serviceTags.find((e=>"endpointType"===e.key)))||void 0===t?void 0:t.value)?"localEndpoint":"remoteEndpoint";return"unknown"!==e.serviceName?{[n]:{serviceName:e.serviceName,ipv4:null===(a=e.serviceTags.find((e=>"ipv4"===e.key)))||void 0===a?void 0:a.value,ipv6:null===(s=e.serviceTags.find((e=>"ipv6"===e.key)))||void 0===s?void 0:s.value,port:null===(r=e.serviceTags.find((e=>"port"===e.key)))||void 0===r?void 0:r.value}}:void 0}},"./.yarn/__virtual__/react-use-virtual-00326e70ba/0/cache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useToggle.js":(e,t,a)=>{a.d(t,{Z:()=>n});var s=a("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=function(e,t){return"boolean"==typeof t?t:!e};const n=function(e){return(0,s.useReducer)(r,e)}}}]);