"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3330],{"./public/app/core/components/Layers/AddLayerButton.tsx":(t,e,n)=>{n.d(e,{f:()=>o});n("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var r=n("./packages/grafana-ui/src/index.ts"),i=n("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=t=>{let{onChange:e,options:n,label:o}=t;return(0,i.jsx)(r.ValuePicker,{icon:"plus",label:o,variant:"secondary",options:n,onChange:e,isFullWidth:!0})}},"./public/app/core/components/Layers/LayerDragDropList.tsx":(t,e,n)=>{n.d(e,{E:()=>d});var r=n("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/0/cache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=n("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),o=n("./.yarn/__virtual__/react-beautiful-dnd-virtual-27e4b658e7/0/cache/react-beautiful-dnd-npm-13.1.0-fcf5568b1c-12b7e9fbe8.zip/node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js"),a=n("./packages/grafana-runtime/src/index.ts"),s=n("./packages/grafana-ui/src/index.ts"),u=n("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=t=>{let{name:e,onChange:n,verifyLayerNameUniqueness:r}=t;const o=(0,s.useStyles)(c),[a,l]=(0,i.useState)(!1),[d,f]=(0,i.useState)(null),p=t=>{l(!1),d?f(null):e!==t&&n(t)};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:o.wrapper,children:[!a&&(0,u.jsxs)("button",{className:o.layerNameWrapper,title:"Edit layer name",onClick:t=>{l(!0)},"data-testid":"layer-name-div",children:[(0,u.jsx)("span",{className:o.layerName,children:e}),(0,u.jsx)(s.Icon,{name:"pen",className:o.layerEditIcon,size:"sm"})]}),a&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(s.Input,{type:"text",defaultValue:e,onBlur:t=>{p(t.currentTarget.value.trim())},autoFocus:!0,onKeyDown:t=>{"Enter"===t.key&&p(t.target.value)},onFocus:t=>{t.target.select()},invalid:null!==d,onChange:t=>{const n=t.currentTarget.value.trim();0!==n.length?!r||r(n)||n===e?d&&f(null):f("Layer name already exists"):f("An empty layer name is not allowed")},className:o.layerNameInput,"data-testid":"layer-name-input"}),d&&(0,u.jsx)(s.FieldValidationMessage,{horizontal:!0,children:d})]})]})})},c=t=>({wrapper:r.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${t.spacing.xs};
    `,layerNameWrapper:r.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${t.border.radius.md};
      align-items: center;
      padding: 0 0 0 ${t.spacing.xs};
      margin: 0;
      background: transparent;

      &:hover {
        background: ${t.colors.bg3};
        border: 1px dashed ${t.colors.border3};
      }

      &:focus {
        border: 2px solid ${t.colors.formInputBorderActive};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,layerName:r.css`
      font-weight: ${t.typography.weight.semibold};
      color: ${t.colors.textBlue};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${t.spacing.xs};
    `,layerEditIcon:(0,r.cx)(r.css`
        margin-left: ${t.spacing.md};
        visibility: hidden;
      `,"query-name-edit-icon"),layerNameInput:r.css`
      max-width: 300px;
      margin: -4px 0;
    `}),d=t=>{let{layers:e,getLayerInfo:n,onDragEnd:i,onSelect:c,onDelete:d,onDuplicate:p,isFrame:h,selection:v,excludeBaseLayer:g,onNameChange:m,verifyLayerNameUniqueness:b}=t;const y=f(a.config.theme),x=t=>t?`${y.row} ${y.sel}`:y.row;return(0,u.jsx)(o.Z5,{onDragEnd:i,children:(0,u.jsx)(o.bK,{droppableId:"droppable",children:(t,i)=>(0,u.jsxs)("div",Object.assign({},t.droppableProps,{ref:t.innerRef,children:[(()=>{const t=[],i=g?1:0,a=g?2:1;for(let f=e.length-1;f>=i;f--){const i=e[f],g=i.getName(),E=Boolean(null===v||void 0===v?void 0:v.includes(g));t.push((0,u.jsx)(o._l,{draggableId:g,index:t.length,children:(t,o)=>(0,u.jsxs)("div",Object.assign({className:x(E),ref:t.innerRef},t.draggableProps,t.dragHandleProps,{onMouseDown:()=>c(i),children:[(0,u.jsx)(l,{name:g,onChange:t=>m(i,t),verifyLayerNameUniqueness:null!==b&&void 0!==b?b:void 0}),(0,u.jsxs)("div",{className:y.textWrapper,children:["Â  ",n(i)]}),h(i)&&(0,u.jsxs)(u.Fragment,{children:[p?(0,u.jsx)(s.IconButton,{name:"copy",title:"Duplicate",className:y.actionIcon,onClick:()=>p(i),surface:"header"}):null,(0,u.jsx)(s.IconButton,{name:"trash-alt",title:"remove",className:(0,r.cx)(y.actionIcon,y.dragIcon),onClick:()=>d(i),surface:"header"}),e.length>a&&(0,u.jsx)(s.Icon,{title:"Drag and drop to reorder",name:"draggabledots",size:"lg",className:y.dragIcon})]})]}))},g))}return t})(),t.placeholder]}))})})};d.defaultProps={isGroup:()=>!1};const f=(0,s.stylesFactory)(t=>({wrapper:r.css`
    margin-bottom: ${t.spacing.md};
  `,row:r.css`
    padding: ${t.spacing.xs} ${t.spacing.sm};
    border-radius: ${t.border.radius.sm};
    background: ${t.colors.bg2};
    min-height: ${t.spacing.formInputHeight}px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 3px;
    cursor: pointer;

    border: 1px solid ${t.colors.formInputBorder};
    &:hover {
      border: 1px solid ${t.colors.formInputBorderHover};
    }
  `,sel:r.css`
    border: 1px solid ${t.colors.formInputBorderActive};
    &:hover {
      border: 1px solid ${t.colors.formInputBorderActive};
    }
  `,dragIcon:r.css`
    cursor: drag;
  `,actionIcon:r.css`
    color: ${t.colors.textWeak};
    &:hover {
      color: ${t.colors.text};
    }
  `,typeWrapper:r.css`
    color: ${t.colors.textBlue};
    margin-right: 5px;
  `,textWrapper:r.css`
    display: flex;
    align-items: center;
    flex-grow: 1;
    overflow: hidden;
    margin-right: ${t.spacing.sm};
  `}))},"./public/app/features/canvas/runtime/frame.tsx":(t,e,n)=>{n.d(e,{f:()=>p});var r,i=n("./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),o=(n.n(i),n("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n("./public/app/features/canvas/index.ts")),a=n("./public/app/features/canvas/elements/notFound.tsx"),s=n("./public/app/plugins/panel/canvas/types.ts"),u=n("./public/app/features/canvas/types.ts"),l=n("./public/app/features/canvas/runtime/element.tsx"),c=n("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const f={id:"frame",name:"Frame",description:"Frame",getNewOptions:()=>({config:{}}),display:()=>r||(r=(0,c.jsx)("div",{children:"FRAME!"}))};class p extends l.f{constructor(t,e,n){var r;super(f,t,n),r=this,this.options=t,this.parent=n,d(this,"elements",[]),d(this,"scene",void 0),d(this,"doAction",function(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];switch(t){case s.G.Delete:r.elements=r.elements.filter(t=>t!==e),r.scene.byName.delete(e.options.name),r.scene.save(),r.reinitializeMoveable();break;case s.G.Duplicate:if("frame"===e.item.id)return void console.log("Can not duplicate frames (yet)",t,e);const a=(0,i.cloneDeep)(e.options);if(o){const{constraint:t,placement:n}=e.options,{vertical:r,horizontal:i}=null!==t&&void 0!==t?t:{},o=null!==n&&void 0!==n?n:{};switch(r){case u.fJ.Top:case u.fJ.TopBottom:null==o.top?o.top=25:o.top+=10;break;case u.fJ.Bottom:null==o.bottom?o.bottom=100:o.bottom-=10}switch(i){case u._5.Left:case u._5.LeftRight:null==o.left?o.left=50:o.left+=10;break;case u._5.Right:null==o.right?o.right=50:o.right-=10}a.placement=o}const c=new l.f(e.item,a,r);c.updateData(r.scene.context),n&&(c.options.name=r.scene.getNextElementName()),r.elements.push(c),r.scene.byName.set(c.options.name,c),r.scene.save(),r.reinitializeMoveable();break;default:return void console.log("DO action",t,e)}}),this.options=t,this.parent=n,this.scene=e;let{elements:c}=this.options;c||(this.options.elements=c=[]);for(const t of c)if("frame"===t.type)this.elements.push(new p(t,e,this));else{var h;const e=null!==(h=o.Jk.getIfExists(t.type))&&void 0!==h?h:a.C;this.elements.push(new l.f(e,t,this))}}isRoot(){return!1}updateData(t){super.updateData(t);for(const e of this.elements)e.updateData(t)}reorder(t,e){const n=Array.from(this.elements),[r]=n.splice(t,1);n.splice(e,0,r),this.elements=n,this.reinitializeMoveable()}reinitializeMoveable(){this.scene.clearCurrentSelection(),setTimeout(()=>this.scene.initMoveable(!0,this.scene.isEditingEnabled),100)}render(){return(0,c.jsx)("div",{ref:this.initElement,style:{overflow:"hidden"},children:this.elements.map(t=>t.render())},this.UID)}visit(t){super.visit(t);for(const e of this.elements)t(e)}getSaveModel(){return Object.assign({},this.options,{elements:this.elements.map(t=>t.getSaveModel())})}}},"./public/app/plugins/panel/canvas/editor/options.ts":(t,e,n)=>{n.d(e,{I:()=>o});var r=n("./public/app/features/canvas/index.ts"),i=n("./public/app/features/dimensions/editors/index.ts");const o={addBackground:(t,e)=>{const n=["Background"];t.addCustomEditor({category:n,id:"background.color",path:"background.color",name:"Color",editor:i.Lm,settings:{},defaultValue:{fixed:""}}).addCustomEditor({category:n,id:"background.image",path:"background.image",name:"Image",editor:i.Lv,settings:{resourceType:"image"}}).addRadio({category:n,path:"background.size",name:"Image size",settings:{options:[{value:r.Uy.Original,label:"Original"},{value:r.Uy.Contain,label:"Contain"},{value:r.Uy.Cover,label:"Cover"},{value:r.Uy.Fill,label:"Fill"},{value:r.Uy.Tile,label:"Tile"}]},defaultValue:r.Uy.Cover})},addBorder:(t,e)=>{var n,r;const o=["Border"];t.addSliderInput({category:o,path:"border.width",name:"Width",defaultValue:2,settings:{min:0,max:20}}),null!==(n=e.options)&&void 0!==n&&null!==(r=n.border)&&void 0!==r&&r.width&&t.addCustomEditor({category:o,id:"border.color",path:"border.color",name:"Color",editor:i.Lm,settings:{},defaultValue:{fixed:""}})}}},"./public/app/plugins/panel/canvas/module.tsx":(t,e,n)=>{n.r(e),n.d(e,{plugin:()=>au});var r=n("./packages/grafana-data/src/index.ts"),i=n("./public/app/features/canvas/runtime/frame.tsx"),o=n("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/0/cache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),a=n("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),s=n("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/ReplaySubject.js"),u=n("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/Subscription.js"),l=n("./packages/grafana-runtime/src/index.ts"),c=n("./packages/grafana-ui/src/index.ts");function d(t,e){return function(n){n&&(t[e]=n)}}function f(t,e,n){return function(r){r&&(t[e][n]=r)}}function p(t,e){return function(n){var r=n.prototype;t.forEach(function(t){e(r,t)})}}var h=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,r=this.values,i=n.indexOf(t),o=-1===i?n.length:i;n[o]=t,r[o]=e},t}(),v=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),g="function"==typeof Map,m=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var b=function(){function t(t,e,n,r,i,o,a,s){this.prevList=t,this.list=e,this.added=n,this.removed=r,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=function(t,e){var n=[],r=[];return t.forEach(function(t){var e=t[0],i=t[1],o=new m;n[e]=o,r[i]=o}),n.forEach(function(t,e){t.connect(n[e-1])}),t.filter(function(t,n){return!e[n]}).map(function(t,e){var i=t[0],o=t[1];if(i===o)return[0,0];var a=n[i],s=r[o-1],u=a.getIndex();return a.disconnect(),s?a.connect(s,s.next):a.connect(void 0,n[0]),[u,a.getIndex()]})}(this.changedBeforeAdded,this.fixed),e=this.changed,n=[];this.cacheOrdered=t.filter(function(t,r){var i=t[0],o=t[1],a=e[r],s=a[0],u=a[1];if(i!==o)return n.push([s,u]),!0}),this.cachePureChanged=n},t}();function y(t,e,n){var r=g?Map:n?v:h,i=n||function(t){return t},o=[],a=[],s=[],u=t.map(i),l=e.map(i),c=new r,d=new r,f=[],p=[],m={},y=[],x=0,E=0;return u.forEach(function(t,e){c.set(t,e)}),l.forEach(function(t,e){d.set(t,e)}),u.forEach(function(t,e){var n=d.get(t);void 0===n?(++E,a.push(e)):m[n]=E}),l.forEach(function(t,e){var n=c.get(t);void 0===n?(o.push(e),++x):(s.push([n,e]),E=m[e]||0,f.push([n-E,e-x]),p.push(e===n),n!==e&&y.push([n,e]))}),a.reverse(),new b(t,e,o,a,y,s,f,p)}const x=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),n=y(this.list,e,this.findKeyCallback);return this.list=e,n},t}();var E="function",S="object",C="string",w="number",D="undefined",M=typeof window!==D,R=(typeof document!==D&&document,[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}]),_=1e-7,O={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return void 0===e&&(e=window.innerWidth),t/100*e},vh:function(t,e){return void 0===e&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return void 0===e&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return void 0===e&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function P(t){return typeof t===D}function k(t){return t&&typeof t===S}function B(t){return Array.isArray(t)}function T(t){return typeof t===C}function z(t){return typeof t===E}function j(t,e,n,r,i){return G(t,e,n)?n:function(t,e,n,r,i){for(var o,a=function(n){var a=e[n].trim();if(a===t.close&&!G(t,e,n))return{value:n};var s=n,u=V(i,function(t){var e=t.open;return e===a});if(u&&(s=j(u,e,n,r,i)),-1===s)return o=n,"break";o=n=s},s=n;s<r;++s){var u=a(s);if(s=o,"object"==typeof u)return u.value;if("break"===u)break}return-1}(t,e,n+1,r,i)}function G(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function I(t,e){var n=T(e)?{separator:e}:e,r=n.separator,i=void 0===r?",":r,o=n.isSeparateFirst,a=n.isSeparateOnlyOpenClose,s=n.isSeparateOpenClose,u=void 0===s?a:s,l=n.openCloseCharacters,c=void 0===l?R:l,d=c.map(function(t){var e=t.open,n=t.close;return e===n?e:e+"|"+n}).join("|"),f=new RegExp("(\\s*"+i+"\\s*|"+d+"|\\s+)","g"),p=t.split(f).filter(Boolean),h=p.length,v=[],g=[];function m(){return!!g.length&&(v.push(g.join("")),g=[],!0)}for(var b,y=function(t){var e=p[t].trim(),n=t,r=V(c,function(t){return t.open===e}),s=V(c,function(t){return t.close===e});if(r){if(-1!==(n=j(r,p,t,h,c))&&u)return m()&&o?(b=t,"break"):(v.push(p.slice(t,n+1).join("")),t=n,o?(b=t,"break"):(b=t,"continue"))}else{if(s&&!G(s,p,t))throw new Error("invalid format: "+s.close);if(function(t,e){return(""===e||" "==e)&&(""===t||" "==t)||t===e}(e,i)&&!a)return m(),o?(b=t,"break"):(b=t,"continue")}-1===n&&(n=h-1),g.push(p.slice(t,n+1).join("")),b=t=n},x=0;x<h;++x){var E=y(x);if(x=b,"break"===E)break}return g.length&&v.push(g.join("")),v}function A(t){return I(t,"")}function F(t){return I(t,",")}function N(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function L(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2];return{prefix:n,unit:e[3],value:parseFloat(r)}}function Y(t){return t.replace(/[\s-_]([a-z])/g,function(t,e){return e.toUpperCase()})}function X(t,e){return void 0===e&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(t,n,r){return""+n+e+r.toLowerCase()})}function q(){return Date.now?Date.now():(new Date).getTime()}function W(t,e,n){void 0===n&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function V(t,e,n){var r=W(t,e);return r>-1?t[r]:n}var H=function(){var t=q(),e=M&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(e){var n=q();return window.setTimeout(function(){e(n-t)},1e3/60)}}(),$=function(){var t=M&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(t){clearTimeout(t)}}();function K(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in e)e.push(n);return e}function U(t,e){var n=L(t),r=n.value,i=n.unit;if(k(e)){var o=e[i];if(o){if(z(o))return o(r);if(O[i])return O[i](r,o)}}else if("%"===i)return r*e/100;return O[i]?O[i](r):r}function Z(t,e,n){return Math.max(e,Math.min(t,n))}function J(t,e,n){return[[it(e[0],_),it(e[0]*t[1]/t[0],_)],[it(e[1]*t[0]/t[1],_),it(e[1],_)]].filter(function(t){return t.every(function(t,r){return n?t<=e[r]:t>=e[r]})})[0]||t}function Q(t,e,n,r){if(!r)return t.map(function(t,r){return Z(t,e[r],n[r])});var i=t[0],o=t[1],a=J(t,e,!1),s=a[0],u=a[1],l=J(t,n,!0),c=l[0],d=l[1];return i<s||o<u?(i=s,o=u):(i>c||o>d)&&(i=c,o=d),[i,o]}function tt(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function et(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+2*Math.PI}function nt(t){var e=function(t){return[0,1].map(function(e){return tt(t.map(function(t){return t[e]}))})}(t),n=et(e,t[0]),r=et(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function rt(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function it(t,e){return e?Math.round(t/e)*e:t}function ot(t,e){return t.forEach(function(n,r){t[r]=it(t[r],e)}),t}function at(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function st(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function ut(t,e,n,r){t.addEventListener(e,n,r)}function lt(t,e,n,r){t.removeEventListener(e,n,r)}var ct=function(t,e){return(ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function dt(t,e){function n(){this.constructor=t}ct(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var ft=function(){return(ft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function pt(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function ht(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function vt(t,e){var n=Object.keys(t),r=Object.keys(e),i=y(n,r,function(t){return t}),o={},a={},s={};return i.added.forEach(function(t){var n=r[t];o[n]=e[n]}),i.removed.forEach(function(e){var r=n[e];a[r]=t[r]}),i.maintained.forEach(function(r){var i=r[0],o=n[i],a=[t[o],e[o]];t[o]!==e[o]&&(s[o]=a)}),{added:o,removed:a,changed:s}}function gt(t){t.forEach(function(t){t()})}function mt(t){var e=0;return t.map(function(t){return null==t?"$compat"+ ++e:""+t})}function bt(t,e,n,r){return T(t)||typeof t===w?new wt("text_"+t,e,n,r,null,{}):new("string"==typeof t.type?Dt:t.type.prototype.render?Pt:_t)(t.type,e,n,r,t.ref,t.props)}function yt(t){var e=t.className,n=pt(t,["className"]);return null!=e&&(n.class=e),delete n.style,delete n.children,n}function xt(t,e){if(!e)return t;for(var n in e)P(t[n])&&(t[n]=e[n]);return t}function Et(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},o=i.key,a=i.ref,s=pt(i,["key","ref"]);return{type:t,key:o,ref:a,props:ft(ft({},s),{children:function t(e){var n=[];return e.forEach(function(e){n=n.concat(B(e)?t(e):e)}),n}(n).filter(function(t){return null!=t&&!1!==t})})}}var St=function(){function t(t,e,n,r,i,o){void 0===o&&(o={}),this.type=t,this.key=e,this.index=n,this.container=r,this.ref=i,this.props=o,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,n,r){if(this.base&&!T(e)&&!r&&!this._should(e.props,n))return!1;this.original=e,this._setState(n);var i=this.props;return T(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?i:{},n),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function Ct(t){var e={},n={};for(var r in t)0===r.indexOf("on")?n[r.replace("on","").toLowerCase()]=t[r]:e[r]=t[r];return{attributes:e,events:n}}var wt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}dt(e,t);var n=e.prototype;return n._render=function(t){var e=this,n=!this.base;return n&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push(function(){n?e._mounted():e._updated()}),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(St),Dt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events={},e._isSVG=!1,e}dt(e,t);var n=e.prototype;return n.addEventListener=function(t,e){var n=this.events;n[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,n[t])},n.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},n._should=function(t){return ht(this.props,t)},n._render=function(t,e){var n=this,r=!this.base;if(r){var i=this._hasSVG();this._isSVG=i;var o=this.props.portalContainer;if(!o){var a=this.type;o=i?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)}this.base=o}jt(this,this._providers,this.props.children,t,null);var s=this.base,u=Ct(e),l=u.attributes,c=u.events,d=Ct(this.props),f=d.attributes,p=d.events;return function(t,e,n){var r=vt(t,e),i=r.added,o=r.removed,a=r.changed;for(var s in i)n.setAttribute(s,i[s]);for(var s in a)n.setAttribute(s,a[s][1]);for(var s in o)n.removeAttribute(s)}(yt(l),yt(f),s),function(t,e,n){var r=vt(t,e),i=r.added,o=r.removed,a=r.changed;for(var s in o)n.removeEventListener(s);for(var s in i)n.addEventListener(s,i[s]);for(var s in a)n.removeEventListener(s),n.addEventListener(s,a[s][1]);for(var s in o)n.removeEventListener(s)}(c,p,this),function(t,e,n){var r=n.style,i=vt(t,e),o=i.added,a=i.removed,s=i.changed;for(var u in o){var l=X(u,"-");r.setProperty?r.setProperty(l,o[u]):r[l]=o[u]}for(var u in s)l=X(u,"-"),r.setProperty?r.setProperty(l,s[u][1]):r[l]=s[u][1];for(var u in a)l=X(u,"-"),r.removeProperty?r.removeProperty(l):r[l]=""}(e.style||{},this.props.style||{},s),t.push(function(){r?n._mounted():n._updated()}),!0},n._unmount=function(){var t=this.events,e=this.base;for(var n in t)e.removeEventListener(n,t[n]);this._providers.forEach(function(t){t._unmount()}),this.events={},this.props.portalContainer||e.parentNode.removeChild(e)},n._hasSVG=function(){if(this._isSVG||"svg"===this.type)return!0;var t=Mt(this.container);return t&&"ownerSVGElement"in t},e}(St);function Mt(t){if(!t)return null;var e=t.base;return e instanceof Node?e:Mt(t.container)}function Rt(t){if(!t)return null;if(t instanceof Node)return t;var e=t.$_provider._providers;return e.length?Rt(e[0].base):null}var _t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}dt(e,t);var n=e.prototype;return n._render=function(t){var e=this.type(this.props);return jt(this,this._providers,e?[e]:[],t),!0},n._unmount=function(){this._providers.forEach(function(t){t._unmount()})},e}(St),Ot=function(t){function e(e){var n=t.call(this,"container","container",0,null)||this;return n.base=e,n}dt(e,t);var n=e.prototype;return n._render=function(){return!0},n._unmount=function(){},e}(St),Pt=function(t){function e(e,n,r,i,o,a){return void 0===a&&(a={}),t.call(this,e,n,r,i,o,xt(a,e.defaultProps))||this}dt(e,t);var n=e.prototype;return n._should=function(t,e){return this.base.shouldComponentUpdate(xt(t,this.type.defaultProps),e||this.base.state)},n._render=function(t,e,n){var r=this;this.props=xt(this.props,this.type.defaultProps);var i=!this.base;i?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var o=this.base,a=o.state,s=o.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),jt(this,this._providers,s?[s]:[],t,n,null),t.push(function(){i?(r._mounted(),o.componentDidMount()):(r._updated(),o.componentDidUpdate(e,a))})},n._setState=function(t){t&&(this.base.state=t)},n._unmount=function(){this._providers.forEach(function(t){t._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},e}(St),kt=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={},this.$_timer=0,this.$_state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,n){var r=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=ft(ft({},this.$_state),t),n?this.$_setState(e,n):this.$_timer=setTimeout(function(){r.$_timer=0,r.$_setState(e,n)})},e.forceUpdate=function(t){this.setState({},t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},e.$_setState=function(t,e){var n=[],r=this.$_provider;jt(r.container,[r],[r.original],n,ft(ft({},this.state),this.$_state),e)&&(t&&n.push(t),gt(n))},t}(),Bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return dt(e,t),e.prototype.shouldComponentUpdate=function(t,e){return ht(this.props,t)||ht(this.state,e)},e}(kt),Tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}dt(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.element,n=t.container;this._portalProvider=new Ot(n),Gt(e,n,this._portalProvider)},n.componentDidUpdate=function(){var t=this.props;Gt(t.element,t.container,this._portalProvider)},n.componentWillUnmount=function(){Gt(null,this.props.container,this._portalProvider),this._portalProvider=null},e}(Bt);function zt(t,e,n){var r=n.map(function(t){return T(t)?null:t.key}),i=y(mt(e.map(function(t){return t.key})),mt(r),function(t){return t});i.removed.forEach(function(t){e.splice(t,1)[0]._unmount()}),i.ordered.forEach(function(t){var n=t[0],r=t[1],i=e.splice(n,1)[0];e.splice(r,0,i);var o=Rt(i.base),a=Rt(e[r+1]&&e[r+1].base);o&&o.parentNode.insertBefore(o,a)}),i.added.forEach(function(i){e.splice(i,0,bt(n[i],r[i],i,t))});var o=i.maintained.filter(function(i){i[0];var o=i[1],a=n[o],s=e[o];return(T(a)?"text_"+a:a.type)!==s.type?(s._unmount(),e.splice(o,1,bt(a,r[o],o,t)),!0):(s.index=o,!1)});return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(i.added,o.map(function(t){t[0];return t[1]}))}function jt(t,e,n,r,i,o){var a=zt(t,e,n),s=e.filter(function(t,e){return t._update(r,n[e],i,o)}),u=Mt(t);return u&&a.reverse().forEach(function(n){var r=e[n],i=Rt(r.base);if(i&&u!==i&&!i.parentNode){var o=function(t,e){for(var n=t._providers,r=n.length,i=e.index+1;i<r;++i){var o=Rt(n[i].base);if(o)return o}return null}(t,r);u.insertBefore(i,o)}}),s.length>0}function Gt(t,e,n){void 0===n&&(n=e.__REACT_COMPAT__);var r=!!n;return n||(n=new Ot(e)),function(t,e,n){var r=[];jt(t,t._providers,e,r,n),gt(r)}(n,t?[t]:[]),r||(e.__REACT_COMPAT__=n),n}function It(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),Gt(t,e,r),n&&n()}function At(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function Ft(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function Nt(t,e){try{return new RegExp(t,"g").exec(e)}catch(t){return null}}function Lt(){if("undefined"==typeof navigator||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!(!e||!e.length)}function Yt(t){return t.replace(/_/g,".")}function Xt(t,e){var n=null,r="-1";return At(t,function(t){var i=Nt("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!(!i||t.brand)&&(n=t,r=i[3]||"-1",t.versionAlias?r=t.versionAlias:t.versionTest&&(r=function(t,e){var n=Nt("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}(t.versionTest.toLowerCase(),e)||r),r=Yt(r),!0)}),{preset:n,version:r}}function qt(t,e){var n={brand:"",version:"-1"};return At(t,function(t){var r=Wt(e,t);return!!r&&(n.brand=t.id,n.version=t.versionAlias||r.version,"-1"!==n.version)}),n}function Wt(t,e){return Ft(t,function(t){var n=t.brand;return Nt(""+e.test,n.toLowerCase())})}var Vt=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Ht=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],$t=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Kt=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Ut=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Zt(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],o={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!qt(Kt,n).brand},a={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&At($t,function(t){return Wt(n,t)});var s=qt(Ht,n);if(o.chromium=!!s.brand,o.chromiumVersion=s.version,!o.chromium){var u=qt($t,n);o.webkit=!!u.brand,o.webkitVersion=u.version}if(t){var l=t.platform.toLowerCase(),c=Ft(Ut,function(t){return new RegExp(""+t.test,"g").exec(l)});a.name=c?c.id:l,a.version=t.platformVersion}var d=qt(Vt,n);return d.brand&&(o.name=d.brand,o.version=t?t.uaFullVersion:d.version),"Linux armv8l"===navigator.platform?a.name="android":o.webkit&&(a.name=r?"ios":"mac"),"ios"===a.name&&o.webview&&(o.version="-1"),a.version=Yt(a.version),o.version=Yt(o.version),a.majorVersion=parseInt(a.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:a,isMobile:r,isHints:!0}}function Jt(t){var e=function(t){var e=t;if(void 0===e){if("undefined"==typeof navigator||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:!!Xt(Kt,e).preset,chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},o=Xt(Vt,e),a=o.preset,s=o.version,u=Xt(Ut,e),l=u.preset,c=u.version,d=Xt(Ht,e);if(r.chromium=!!d.preset,r.chromiumVersion=d.version,!r.chromium){var f=Xt($t,e);r.webkit=!!f.preset,r.webkitVersion=f.version}return l&&(i.name=l.id,i.version=c,i.majorVersion=parseInt(c,10)),a&&(r.name=a.id,r.version=s,r.webview&&"ios"===i.name&&"safari"!==r.name&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function Qt(t){return void 0===t&&Lt()?Zt():Jt(t)}const te=Qt;function ee(t,e,n,r,i,o){for(var a=0;a<i;++a){var s=n+a*i,u=r+a*i;t[s]+=t[u]*o,e[s]+=e[u]*o}}function ne(t,e,n,r,i){for(var o=0;o<i;++o){var a=n+o*i,s=r+o*i,u=t[a],l=e[a];t[a]=t[s],t[s]=u,e[a]=e[s],e[s]=l}}function re(t,e,n,r,i){for(var o=0;o<r;++o){var a=n+o*r;t[a]/=i,e[a]/=i}}function ie(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function oe(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=Se(e),i=0;i<e;++i){var o=e*i+i;if(!it(n[o],_))for(var a=i+1;a<e;++a)if(n[e*i+a]){ne(n,r,i,a,e);break}if(!it(n[o],_))return[];re(n,r,i,e,n[o]);for(a=0;a<e;++a){var s=a,u=n[a+i*e];it(u,_)&&i!==a&&ee(n,r,s,i,e,-u)}}return r}function ae(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function se(t,e,n){if(void 0===e&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=Se(n),i=Math.min(e,n),o=0;o<i-1;++o){for(var a=0;a<i-1;++a)r[o*n+a]=t[o*e+a];r[(o+1)*n-1]=t[(o+1)*e-1],r[(n-1)*n+o]=t[(e-1)*e+o]}return r[n*n-1]=t[e*e-1],r}function ue(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Se(t);return e.forEach(function(e){r=le(r,e,t)}),r}function le(t,e,n){void 0===n&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,o=e.length/i;if(!i)return e;if(!o)return t;for(var a=0;a<n;++a)for(var s=0;s<o;++s){r[s*n+a]=0;for(var u=0;u<i;++u)r[s*n+a]+=t[u*n+a]*e[s*i+u]}return r}function ce(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function de(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function fe(t,e){return void 0===e&&(e=9===t.length),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function pe(t,e,n){void 0===n&&(n=e.length);var r=le(t,e,n),i=r[n-1];return r.map(function(t){return t/i})}function he(t,e){return le(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function ve(t,e){return le(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function ge(t,e){return le(t,Ee(e,4))}function me(t,e){var n=e[0],r=void 0===n?1:n,i=e[1],o=void 0===i?1:i,a=e[2];return le(t,[r,0,0,0,0,o,0,0,0,0,void 0===a?1:a,0,0,0,0,1],4)}function be(t,e){return pe(Ee(e,3),ae(t,3))}function ye(t,e){var n=e[0],r=void 0===n?0:n,i=e[1],o=void 0===i?0:i,a=e[2];return le(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,o,void 0===a?0:a,1],4)}function xe(t,e){return le(t,e,4)}function Ee(t,e){var n=Math.cos(t),r=Math.sin(t),i=Se(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function Se(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function Ce(t,e){for(var n=Se(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function we(t,e){for(var n=Se(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function De(t,e,n,r,i,o,a,s){var u=t[0],l=t[1],c=e[0],d=e[1],f=n[0],p=n[1],h=r[0],v=r[1],g=i[0],m=i[1],b=o[0],y=o[1],x=a[0],E=a[1],S=s[0],C=s[1],w=oe([u,0,c,0,f,0,h,0,l,0,d,0,p,0,v,0,1,0,1,0,1,0,1,0,0,u,0,c,0,f,0,h,0,l,0,d,0,p,0,v,0,1,0,1,0,1,0,1,-g*u,-m*u,-b*c,-y*c,-x*f,-E*f,-S*h,-C*h,-g*l,-m*l,-b*d,-y*d,-x*p,-E*p,-S*v,-C*v],8);if(!w.length)return[];var D=le(w,[g,m,b,y,x,E,S,C],8);return D[8]=1,se(function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}(D),3,4)}function Me(t){return _e(Oe(t))}function Re(t,e){var n=pe(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function _e(t){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(t){var n=t.matrixFunction,r=t.functionValue;n&&(e=n(e,r))}),e}function Oe(t){return(B(t)?t:A(t)).map(function(t){var e=N(t),n=e.prefix,r=e.value,i=null,o=n,a="";if("translate"===n||"translateX"===n||"translate3d"===n){var s=F(r).map(function(t){return parseFloat(t)}),u=s[0],l=s[1],c=void 0===l?0:l,d=s[2];i=ye,a=[u,c,void 0===d?0:d]}else if("translateY"===n){i=ye,a=[0,c=parseFloat(r),0]}else if("translateZ"===n){i=ye,a=[0,0,parseFloat(r)]}else if("scale"===n||"scale3d"===n){var f=F(r).map(function(t){return parseFloat(t)}),p=f[0],h=f[1],v=void 0===h?p:h,g=f[2];i=me,a=[p,v,void 0===g?1:g]}else if("scaleX"===n){i=me,a=[p=parseFloat(r),1,1]}else if("scaleY"===n){i=me,a=[1,v=parseFloat(r),1]}else if("scaleZ"===n){i=me,a=[1,1,parseFloat(r)]}else if("rotate"===n||"rotateZ"===n||"rotateX"===n||"rotateY"===n){var m=L(r),b=m.unit,y=m.value,x="rad"===b?y:y*Math.PI/180;"rotate"===n||"rotateZ"===n?(o="rotateZ",i=ge):"rotateX"===n?i=he:"rotateY"===n&&(i=ve),a=x}else if("matrix3d"===n)i=xe,a=F(r).map(function(t){return parseFloat(t)});else if("matrix"===n){var E=F(r).map(function(t){return parseFloat(t)});i=xe,a=[E[0],E[1],0,0,E[2],E[3],0,0,0,0,1,0,E[4],E[5],0,1]}else o="";return{name:n,functionName:o,value:r,matrixFunction:i,functionValue:a}})}var Pe=function(t,e){return(Pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var ke="function"==typeof Map?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}();function Be(t,e){return y(t,e,ke)}const Te=function(t){function e(e){return void 0===e&&(e=[]),t.call(this,e,ke)||this}return function(t,e){function n(){this.constructor=t}Pe(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(x);function ze(t){return t.length<3?0:Math.abs(function(t){for(var e=0,n=t.length-1;n>=0;--n)e+=t[n];return e}(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function je(t,e){var n=e.width,r=e.height,i=e.left,o=e.top,a=Ge(t),s=a.minX,u=a.minY,l=a.maxX,c=a.maxY,d=n/(l-s),f=r/(c-u);return t.map(function(t){return[i+(t[0]-s)*d,o+(t[1]-u)*f]})}function Ge(t){var e=t.map(function(t){return t[0]}),n=t.map(function(t){return t[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function Ie(t,e,n){var r=t[0],i=t[1],o=Ge(e),a=o.minX,s=o.minY,u=o.maxX,l=o.maxY,c=[[a,i],[u,i]],d=[[r,s],[r,l]],f=Ae(c[0],c[1]),p=Ae(d[0],d[1]),h=[],v=[];return Le(e).forEach(function(t){var e=Ae(t[0],t[1]),n=Ne(Fe(f,e),[c,t]),o=Ne(Fe(p,e),[d,t]);1===n.length&&t[0][1]===i||h.push.apply(h,n),1===o.length&&t[0][0]===r||v.push.apply(v,o),e[0]||h.push.apply(h,n),e[1]||v.push.apply(v,o)}),!n&&(W(h,function(t){return t[0]===r})>-1||W(v,function(t){return t[1]===i})>-1)||!!(h.filter(function(t){return t[0]>r}).length%2&&v.filter(function(t){return t[1]>i}).length%2)}function Ae(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];if(n===i&&r===o)return[0,0,0];if(n===i)return[1,0,-n];if(r===o)return[0,1,-r];var a=(i-n)/(r-o);return[1,a,-n-a*r]}function Fe(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],l=e[2],c=0===i&&0===s,d=0===o&&0===u;if(c&&d)return[];if(c){var f=-a/o;return f!==-l/u?[]:[[-1/0,f],[1/0,f]]}if(d){var p=-a/i;return p!==-l/s?[]:[[p,-1/0],[p,1/0]]}return 0===i?[[n=-(u*(r=-a/o)+l)/s,r]]:0===s?[[n=-(o*(r=-l/u)+a)/i,r]]:0===o?[[n=-a/i,r=-(s*n+l)/u]]:0===u?[[n=-l/s,r=-(i*n+a)/o]]:[[n=(o*l-u*a)/(u*i-o*s),r=-(i*n+a)/o]]}function Ne(t,e){var n=e.map(function(t){return[0,1].map(function(e){return[Math.min(t[0][e],t[1][e]),Math.max(t[0][e],t[1][e])]})});if(2===t.length){var r=t[0],i=r[0],o=r[1];if(i===t[1][0]){var a=Math.max.apply(Math,n.map(function(t){return t[1][0]})),s=Math.min.apply(Math,n.map(function(t){return t[1][1]}));return a>s?[]:[[i,a],[i,s]]}if(o===t[1][1]){var u=Math.max.apply(Math,n.map(function(t){return t[0][0]})),l=Math.min.apply(Math,n.map(function(t){return t[0][1]}));return u>l?[]:[[u,o],[l,o]]}}return t.filter(function(t){return n.every(function(e){return e[0][0]<=t[0]&&t[0]<=e[0][1]&&e[1][0]<=t[1]&&t[1]<=e[1][1]})})}function Le(t){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function Ye(t,e){var n=t.slice(),r=e.slice();-1===nt(n)&&n.reverse(),-1===nt(r)&&r.reverse();var i=Le(n),o=Le(r),a=i.map(function(t){return Ae(t[0],t[1])}),s=o.map(function(t){return Ae(t[0],t[1])}),u=[];a.forEach(function(t,e){var n=i[e],a=[];s.forEach(function(r,i){var s=Ne(Fe(t,r),[n,o[i]]);a.push.apply(a,s.map(function(t){return{index1:e,index2:i,pos:t}}))}),a.sort(function(t,e){return rt(n[0],t.pos)-rt(n[0],e.pos)}),u.push.apply(u,a),Ie(n[1],r)&&u.push({index1:e,index2:-1,pos:n[1]})}),o.forEach(function(t,e){if(Ie(t[1],n)){var r=!1,i=W(u,function(t){return t.index2===e?(r=!0,!1):!!r});-1===i&&(r=!1,i=W(u,function(t){var n=t.index1,i=t.index2;return-1===n&&i+1===e?(r=!0,!1):!!r})),-1===i?u.push({index1:-1,index2:e,pos:t[1]}):u.splice(i,0,{index1:-1,index2:e,pos:t[1]})}});var l={};return u.map(function(t){return t.pos}).filter(function(t){var e=t[0]+"x"+t[1];return!l[e]&&(l[e]=!0,!0)})}var Xe=function(){return(Xe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};const qe=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(k(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(k(t))for(var n in t)this.off(n);else if(e){var r=this._events[t];if(r){var i=W(r,function(t){return t.listener===e});i>-1&&r.splice(i,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var n=this;return e&&this._addEvent(t,e,{once:!0}),new Promise(function(e){n._addEvent(t,e,{once:!0})})},e.emit=function(t,e){var n=this;void 0===e&&(e={});var r=this._events[t];if(!t||!r)return!0;var i=!1;return e.eventType=t,e.stop=function(){i=!0},e.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(r).forEach(function(r){r.listener(e),r.once&&n.off(t,r.listener)}),!i},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(Xe({listener:e},n))},t}();var We=function(t,e){return(We=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Ve=function(){return(Ve=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function He(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}const $e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._startRect=null,e._startPos=[],e._prevTime=0,e._timer=0,e._prevScrollPos=[0,0],e._isWait=!1,e}!function(t,e){function n(){this.constructor=t}We(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.dragStart=function(t,e){var n=e.container,r=0,i=0,o=0,a=0;if(n===document.body)o=window.innerWidth,a=window.innerHeight;else{var s=n.getBoundingClientRect();r=s.top,i=s.left,o=s.width,a=s.height}this._startPos=[t.clientX,t.clientY],this._startRect={top:r,left:i,width:o,height:a},this._prevScrollPos=this._getScrollPosition([0,0],e)},n.drag=function(t,e){var n=t.clientX,r=t.clientY,i=e.threshold,o=void 0===i?0:i,a=this._startRect,s=this._startPos,u=[0,0];return a.top>r-o?(s[1]>a.top||r<s[1])&&(u[1]=-1):a.top+a.height<r+o&&(s[1]<a.top+a.height||r>s[1])&&(u[1]=1),a.left>n-o?(s[0]>a.left||n<s[0])&&(u[0]=-1):a.left+a.width<n+o&&(s[0]<a.left+a.width||n>s[0])&&(u[0]=1),clearTimeout(this._timer),!(!u[0]&&!u[1])&&this._continueDrag(Ve(Ve({},e),{direction:u,inputEvent:t,isDrag:!0}))},n.checkScroll=function(t){var e=this;if(this._isWait)return!1;var n=t.prevScrollPos,r=void 0===n?this._prevScrollPos:n,i=t.direction,o=t.throttleTime,a=void 0===o?0:o,s=t.inputEvent,u=t.isDrag,l=this._getScrollPosition(i||[0,0],t),c=l[0]-r[0],d=l[1]-r[1],f=i||[c?Math.abs(c)/c:0,d?Math.abs(d)/d:0];return this._prevScrollPos=l,!(!c&&!d)&&(this.trigger("move",{offsetX:f[0]?c:0,offsetY:f[1]?d:0,inputEvent:s}),a&&u&&(this._timer=window.setTimeout(function(){e._continueDrag(t)},a)),!0)},n.dragEnd=function(){clearTimeout(this._timer)},n._getScrollPosition=function(t,e){var n=e.container,r=e.getScrollPosition;return(void 0===r?He:r)({container:n,direction:t})},n._continueDrag=function(t){var e=this,n=t.container,r=t.direction,i=t.throttleTime,o=t.useScroll,a=t.isDrag,s=t.inputEvent;if(!a||!this._isWait){var u=q(),l=Math.max(i+this._prevTime-u,0);if(l>0)return this._timer=window.setTimeout(function(){e._continueDrag(t)},l),!1;this._prevTime=u;var c=this._getScrollPosition(r,t);return this._prevScrollPos=c,a&&(this._isWait=!0),this.trigger("scroll",{container:n,direction:r,inputEvent:s}),this._isWait=!1,o||this.checkScroll(Ve(Ve({},t),{prevScrollPos:c,direction:r,inputEvent:s}))}},e}(qe);var Ke=function(t,e){return(Ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Ue=function(){return(Ue=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Ze(t){return 180*(e=[t[0].clientX,t[0].clientY],n=[t[1].clientX,t[1].clientY],r=n[0]-e[0],i=n[1]-e[1],((o=Math.atan2(i,r))>=0?o:o+2*Math.PI)/Math.PI);var e,n,r,i,o}function Je(t){return t.touches?function(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(en(t[r]));return n}(t.touches):[en(t)]}function Qe(t,e,n){var r=n.length,i=nn(t,r),o=i.clientX,a=i.clientY,s=i.originalClientX,u=i.originalClientY,l=nn(e,r),c=l.clientX,d=l.clientY,f=nn(n,r);return{clientX:s,clientY:u,deltaX:o-c,deltaY:a-d,distX:o-f.clientX,distY:a-f.clientY}}function tn(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function en(t){return{clientX:t.clientX,clientY:t.clientY}}function nn(t,e){void 0===e&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var i=t[r];n.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,n.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,n.clientX+=i.clientX,n.clientY+=i.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var rn=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var e=t.prototype;return e.getAngle=function(t){return void 0===t&&(t=this.prevClients),Ze(t)},e.getRotation=function(t){return void 0===t&&(t=this.prevClients),Ze(t)-Ze(this.startClients)},e.getPosition=function(t,e){void 0===t&&(t=this.prevClients);var n=Qe(t||this.prevClients,this.prevClients,this.startClients),r=n.deltaX,i=n.deltaY;return this.movement+=Math.sqrt(r*r+i*i),this.prevClients=t,n},e.getPositions=function(t){void 0===t&&(t=this.prevClients);var e=this.prevClients;return this.startClients.map(function(n,r){return Qe([t[r]],[e[r]],[n])})},e.getMovement=function(t){var e=this.movement;if(!t)return e;var n=nn(t,this.length),r=nn(this.prevClients,this.length),i=n.clientX-r.clientX,o=n.clientY-r.clientY;return Math.sqrt(i*i+o*o)+e},e.getDistance=function(t){return void 0===t&&(t=this.prevClients),tn(t)},e.getScale=function(t){return void 0===t&&(t=this.prevClients),tn(t)/tn(this.startClients)},e.move=function(t,e){this.startClients.forEach(function(n){n.clientX-=t,n.clientY-=e})},t}(),on=["textarea","input"];const an=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;r.options={},r.flag=!1,r.pinchFlag=!1,r.datas={},r.isDrag=!1,r.isPinch=!1,r.isMouse=!1,r.isTouch=!1,r.clientStores=[],r.targets=[],r.prevTime=0,r.doubleFlag=!1,r._dragFlag=!1,r.onDragStart=function(t,e){if(void 0===e&&(e=!0),r.flag||!1!==t.cancelable){var n=r.options,i=n.container,o=n.pinchOutside,a=n.preventRightClick,s=n.preventDefault,u=n.checkInput,l=r.isTouch,c=!r.flag;if(c){var d=document.activeElement,f=t.target,p=f.tagName.toLowerCase(),h=on.indexOf(p)>-1,v=f.isContentEditable;if(h||v){if(u||d===f)return!1;if(d&&v&&d.isContentEditable&&d.contains(f))return!1}else if((s||"touchstart"===t.type)&&d){var g=d.tagName;(d.isContentEditable||on.indexOf(g)>-1)&&d.blur()}if(r.clientStores=[new rn(Je(t))],r.flag=!0,r.isDrag=!1,r._dragFlag=!0,r.datas={},a&&(3===t.which||2===t.button))return r.initDrag(),!1;r.doubleFlag=q()-r.prevTime<200,!1===r.emit("dragStart",Ue({datas:r.datas,inputEvent:t,isTrusted:e,isDouble:r.doubleFlag},r.getCurrentStore().getPosition(),{preventDefault:function(){t.preventDefault()},preventDrag:function(){r._dragFlag=!1}}))&&r.initDrag(),r.flag&&s&&t.preventDefault()}if(!r.flag)return!1;var m=0;if(c&&l&&o&&(m=setTimeout(function(){ut(i,"touchstart",r.onDragStart,{passive:!1})})),!c&&l&&o&&lt(i,"touchstart",r.onDragStart),r.flag&&function(t){return t.touches&&t.touches.length>=2}(t)){if(clearTimeout(m),c&&t.touches.length!==t.changedTouches.length)return;r.pinchFlag||r.onPinchStart(t)}}},r.onDrag=function(t,e){if(r.flag){var n=Je(t),i=r.moveClients(n,t,!1);if(r._dragFlag){if(r.pinchFlag||i.deltaX||i.deltaY)if(!1===r.emit("drag",Ue({},i,{isScroll:!!e,inputEvent:t})))return void r.stop();r.pinchFlag&&r.onPinch(t,n)}r.getCurrentStore().getPosition(n,!0)}},r.onDragEnd=function(t){if(r.flag){var e=r.options,n=e.pinchOutside,i=e.container;r.isTouch&&n&&lt(i,"touchstart",r.onDragStart),r.flag=!1;var o=r._getPosition(),a=q(),s=!r.isDrag&&r.doubleFlag;r.prevTime=r.isDrag||s?0:a,r.emit("dragEnd",Ue({datas:r.datas,isDouble:s,isDrag:r.isDrag,isClick:!r.isDrag,inputEvent:t},o)),r.pinchFlag&&r.onPinchEnd(t),r.clientStores=[]}},r.onBlur=function(){r.onDragEnd()};var i=[].concat(e);r.options=Ue({checkInput:!1,container:i.length>1?window:i[0],preventRightClick:!0,preventDefault:!0,checkWindowBlur:!1,pinchThreshold:0,events:["touch","mouse"]},n);var o=r.options,a=o.container,s=o.events,u=o.checkWindowBlur;if(r.isTouch=s.indexOf("touch")>-1,r.isMouse=s.indexOf("mouse")>-1,r.targets=i,r.isMouse&&(i.forEach(function(t){ut(t,"mousedown",r.onDragStart)}),ut(a,"mousemove",r.onDrag),ut(a,"mouseup",r.onDragEnd),ut(a,"contextmenu",r.onDragEnd)),u&&ut(window,"blur",r.onBlur),r.isTouch){var l={passive:!1};i.forEach(function(t){ut(t,"touchstart",r.onDragStart,l)}),ut(a,"touchmove",r.onDrag,l),ut(a,"touchend",r.onDragEnd,l),ut(a,"touchcancel",r.onDragEnd,l)}return r}!function(t,e){function n(){this.constructor=t}Ke(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.stop=function(){this.isDrag=!1,this.flag=!1,this.clientStores=[],this.datas={}},n.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(t,e){return t+e.movement},0)},n.isDragging=function(){return this.isDrag},n.isFlag=function(){return this.flag},n.isPinchFlag=function(){return this.pinchFlag},n.isDoubleFlag=function(){return this.doubleFlag},n.isPinching=function(){return this.isPinch},n.scrollBy=function(t,e,n,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(t,e),r&&this.onDrag(n,!0))},n.move=function(t,e){var n=t[0],r=t[1],i=this.getCurrentStore().prevClients;return this.moveClients(i.map(function(t){var e=t.clientX,i=t.clientY;return{clientX:e+n,clientY:i+r,originalClientX:e,originalClientY:i}}),e,!0)},n.triggerDragStart=function(t){this.onDragStart(t,!1)},n.setEventDatas=function(t){var e=this.datas;for(var n in t)e[n]=t[n];return this},n.getCurrentEvent=function(t){return Ue({datas:this.datas},this._getPosition(),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},n.getEventDatas=function(){return this.datas},n.unset=function(){var t=this,e=this.targets,n=this.options.container;this.off(),lt(window,"blur",this.onBlur),this.isMouse&&(e.forEach(function(e){lt(e,"mousedown",t.onDragStart)}),lt(n,"mousemove",this.onDrag),lt(n,"mouseup",this.onDragEnd),lt(n,"contextmenu",this.onDragEnd)),this.isTouch&&(e.forEach(function(e){lt(e,"touchstart",t.onDragStart)}),lt(n,"touchstart",this.onDragStart),lt(n,"touchmove",this.onDrag),lt(n,"touchend",this.onDragEnd),lt(n,"touchcancel",this.onDragEnd))},n.onPinchStart=function(t){var e=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>e)){var n=new rn(Je(t));this.pinchFlag=!0,this.clientStores.splice(0,0,n),!1===this.emit("pinchStart",Ue({datas:this.datas,angle:n.getAngle(),touches:this.getCurrentStore().getPositions()},n.getPosition(),{inputEvent:t}))&&(this.pinchFlag=!1)}},n.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){var n=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Ue({datas:this.datas,movement:this.getMovement(e),angle:n.getAngle(e),rotation:n.getRotation(e),touches:n.getPositions(e),scale:n.getScale(e),distance:n.getDistance(e)},n.getPosition(e),{inputEvent:t}))}},n.onPinchEnd=function(t){if(this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.getCurrentStore();this.emit("pinchEnd",Ue({datas:this.datas,isPinch:e,touches:n.getPositions()},n.getPosition(),{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}},n.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1},n.getCurrentStore=function(){return this.clientStores[0]},n.moveClients=function(t,e,n){var r=this._getPosition(t,n);return(r.deltaX||r.deltaY)&&(this.isDrag=!0),Ue({datas:this.datas},r,{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},n._getPosition=function(t,e){var n=this.getCurrentStore().getPosition(t,e),r=this.clientStores.slice(1).reduce(function(t,e){var n=e.getPosition();return t.distX+=n.distX,t.distY+=n.distY,t},n),i=r.distX,o=r.distY;return Ue({},n,{distX:i,distY:o})},e}(qe);var sn=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0};function un(t,e,n,r){var i=document.createElement("style");return i.setAttribute("type","text/css"),i.setAttribute("data-styled-id",t),n.nonce&&i.setAttribute("nonce",n.nonce),i.innerHTML=function(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(e,n){var r=n.trim();return(r?F(r):[""]).map(function(e){var n=e.trim();return 0===n.indexOf("@")?n:n.indexOf(":global")>-1?n.replace(/\:global/g,""):n.indexOf(":host")>-1?""+n.replace(/\:host/g,"."+t):n?"."+t+" "+n:"."+t}).join(", ")+" {"})}(t,e,n),(r||document.head||document.body).appendChild(i),i}const ln=function(t){var e,n="rCS"+sn(t).toString(36),r=0;return{className:n,inject:function(i,o){void 0===o&&(o={});var a,s=function(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(i),u=0===r;return(s||u)&&(a=un(n,t,o,s)),u&&(e=a),s||++r,{destroy:function(){s?(i.removeChild(a),a=null):(r>0&&--r,0===r&&e&&(e.parentNode.removeChild(e),e=null))}}}}};var cn=function(t,e){return(cn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function dn(t,e){function n(){this.constructor=t}cn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var fn=function(){return(fn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var pn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.injectResult=null,e.tag="div",e}dn(e,t);var n=e.prototype;return n.render=function(){var t=this.props,e=t.className,n=void 0===e?"":e,r=(t.cspNonce,t.portalContainer),i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["className","cspNonce","portalContainer"]),o=this.injector.className,a=this.tag,s={};return"simple-1.1.0".indexOf("simple")>-1&&r&&(s={portalContainer:r}),Et(a,fn({ref:d(this,"element"),"data-styled-id":o,className:n+" "+o},s,i))},n.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},n.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.getElement=function(){return this.element},e}(kt);const hn=function(t,e){var n=ln(e);return function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.injector=n,r.tag=t,r}return dn(r,e),r}(pn)};var vn=function(t,e){return(vn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function gn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}vn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var mn=function(){return(mn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function bn(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function yn(t,e){var n;return mn({events:{},props:(n={},n[t]=Boolean,n),name:t},e)}var xn=te().browser.webkit,En=xn&&function(){var t="undefined"==typeof window?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return!!e&&parseFloat(e[1])<605}(),Sn="moveable-",Cn="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+function(t){var e=function(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+e+'deg);transform-origin: 16px 16px"></path></svg>'}(1,t),n=45*Math.round(t/45)%180,r="ns-resize";return 135===n?r="nwse-resize":45===n?r="nesw-resize":90===n&&(r="ew-resize"),"cursor:"+r+";cursor: url('"+e+"') 16 16, "+r+";"}(t)+"\n}\n"}).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n"+(En?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n",wn=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Dn=1e-4,Mn=1e-7,Rn=Math.pow(10,10),_n=-Rn,On=["n","w","s","e","nw","ne","sw","se"],Pn={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},kn={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Bn=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate"];function Tn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(e){return e.split(" ").map(function(e){return e?""+t+e:""}).join(" ")}).join(" ")}.apply(void 0,bn([Sn],t))}function zn(t,e,n){return ue(e,we(n,e),t,we(n.map(function(t){return-t}),e))}function jn(t){return Gn(fr(t,":before")).map(function(e,n){var r=L(e),i=r.value,o=r.unit;return i*function(t,e,n){return"%"===e?qn(t.ownerSVGElement)[n?"width":"height"]/100:1}(t,o,0===n)})}function Gn(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function In(t,e,n){for(var r=document.body,i=!t||n?t:t.parentElement,o=t===e||i===e,a="relative";i&&i!==r;){e===i&&(o=!0);var s=fr(i),u=s.transform;if(a=s.position,"svg"===i.tagName.toLowerCase()||"static"!==a||u&&"none"!==u)break;i=i.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!i||i===r,offsetParent:i||r}}function An(t,e,n,r){var i,o=t.tagName.toLowerCase(),a=t.offsetLeft,s=t.offsetTop;if(r){var u=(e||document.documentElement).getBoundingClientRect();a-=u.left,s-=u.top}var l,c,d=P(a),f=!d;return f||"svg"===o?c=(l=Gn(n).map(function(t){return parseFloat(t)})).slice():(c=(l=En?jn(t):Gn(n).map(function(t){return parseFloat(t)})).slice(),f=!0,a=(i=function(t,e){if(!t.getBBox)return[0,0];var n=t.getBBox(),r=qn(t.ownerSVGElement),i=n.x-r.x,o=n.y-r.y;return[i,o,e[0]-i,e[1]-o]}(t,l))[0],s=i[1],l[0]=i[2],l[1]=i[3]),{tagName:o,isSVG:d,hasOffset:f,offset:[a||0,s||0],origin:l,targetOrigin:c}}function Fn(t,e,n){void 0===n&&(n=fr(t));var r=fr(document.body),i=r.position;if(!(e||i&&"static"!==i))return[0,0];var o=parseInt(r.marginLeft,10),a=parseInt(r.marginTop,10);return"absolute"===n.position&&("auto"===n.top&&"auto"===n.bottom||(a=0),"auto"===n.left&&"auto"===n.right||(o=0)),[o,a]}function Nn(t){t.forEach(function(t){var e=t.matrix;e&&(t.matrix=se(e,3,4))})}function Ln(t,e,n){for(var r,i,o,a,s,u,l=t,c=[],d=!n&&t===e,f=d,p=!1,h=3,v=In(e,e,!0).offsetParent;l&&!f;){f=d;var g=fr(l),m=g.position,b="fixed"===m,y=(u=g.transform,a=u&&"none"!==u?k(u)?u:N(u).value.split(/s*,\s*/g).map(function(t){return parseFloat(t)}):[1,0,0,1,0,0],void 0===(s=void 0)&&(s=6===a.length),s?[a[0],a[1],0,a[2],a[3],0,a[4],a[5],1]:a),x=y.length;p||16!==x||(p=!0,h=4,Nn(c),o&&(o=se(o,3,4))),p&&9===x&&(y=se(y,3,4));var E=An(l,e,g,b),S=E.tagName,C=E.hasOffset,w=E.isSVG,D=E.origin,M=E.targetOrigin,R=E.offset,_=R[0],O=R[1];"svg"===S&&o?(c.push({type:"target",target:l,matrix:Wn(l,h)}),c.push({type:"offset",target:l,matrix:Se(h)})):"g"===S&&t!==l&&(_=0,O=0);var P=In(l,e),B=P.offsetParent,T=P.isEnd,z=P.isStatic;xn&&C&&!w&&z&&("relative"===m||"static"===m)&&(_-=B.offsetLeft,O-=B.offsetTop,d=d||T);var j=0,G=0;if(C&&v!==B&&(j=B.clientLeft,G=B.clientTop),C&&B===document.body){var I=Fn(l,!1,g);_+=I[0],O+=I[1]}if(c.push({type:"target",target:l,matrix:zn(y,h,D)}),C?c.push({type:"offset",target:l,matrix:we([_-l.scrollLeft+j,O-l.scrollTop+G],h)}):c.push({type:"offset",target:l,origin:D}),o||(o=y),r||(r=D),i||(i=M),f||b)break;l=B,d=T,n&&l!==document.body||(f=d)}return o||(o=Se(h)),r||(r=[0,0]),i||(i=[0,0]),{offsetContainer:v,matrixes:c,targetMatrix:o,transformOrigin:r,targetOrigin:i,is3d:p}}function Yn(t,e,n,r){var i;void 0===n&&(n=e);var o=0,a=0,s=0,u={};if(t){var l=fr(t);o=t.offsetWidth,a=t.offsetHeight,P(o)&&(o=(i=er(t,l,!0))[0],a=i[1])}if(t){var c=function(t,e,n,r){var i;void 0===n&&(n=e);var o=Ln(t,e),a=o.matrixes,s=o.is3d,u=o.targetMatrix,l=o.transformOrigin,c=o.targetOrigin,d=Ln(o.offsetContainer,n,!0),f=d.matrixes,p=d.is3d,h=r||p||s,v=h?4:3,g="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,m=u,b=Se(v),y=Se(v),x=Se(v),E=Se(v),S=a.length;f.reverse(),a.reverse(),!s&&h&&(m=se(m,3,4),Nn(a));!p&&h&&Nn(f);f.forEach(function(t){y=le(y,t.matrix,v)});var C=n||document.body,w=(null===(i=f[0])||void 0===i?void 0:i.target)||In(C,C,!0).offsetParent,D=f.slice(1).reduce(function(t,e){return le(t,e.matrix,v)},Se(v));a.forEach(function(t,e){if(S-2===e&&(x=b.slice()),S-1===e&&(E=b.slice()),!t.matrix){var n=a[e+1],r=function(t,e,n,r,i){var o,a=t.target,s=t.origin,u=e.matrix,l=er(a,void 0,!0),c=l[0],d=l[1],f=n.getBoundingClientRect(),p=[0,0];n===document.body&&(p=Fn(a,!0));var h=a.getBoundingClientRect(),v=h.left-f.left+n.scrollLeft-(n.clientLeft||0)+p[0],g=h.top-f.top+n.scrollTop-(n.clientTop||0)+p[1],m=h.width,b=h.height,y=ue(r,i,u),x=Kn(y,c,d,r),E=x.left,S=x.top,C=x.width,w=x.height,D=Vn(y,s,r),M=de(D,[E,S]),R=[v+M[0]*m/C,g+M[1]*b/w],_=[0,0],O=0;for(;++O<10;){var P=oe(i,r);o=de(Vn(P,R,r),Vn(P,D,r)),_[0]=o[0],_[1]=o[1];var k=ue(r,i,we(_,r),u),B=Kn(k,c,d,r),T=B.left,z=B.top,j=T-v,G=z-g;if(Math.abs(j)<2&&Math.abs(G)<2)break;R[0]-=j,R[1]-=G}return _.map(function(t){return Math.round(t)})}(t,n,w,v,le(D,b,v));t.matrix=we(r,v)}b=le(b,t.matrix,v)});var M=!g&&s;m||(m=Se(M?4:3));var R=Xn(g&&16===m.length?se(m,4,3):m,M);return{rootMatrix:y=ie(y,v,v),beforeMatrix:x,offsetMatrix:E,allMatrix:b,targetMatrix:m,targetTransform:R,transformOrigin:l,targetOrigin:c,is3d:h}}(t,e,n,r),d=Un(c.allMatrix,c.transformOrigin,o,a);u=mn(mn({},c),d);var f=Un(c.allMatrix,[50,50],100,100);s=nr([f.pos1,f.pos2],f.direction)}var p=r?4:3;return mn({width:o,height:a,rotation:s,rootMatrix:Se(p),beforeMatrix:Se(p),offsetMatrix:Se(p),allMatrix:Se(p),targetMatrix:Se(p),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1},u)}function Xn(t,e){return void 0===e&&(e=t.length>9),(e?"matrix3d":"matrix")+"("+fe(t,!e).join(",")+")"}function qn(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function Wn(t,e){var n=qn(t),r=n.width,i=n.height,o=n.clientWidth,a=n.clientHeight,s=o/r,u=a/i,l=t.preserveAspectRatio.baseVal,c=l.align,d=l.meetOrSlice,f=[0,0],p=[s,u],h=[0,0];if(1!==c){var v=(c-2)%3,g=Math.floor((c-2)/3);f[0]=r*v/2,f[1]=i*g/2;var m=2===d?Math.max(u,s):Math.min(s,u);p[0]=m,p[1]=m,h[0]=(o-r)/2*v,h[1]=(a-i)/2*g}var b=Ce(p,e);return b[e*(e-1)]=h[0],b[e*(e-1)+1]=h[1],zn(b,e,f)}function Vn(t,e,n){return pe(t,ae(e,n),n)}function Hn(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(e){return Vn(t,e,r)})}function $n(t){var e=t.map(function(t){return t[0]}),n=t.map(function(t){return t[1]}),r=Math.min.apply(Math,e),i=Math.min.apply(Math,n),o=Math.max.apply(Math,e),a=Math.max.apply(Math,n);return{left:r,top:i,right:o,bottom:a,width:o-r,height:a-i}}function Kn(t,e,n,r){return $n(Hn(t,e,n,r))}function Un(t,e,n,r){var i=16===t.length?4:3,o=Hn(t,n,r,i),a=o[0],s=a[0],u=a[1],l=o[1],c=l[0],d=l[1],f=o[2],p=f[0],h=f[1],v=o[3],g=v[0],m=v[1],b=Vn(t,e,i),y=b[0],x=b[1],E=Math.min(s,c,p,g),S=Math.min(u,d,h,m),C=Math.max(s,c,p,g),w=Math.max(u,d,h,m);return s=s-E||0,c=c-E||0,p=p-E||0,g=g-E||0,u=u-S||0,d=d-S||0,h=h-S||0,m=m-S||0,{left:E,top:S,right:C,bottom:w,origin:[y=y-E||0,x=x-S||0],pos1:[s,u],pos2:[c,d],pos3:[p,h],pos4:[g,m],direction:nt(o)}}function Zn(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Jn(t,e){return Zn([e[0]-t[0],e[1]-t[1]])}function Qn(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=et(t,e));var i=Jn(t,e);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+r+"rad) scaleY("+n+")",width:i+"px"}}function tr(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length;return{transform:"translateZ(0px) translate("+n.reduce(function(t,e){return t+e[0]},0)/i+"px, "+n.reduce(function(t,e){return t+e[1]},0)/i+"px) rotate("+t+"rad) scale("+e+")"}}function er(t,e,n,r){void 0===e&&(e=fr(t)),void 0===r&&(r=n||"border-box"===e.boxSizing);var i=t.offsetWidth,o=t.offsetHeight,a=!P(i);if((n||r)&&a)return[i,o];if(!a&&"svg"!==t.tagName.toLowerCase()){var s=t.getBBox();return[s.width,s.height]}return i=t.clientWidth,o=t.clientHeight,n||r?[i+(parseFloat(e.borderLeftWidth)||0)+(parseFloat(e.borderRightWidth)||0),o+(parseFloat(e.borderTopWidth)||0)+(parseFloat(e.borderBottomWidth)||0)]:[i-(parseFloat(e.paddingLeft)||0)-(parseFloat(e.paddingRight)||0),o-(parseFloat(e.paddingTop)||0)-(parseFloat(e.paddingBottom)||0)]}function nr(t,e){return et(e>0?t[0]:t[1],e>0?t[1]:t[0])}function rr(t,e,n,r,i){var o=1,a=[0,0],s={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},u={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},l={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},c=Yn(e,n,i,!1);if(e){var d=c.is3d?4:3,f=Un(c.offsetMatrix,ce(c.transformOrigin,function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}(c.targetMatrix,d)),c.width,c.height);o=f.direction,a=ce(f.origin,[f.left-c.left,f.top-c.top]),s=ir(e),u=ir(In(r,r,!0).offsetParent||document.body,!0),t&&(l=ir(t))}return mn({targetClientRect:s,containerClientRect:u,moveableClientRect:l,beforeDirection:o,beforeOrigin:a,originalBeforeOrigin:a,target:e},c)}function ir(t,e){var n=0,r=0,i=0,o=0;if(t===document.body||t===document.documentElement)i=window.innerWidth,o=window.innerHeight,n=-(document.documentElement.scrollLeft||document.body.scrollLeft),r=-(document.documentElement.scrollTop||document.body.scrollTop);else{var a=t.getBoundingClientRect();n=a.left,r=a.top,i=a.width,o=a.height}var s={left:n,right:n+i,top:r,bottom:r+o,width:i,height:o};return e&&(s.clientLeft=t.clientLeft,s.clientTop=t.clientTop,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight,s.overflow="visible"!==fr(t).overflow),s}function or(t){if(t){var e=t.getAttribute("data-direction");if(e){var n=[0,0];return e.indexOf("w")>-1&&(n[0]=-1),e.indexOf("e")>-1&&(n[0]=1),e.indexOf("n")>-1&&(n[1]=-1),e.indexOf("s")>-1&&(n[1]=1),n}}}function ar(t,e){return[ce(e,t[0]),ce(e,t[1]),ce(e,t[2]),ce(e,t[3])]}function sr(t){var e=t.left,n=t.top;return ar([t.pos1,t.pos2,t.pos3,t.pos4],[e,n])}function ur(t,e){var n;null===(n=t[e])||void 0===n||n.unset(),t[e]=null}function lr(t,e,n){var r=e.datas;r.datas||(r.datas={});var i=mn(mn({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:r.datas});return r.isStartEvent?r.lastEvent=i:r.isStartEvent=!0,i}function cr(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),mn(mn({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas})}function dr(t,e,n,r){return t.triggerEvent(e,n,r)}function fr(t,e){return window.getComputedStyle(t,e)}function pr(t,e,n){var r={},i={};return t.filter(function(t){var o=t.name;if(r[o]||!e.some(function(e){return t[e]}))return!1;if(!n&&t.ableGroup){if(i[t.ableGroup])return!1;i[t.ableGroup]=!0}return r[o]=!0,!0})}function hr(t,e){return t===e||null==t&&null==e}function vr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(t,e){return Math.abs(e)-Math.abs(t)}),t[0]}function gr(t,e,n){return pe(oe(t,n),ae(e,n),n)}function mr(t,e){var n,r=t.is3d,i=t.rootMatrix,o=r?4:3;return n=gr(i,[e.distX,e.distY],o),e.distX=n[0],e.distY=n[1],e}function br(t,e,n,r,i){return de(Vn(t,ce(n,e),i),r)}function yr(t,e,n){return n?t/e*100+"%":t+"px"}function xr(t){return Math.abs(t)<=Mn?0:t}function Er(t,e){return e.isRequest?("resizable"===e.requestAble||"scalable"===e.requestAble)&&e.parentDirection:at(e.inputEvent.target,Tn("direction"))}function Sr(t,e){return t?T(t)?e?document.querySelector(t):t:z(t)?t():"current"in t?t.current:t:null}function Cr(t,e){return t?((n=t)&&k(n)&&(B(n)||"length"in n)?[].slice.call(t):[t]).reduce(function(t,n){return T(n)&&e?bn(bn([],t),[].slice.call(document.querySelectorAll(n))):(t.push(Sr(n,e)),t)},[]):[];var n}function wr(t,e){var n=t.rootMatrix,r=t.is3d,i=oe(n,r?4:3);return r||(i=se(i,3,4)),i[12]=0,i[13]=0,i[14]=0,Re(i,e)}var Dr=yn("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,o=e.originalDatas,a=t.props,s=a.pinchable,u=a.ables;if(!s)return!1;var l="onPinch"+(r?"Group":"")+"Start",c="drag"+(r?"Group":"")+"ControlStart",d=(!0===s?t.controlAbles:u.filter(function(t){return s.indexOf(t.name)>-1})).filter(function(t){return t.canPinch&&t[c]}),f=lr(t,e,{});r&&(f.targets=r);var p=dr(t,l,f);n.isPinch=!1!==p,n.ables=d;var h=n.isPinch;return!!h&&(d.forEach(function(n){if(o[n.name]=o[n.name]||{},n[c]){var r=mn(mn({},e),{datas:o[n.name],parentRotate:i,isPinch:!0});n[c](t,r)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},h)},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,o=e.originalDatas,a=e.inputEvent,s=e.targets,u=e.angle;if(n.isPinch){var l=i*(1-1/r),c=lr(t,e,{});s&&(c.targets=s),dr(t,"onPinch"+(s?"Group":""),c);var d=n.ables,f="drag"+(s?"Group":"")+"Control";return d.forEach(function(n){n[f]&&n[f](t,mn(mn({},e),{datas:o[n.name],inputEvent:a,parentDistance:l,parentRotate:u,isPinch:!0}))}),c}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,o=e.targets,a=e.originalDatas;if(n.isPinch){var s="onPinch"+(o?"Group":"")+"End",u=cr(t,e,{isDrag:r});o&&(u.targets=o),dr(t,s,u);var l=n.ables,c="drag"+(o?"Group":"")+"ControlEnd";return l.forEach(function(n){n[c]&&n[c](t,mn(mn({},e),{isDrag:r,datas:a[n.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,mn(mn({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,mn(mn({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,mn(mn({},e),{targets:t.props.targets}))}});function Mr(t,e,n,r,i){var o=e.gesto.move(n,t.inputEvent),a=o.originalDatas||o.datas,s=a.draggable||(a.draggable={});return mn(mn({},i?mr(e,o):o),{isDrag:!0,isPinch:!!r,parentEvent:!0,datas:s,originalDatas:t.originalDatas})}var Rr=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var e=t.prototype;return e.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var n=e.originalDatas;return this.datas=n,n.draggable||(n.draggable={}),mn(mn({},this.move(t,e.inputEvent)),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var n,r;return this.isFlag?(n=this.prevX+t[0],r=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],r=t[1],this.isFlag=!0),this.prevX=n,this.prevY=r,{type:"drag",clientX:n,clientY:r,inputEvent:e,isDrag:this.isDrag,distX:n-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function _r(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return t.moveables.map(function(t,r){return o[r]=o[r]||{},o[r][e]=o[r][e]||{},mn(mn({},n),{datas:o[r][e],originalDatas:o[r]})})}function Or(t,e,n,r,i,o){var a=!!n.match(/Start$/g),s=!!n.match(/End$/g),u=i.isPinch,l=i.datas,c=_r(t,e.name,i),d=t.moveables,f=c.map(function(t,i){var c=d[i],f=t;a?f=(new Rr).dragStart(r,t):(c.state.gesto||(c.state.gesto=l.childGestos[i]),f=Mr(t,c.state,r,u,o));var p=e[n](c,mn(mn({},f),{parentFlag:!0}));return s&&(c.state.gesto=null),p});return a&&(l.childGestos=d.map(function(t){return t.state.gesto})),f}function Pr(t,e,n,r,i,o){void 0===i&&(i=function(t,e){return e});var a=!!n.match(/End$/g),s=_r(t,e.name,r),u=t.moveables;return s.map(function(t,r){var s,l=u[r];s=i(l,t);var c=e[n](l,mn(mn({},s),{parentFlag:!0}));return c&&o&&o(l,t,c,r),a&&(l.state.gesto=null),c})}function kr(t,e){var n=e.clientX,r=e.clientY,i=e.datas,o=t.state,a=o.moveableClientRect,s=o.rootMatrix,u=o.is3d,l=o.pos1,c=de(gr(s,[n-a.left,r-a.top],u?4:3),l),d=Ar({datas:i,distX:c[0],distY:c[1]});return[d[0],d[1]]}function Br(t,e){var n=e.datas,r=t.state,i=r.allMatrix,o=r.beforeMatrix,a=r.is3d,s=r.left,u=r.top,l=r.origin,c=r.offsetMatrix,d=r.targetMatrix,f=r.transformOrigin,p=a?4:3;n.is3d=a,n.matrix=i,n.targetMatrix=d,n.beforeMatrix=o,n.offsetMatrix=c,n.transformOrigin=f,n.inverseMatrix=oe(i,p),n.inverseBeforeMatrix=oe(o,p),n.absoluteOrigin=ae(ce([s,u],l),p),n.startDragBeforeDist=pe(n.inverseBeforeMatrix,n.absoluteOrigin,p),n.startDragDist=pe(n.inverseMatrix,n.absoluteOrigin,p)}function Tr(t,e){var n=t.datas,r=t.originalDatas.beforeRenderable,i=n.transformIndex,o=r.nextTransforms,a=r.nextTransformAppendedIndexes,s=0;-1===i?(s=o.length,n.transformIndex=s):s=i+a.filter(function(t){return t<i}).length;var u=function(t,e){var n=t.slice(0,e<0?void 0:e),r=t.slice(0,e<0?void 0:e+1),i=t[e]||"",o=e<0?[]:t.slice(e),a=e<0?[]:t.slice(e+1),s=Oe(n),u=Oe(r),l=Oe([i]),c=Oe(o),d=Oe(a),f=_e(s),p=_e(u),h=_e(c),v=_e(d),g=le(f,h,4);return{transforms:t,beforeFunctionMatrix:f,beforeFunctionMatrix2:p,targetFunctionMatrix:_e(l),afterFunctionMatrix:h,afterFunctionMatrix2:v,allFunctionMatrix:g,beforeFunctions:s,beforeFunctions2:u,targetFunction:l[0],afterFunctions:c,afterFunctions2:d,beforeFunctionTexts:n,beforeFunctionTexts2:r,targetFunctionText:i,afterFunctionTexts:o,afterFunctionTexts2:a}}(o,s),l=u.targetFunction,c="rotate"===e?"rotateZ":e;n.beforeFunctionTexts=u.beforeFunctionTexts,n.afterFunctionTexts=u.afterFunctionTexts,n.beforeTransform=u.beforeFunctionMatrix,n.beforeTransform2=u.beforeFunctionMatrix2,n.targetTansform=u.targetFunctionMatrix,n.afterTransform=u.afterFunctionMatrix,n.afterTransform2=u.afterFunctionMatrix2,n.targetAllTransform=u.allFunctionMatrix,l.functionName===c?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):(n.isAppendTransform=!0,r.nextTransformAppendedIndexes=bn(bn([],a),[s]))}function zr(t,e,n){return t.beforeFunctionTexts.join(" ")+" "+(t.isAppendTransform?n:e)+" "+t.afterFunctionTexts.join(" ")}function jr(t){var e=t.datas,n=Ir({datas:e,distX:t.distX,distY:t.distY});return pe(Gr(e,function(t,e){for(var n=Se(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}([n[0],n[1]],4)),ae([0,0,0],4),4)}function Gr(t,e,n){var r=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,a=t.afterTransform2,s=t.targetAllTransform,u=n?le(s,e,4):le(e,s,4);return le(le(oe(n?o:r,4),u,4),oe(n?a:i,4),4)}function Ir(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,o=e.is3d,a=e.startDragBeforeDist,s=e.absoluteOrigin,u=o?4:3;return de(pe(i,ce(s,[n,r]),u),a)}function Ar(t,e){var n=t.datas,r=t.distX,i=t.distY,o=n.inverseBeforeMatrix,a=n.inverseMatrix,s=n.is3d,u=n.startDragBeforeDist,l=n.startDragDist,c=n.absoluteOrigin,d=s?4:3;return de(pe(e?o:a,ce(c,[r,i]),d),e?u:l)}function Fr(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Nr(t,e){return Fr(e).map(function(e){return t[e]})}function Lr(t,e){var n=Nr(t,e);return[tt(n.map(function(t){return t[0]})),tt(n.map(function(t){return t[1]}))]}function Yr(t,e,n,r){return le(t,zn(e,r,n),r)}function Xr(t){var e=t.originalDatas.beforeRenderable;return{setTransform:function(n,r){void 0===r&&(r=-1),e.startTransforms=B(n)?n:A(n),Wr(t,r)},setTransformIndex:function(e){Wr(t,e)}}}function qr(t,e){Wr(t,W(t.originalDatas.beforeRenderable.startTransforms,function(t){return 0===t.indexOf(e+"(")}))}function Wr(t,e){var n=t.originalDatas.beforeRenderable,r=t.datas;if(r.transformIndex=e,-1!==e){var i=n.startTransforms[e];if(i){var o=Oe([i]);r.startValue=o[0].functionValue}}}function Vr(t,e){t.originalDatas.beforeRenderable.nextTransforms=A(e)}function Hr(t){return t.originalDatas.beforeRenderable.nextTransforms.join(" ")}function $r(t,e,n,r,i){return Vr(i,e),{transform:e,drag:Qi.drag(t,Mr(i,t.state,n,r,!1))}}function Kr(t,e,n,r,i){var o=t.state,a=o.left,s=o.top,u=t.props.groupable,l=function(t,e,n){var r=t.transformOrigin,i=t.offsetMatrix,o=t.is3d,a=e.beforeTransform,s=e.afterTransform,u=o?4:3;return Yr(i,se(le(le(a,Me([n]),4),s,4),4,u),r,u)}(t.state,i,e),c=u?a:0,d=u?s:0;return de(de(r,Zr(t,n,l)),[c,d])}function Ur(t){var e=t.state,n=e.width,r=e.height,i=e.transformOrigin;return[i[0]/(n/2)-1,i[1]/(r/2)-1]}function Zr(t,e,n){void 0===n&&(n=t.state.allMatrix);var r=t.state,i=r.width,o=r.height,a=r.is3d?4:3;return Vn(n,[i/2*(1+e[0]),o/2*(1+e[1])],a)}function Jr(t,e,n,r,i,o){var a=t.props.groupable,s=t.state,u=s.transformOrigin,l=s.targetMatrix,c=s.offsetMatrix,d=s.is3d,f=s.width,p=s.height,h=s.left,v=s.top,g=d?4:3,m=function(t,e,n,r,i,o){return void 0===r&&(r=e),void 0===i&&(i=n),void 0===o&&(o=[0,0]),t?t.map(function(t,a){var s=L(t),u=s.value,l=s.unit,c=a?i:r,d=a?n:e;return"%"===t||isNaN(u)?d*(c?o[a]/c:0):"%"!==l?u:d*u/100}):o}(o,e,n,f,p,u),b=a?h:0,y=a?v:0;return de(function(t,e,n,r,i,o){var a=Lr(Hn(e,n,r,i),o);return[t[0]-a[0],t[1]-a[1]]}(i,Yr(c,l,m,g),e,n,g,r),[b,y])}function Qr(t,e){return Lr(sr(t.state),e)}var ti=["left","right","center"],ei=["top","bottom","middle"],ni={start:"left",end:"right",center:"center"},ri={start:"top",end:"bottom",center:"middle"};function ii(t,e){var n=t.props,r=n.snappable,i=n.bounds,o=n.innerBounds,a=n.verticalGuidelines,s=n.horizontalGuidelines,u=n.snapGridWidth,l=n.snapGridHeight,c=t.state,d=c.guidelines,f=c.enableSnap;return!(!r||!f||e&&!0!==r&&r.indexOf(e)<0)&&!!(u||l||i||o||d&&d.length||a&&a.length||s&&s.length)}function oi(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function ai(t,e){var n=function(t,e){var n=oi(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}(t,e),r=ei.filter(function(t){return t in n}),i=ti.filter(function(t){return t in n});return{horizontal:r.map(function(t){return n[t]}),vertical:i.map(function(t){return n[t]})}}function si(t,e,n,r,i,o,a){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a={left:0,top:0,right:0,bottom:0});var s=[],u=a.left,l=a.top,c=a.bottom,d=n+a.right-u,f=r+c-l;return t&&t.forEach(function(t){s.push({type:"horizontal",pos:[u,it(t-o+l,.1)],size:d})}),e&&e.forEach(function(t){s.push({type:"vertical",pos:[it(t-i+u,.1),l],size:f})}),s}function ui(t,e){if(!e.length)return[];var n=t.state,r=n.containerClientRect,i=n.targetClientRect,o=i.top,a=i.left,s=n.rootMatrix,u=n.is3d?4:3,l=function(t,e,n){var r=Vn(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}(s,r,u),c=l[0],d=l[1],f=Ge(sr(n)),p=de([f.minX,f.minY],gr(s,[a-c,o-d],u)).map(function(t){return e=t,Math.round(e%1==-.5?e-1:e);var e}),h=p[0],v=p[1];return e.map(function(t){var e=t.element.getBoundingClientRect(),n=e.left-c,r=e.top-d,i=r+e.height,o=n+e.width,a=gr(s,[n,r],u),l=a[0],f=a[1],p=gr(s,[o,i],u),g=p[0],m=p[1];return mn(mn({},t),{rect:{left:l+h,right:g+h,top:f+v,bottom:m+v,center:(l+g)/2+h,middle:(f+m)/2+v}})})}function li(t){var e=t.state,n=e.snapOffset,r=e.containerClientRect,i=r.overflow,o=r.scrollHeight,a=r.scrollWidth,s=r.clientHeight,u=r.clientWidth,l=r.clientLeft,c=r.clientTop,d=t.props,f=d.snapGap,p=void 0===f||f,h=d.verticalGuidelines,v=d.horizontalGuidelines,g=d.snapThreshold,m=void 0===g?5:g,b=d.snapGridWidth,y=void 0===b?0:b,x=d.snapGridHeight,E=void 0===x?0:x,S=bn([],function(t){var e=t.state,n=t.props.elementGuidelines,r=void 0===n?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(t){return!t.refresh}),o=r.map(function(t){return k(t)&&"element"in t?t:{element:Sr(t,!0)}}).filter(function(t){return t.element}),a=Be(i.map(function(t){return t.element}),o.map(function(t){return t.element})),s=a.maintained,u=a.added,l=[];s.forEach(function(t){var e=t[0],n=t[1];l[n]=i[e]}),ui(t,u.map(function(t){return o[t]})).map(function(t,e){l[u[e]]=t}),e.elementRects=l;var c=oi(t.props.elementSnapDirections),d=[];return l.forEach(function(t){var e=t.element,n=t.top,r=void 0===n?c.top:n,i=t.left,o=void 0===i?c.left:i,a=t.right,s=void 0===a?c.right:a,u=t.bottom,l=void 0===u?c.bottom:u,f=t.center,p=void 0===f?c.center:f,h=t.middle,v=void 0===h?c.middle:h,g=t.className,m=t.rect,b=ai({top:r,right:s,left:o,bottom:l,center:p,middle:v},m),y=b.horizontal,x=b.vertical,E=m.top,S=m.left,C=m.right-S,w=m.bottom-E,D=[C,w];x.forEach(function(n){d.push({type:"vertical",element:e,pos:[it(n,.1),E],size:w,sizes:D,className:g,elementRect:t})}),y.forEach(function(n){d.push({type:"horizontal",element:e,pos:[S,it(n,.1)],size:C,sizes:D,className:g,elementRect:t})})}),d}(t));if(p){var C=$n(sr(t.state)),w=C.top,D=C.left,M=C.bottom,R=C.right;S.push.apply(S,function(t,e,n){var r=t.state.elementRects,i=[];return[["vertical",ni,ri],["horizontal",ri,ni]].forEach(function(t){var o=t[0],a=t[1],s=t[2],u=e[a.start],l=e[a.end],c=e[a.center],d=e[s.start],f=e[s.end];function p(t){var e=t.rect;return e[a.end]<u+n?u-e[a.end]:l-n<e[a.start]?e[a.start]-l:-1}var h=r.filter(function(t){var e=t.rect;return!(e[s.start]>f||e[s.end]<d)&&p(t)>0}).sort(function(t,e){return p(t)-p(e)}),v=[];h.forEach(function(t){h.forEach(function(e){if(t!==e){var n=t.rect,r=e.rect,i=n[s.start],o=n[s.end],a=r[s.start];i>r[s.end]||a>o||v.push([t,e])}})}),v.forEach(function(t){var e=t[0],r=t[1],s=e.rect,d=r.rect,f=s[a.start],p=s[a.end],h=d[a.start],v=d[a.end],g=0,m=0,b=!1,y=!1,x=!1;if(p<=u&&l<=h){if(y=!0,m=p+(g=(h-p-(l-u))/2)+(l-u)/2,Math.abs(m-c)>n)return}else if(p<h&&v<u+n){if(b=!0,m=v+(g=h-p),Math.abs(m-u)>n)return}else{if(!(p<h&&l-n<f))return;if(x=!0,m=f-(g=h-p),Math.abs(m-l)>n)return}g&&i.push({type:o,pos:"vertical"===o?[m,0]:[0,m],element:r.element,size:0,className:r.className,isStart:b,isCenter:y,isEnd:x,gap:g,hide:!0,gapRects:[e,r]})})}),i}(t,{top:w,left:D,bottom:M,right:R,center:(D+R)/2,middle:(w+M)/2},m))}return S.push.apply(S,function(t,e,n,r,i,o){void 0===i&&(i=0);void 0===o&&(o=0);var a=[];if(e)for(var s=0;s<=r;s+=e)a.push({type:"horizontal",pos:[0,it(s-o,.1)],size:n,hide:!0});if(t)for(var s=0;s<=n;s+=t)a.push({type:"vertical",pos:[it(s-i,.1),0],size:r,hide:!0});return a}(y,E,i?a:u,i?o:s,l,c)),S.push.apply(S,si(v||!1,h||!1,i?a:u,i?o:s,l,c,n)),S}function ci(t,e,n,r){var i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!P(i))return i}return t[n]}(r,t.props.snapThreshold,5);return di(t.state.guidelines,e,n,i)}function di(t,e,n,r){return{vertical:hi(t,"vertical",e,r),horizontal:hi(t,"horizontal",n,r)}}function fi(t,e,n){var r=ai(t.props.snapDirections,e);return ci(t,r.vertical,r.horizontal,n)}function pi(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,o=r.dist,a=r.guideline;return{isSnap:e,offset:i,dist:o,pos:n.pos,guideline:a}}function hi(t,e,n,r){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var i="vertical"===e?0:1,o=n.map(function(n,o){var a=t.map(function(t){var e=t.pos,r=n-e[i];return{offset:r,dist:Math.abs(r),guideline:t}}).filter(function(t){var n=t.guideline,i=t.dist;return!(n.type!==e||i>r)}).sort(function(t,e){return t.dist-e.dist});return{pos:n,index:o,guidelineInfos:a}}).filter(function(t){return t.guidelineInfos.length>0}).sort(function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist}),a=o.length>0;return{isSnap:a,index:a?o[0].index:-1,posInfos:o}}function vi(t,e){var n=Math.abs(t.offset),r=Math.abs(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap?1:n<Mn?1:r<Mn?-1:n-r}function gi(t,e){return t.slice().sort(function(t,n){var r=t.sign[e],i=n.sign[e],o=t.offset[e],a=n.offset[e];return r?i?vi({isBound:t.isBound,isSnap:t.isSnap,offset:o},{isBound:n.isBound,isSnap:n.isSnap,offset:a}):-1:1})[0]}function mi(t,e){var n=tt([e[0][0],e[1][0]]),r=tt([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function bi(t,e){var n,r,i=e[0],o=e[1],a=o[0]-i[0],s=o[1]-i[1];if(Math.abs(a)<Mn&&(a=0),Math.abs(s)<Mn&&(s=0),a)if(s){n=s/a*(t[0]-i[0])+i[1],r=t[1]}else n=i[1],r=t[1];else n=i[0],r=t[0];return n-r}function yi(t,e,n){void 0===n&&(n=Mn);var r=bi(t[0],e)<=0;return t.slice(1).every(function(t){var i=bi(t,e);return i<=0===r||Math.abs(i)<=n})}function xi(t,e,n,r,i){return void 0===i&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function Ei(t,e,n,r,i){var o=t[0],a=t[1],s=e[0],u=e[1],l=xr(a[1]-o[1]),c=xr(a[0]-o[0]),d=xr(u[1]-s[1]);if(!xr(u[0]-s[0])){if(i&&!l)return{isBound:!1,offset:0};if(c)return xi(l/c*(s[0]-o[0])+o[1],s[1],u[1],n,r);var f=s[0]-o[0];return{isBound:p=Math.abs(f)<=(r||0),offset:p?f:0}}if(!d){if(i&&!c)return{isBound:!1,offset:0};if(l)return xi((s[1]-o[1])/(l/c)+o[0],s[0],u[0],n,r);var p;f=s[1]-o[1];return{isBound:p=Math.abs(f)<=(r||0),offset:p?f:0}}return{isBound:!1,offset:0}}function Si(t,e,n,r){return e.map(function(e){var i=e[0],o=e[1],a=e[2],s=function(t,e,n){var r=t.props.innerBounds;if(!r)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var i=r.left,o=r.top,a=r.width,s=r.height,u=[[i,o],[i,o+s]],l=[[i,o],[i+a,o]],c=[[i+a,o],[i+a,o+s]],d=[[i,o+s],[i+a,o+s]],f=mi(n,e),p=f.horizontal,h=f.vertical;if(yi([n,[i,o],[i+a,o],[i,o+s],[i+a,o+s]],e))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var v=Ei(e,l,h),g=Ei(e,d,h),m=Ei(e,u,p),b=Ei(e,c,p),y=v.isBound&&g.isBound,x=v.isBound||g.isBound,E=m.isBound&&b.isBound,S=m.isBound||b.isBound,C=vr(v.offset,g.offset),w=vr(m.offset,b.offset),D=[0,0],M=!1,R=!1;return Math.abs(w)<Math.abs(C)?(D=[C,0],M=x,R=y):(D=[0,w],M=S,R=E),{isAllBound:R,isVerticalBound:x,isHorizontalBound:S,isBound:M,offset:D}}(t,[o,a],n),u=s.isBound,l=s.offset,c=s.isVerticalBound,d=s.isHorizontalBound,f=Ar({datas:r,distX:l[0],distY:l[1]}).map(function(t,e){return t*(i[e]?2/i[e]:0)});return{sign:i,isBound:u,isVerticalBound:c,isHorizontalBound:d,isSnap:!1,offset:f}})}function Ci(t,e,n){var r,i=Si(t,wi(e,[0,0],!1).map(function(t){var e=t[0],n=t[1],r=t[2];return[e.map(function(t){return 2*Math.abs(t)}),n,r]}),Lr(e,[0,0]),n),o=gi(i,0),a=gi(i,1),s=0,u=0,l=o.isVerticalBound||a.isVerticalBound,c=o.isHorizontalBound||a.isHorizontalBound;return(l||c)&&(s=(r=function(t,e){var n=t.datas,r=t.distX,i=t.distY,o=n.beforeMatrix,a=n.matrix,s=n.is3d,u=n.startDragBeforeDist,l=n.startDragDist,c=n.absoluteOrigin,d=s?4:3;return de(pe(e?o:a,ce(e?u:l,[r,i]),d),c)}({datas:n,distX:-o.offset[0],distY:-a.offset[1]}))[0],u=r[1]),{vertical:{isBound:l,offset:s},horizontal:{isBound:c,offset:u}}}function wi(t,e,n){return function(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,2*i],t,[-r,i]],[[2*r,0],t,[r,-i]]):r?(n.push([[2*r,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,2*i],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}(e,n).map(function(e){var n=e[0],r=e[1],i=e[2];return[n,Lr(t,r),Lr(t,i)]})}function Di(t,e,n,r){var i=r?t.map(function(t){return be(t,r)}):t,o=bn([n],e);return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(t){return!yi(o,t)})}function Mi(t,e,n,r,i){var o=t.props.innerBounds,a=i*Math.PI/180;if(!o)return[];var s=o.left,u=o.top,l=o.width,c=o.height,d=s-r[0],f=s+l-r[0],p=u-r[1],h=u+c-r[1],v=[[d,p],[f,p],[d,h],[f,h]],g=Lr(n,[0,0]);if(!Di(n,v,g,0))return[];var m=[],b=v.map(function(t){return[Zn(t),et([0,0],t)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(t){var n=et([0,0],function(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];if(!r)return[e[0],0];if(!i)return[0,e[1]];var o=i/r,a=-o*e[0]+e[1];return[-a/(o+1/o),a/(o*o+1)]}(t)),r=function(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];if(!r)return Math.abs(e[0]);if(!i)return Math.abs(e[1]);var o=i/r;return Math.abs((-o*e[0]+e[1])/Math.sqrt(Math.pow(o,2)+1))}(t);m.push.apply(m,b.filter(function(t){var e=t[0];return e&&r<=e}).map(function(t){var e=t[0],i=t[1],o=Math.acos(e?r/e:0);return[a+(i+o)-n,a+(i-o)-n]}).reduce(function(t,e){return t.push.apply(t,e),t},[]).filter(function(t){return!Di(e,v,g,t)}).map(function(t){return it(180*t/Math.PI,Mn)}))}),m}function Ri(t,e,n){var r=t||{},i=r.position,o=void 0===i?"client":i,a=r.left,s=void 0===a?-1/0:a,u=r.top,l=void 0===u?-1/0:u,c=r.right,d=void 0===c?1/0:c,f=r.bottom,p={position:o,left:s,top:l,right:d,bottom:void 0===f?1/0:f};return{vertical:Oi(p,e,!0),horizontal:Oi(p,n,!1)}}function _i(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,o=r.clientWidth,a=r.clientLeft,s=r.clientTop,u=n.snapOffset,l=u.left,c=u.top,d=u.right,f=u.bottom,p=e||t.props.bounds||{},h="css"===(p.position||"client"),v=p.left,g=void 0===v?-1/0:v,m=p.top,b=void 0===m?-1/0:m,y=p.right,x=void 0===y?h?-1/0:1/0:y,E=p.bottom,S=void 0===E?h?-1/0:1/0:E;return h&&(x=o+d-l-x,S=i+f-c-S),{left:g+l-a,right:x+l-a,top:b+c-s,bottom:S+c-s}}function Oi(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],o=Math.min.apply(Math,e),a=Math.max.apply(Math,e),s=[];return r+1>o&&s.push({isBound:!0,offset:o-r,pos:r}),i-1<a&&s.push({isBound:!0,offset:a-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(t,e){return Math.abs(e.offset)-Math.abs(t.offset)})}function Pi(t,e,n){return(n?t.map(function(t){return be(t,n)}):t).some(function(t){return t[0]<e.left&&Math.abs(t[0]-e.left)>.1||t[0]>e.right&&Math.abs(t[0]-e.right)>.1||t[1]<e.top&&Math.abs(t[1]-e.top)>.1||t[1]>e.bottom&&Math.abs(t[1]-e.bottom)>.1})}function ki(t,e,n,r,i){if(!t.props.bounds)return[];var o=i*Math.PI/180,a=_i(t),s=a.left,u=a.top,l=a.right,c=a.bottom,d=s-r[0],f=l-r[0],p=u-r[1],h=c-r[1],v={left:d,top:p,right:f,bottom:h};if(!Pi(n,v,0))return[];var g=[];return[[d,0],[f,0],[p,1],[h,1]].forEach(function(t){var r=t[0],i=t[1];n.forEach(function(t){var n=et([0,0],t);g.push.apply(g,function(t,e,n){var r=Zn(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(e,r){return Math.abs(e-t[n?0:1])-Math.abs(r-t[n?0:1])}).map(function(t){return et([0,0],n?[t,e]:[e,t])})}(t,r,i).map(function(t){return o+t-n}).filter(function(t){return!Pi(e,v,t)}).map(function(t){return it(180*t/Math.PI,Mn)}))})}),g}function Bi(t,e){return function(t,e){var n,r=t.direction,i=t.classNames,o=t.size,a=t.pos,s=t.zoom,u=t.key,l="horizontal"===r,c=l?"Y":"X";return e.createElement("div",{key:u,className:i.join(" "),style:(n={},n[l?"width":"height"]=""+o,n.transform="translate("+a[0]+", "+a[1]+") translate"+c+"(-50%) scale"+c+"("+s+")",n)})}(mn(mn({},t),{classNames:bn([Tn("line","guideline",t.direction)],t.classNames).filter(function(t){return t}),size:t.size||t.sizeValue+"px",pos:t.pos||t.posValue.map(function(t){return it(t,.1)+"px"})}),e)}function Ti(t,e,n,r,i,o,a,s){var u=t.props.zoom;return n.map(function(t,n){var l=t.type,c=t.pos,d=[0,0];return d[a]=r,d[a?0:1]=-i+c,Bi({key:e+"TargetGuideline"+n,classNames:[Tn("target","bold",l)],posValue:d,sizeValue:o,zoom:u,direction:e},s)})}function zi(t,e,n,r,i,o){var a=t.props,s=a.zoom,u=a.isDisplayInnerSnapDigit,l="horizontal"===e?ni:ri,c=i[l.start],d=i[l.end];return n.filter(function(t){var e=t.hide,n=t.elementRect;if(e)return!1;if(u&&n){var r=n.rect;if(r[l.start]<=c&&d<=r[l.end])return!1}return!0}).map(function(t,n){var i=t.pos,a=t.size,u=t.element,l=[-r[0]+i[0],-r[1]+i[1]];return Bi({key:e+"-default-guideline-"+n,classNames:u?[Tn("bold")]:[],direction:e,posValue:l,sizeValue:a,zoom:s},o)})}function ji(t,e,n,r,i,o,a,s){var u,l=t.props,c=l.snapDigit,d=void 0===c?0:c,f=l.isDisplaySnapDigit,p=void 0===f||f,h=l.snapDistFormat,v=void 0===h?function(t){return t}:h,g=l.zoom,m="horizontal"===e?"X":"Y",b="vertical"===e?"height":"width",y=Math.abs(i),x=p?parseFloat(y.toFixed(d)):0;return s.createElement("div",{key:e+"-"+n+"-guideline-"+r,className:Tn("guideline-group",e),style:(u={left:o[0]+"px",top:o[1]+"px"},u[b]=y+"px",u)},Bi({direction:e,classNames:[Tn(n),a],size:"100%",posValue:[0,0],sizeValue:y,zoom:g},s),s.createElement("div",{className:Tn("size-value","gap"),style:{transform:"translate"+m+"(-50%) scale("+g+")"}},x>0?v(x):""))}function Gi(t,e,n,r,i){var o=t.props.isDisplayInnerSnapDigit,a=[];return["vertical","horizontal"].forEach(function(s){var u=e.filter(function(t){return t.type===s}),l="vertical"===s?1:0,c=l?0:1,d=function(t,e,n,r){var i,o,a,s,u="vertical"===t?0:1,l="vertical"===t?1:0,c=u?ni:ri,d=n[c.start],f=n[c.end];return(i=e,o=function(t){return t.pos[u]},a=[],s=[],i.forEach(function(t,e){var n=o(t,e,i),r=s.indexOf(n),u=a[r]||[];-1===r&&(s.push(n),a.push(u)),u.push(t)}),a).map(function(e){var n=[],i=[];return e.forEach(function(e){var o,a,s=e.element,p=e.elementRect.rect;if(p[c.end]<d)n.push(e);else if(f<p[c.start])i.push(e);else if(p[c.start]<=d&&f<=p[c.end]&&r){var h=e.pos,v={element:s,rect:mn(mn({},p),(o={},o[c.end]=p[c.start],o))},g={element:s,rect:mn(mn({},p),(a={},a[c.start]=p[c.end],a))},m=[0,0],b=[0,0];m[u]=h[u],m[l]=h[l],b[u]=h[u],b[l]=h[l]+e.size,n.push({type:t,pos:m,size:0,elementRect:v}),i.push({type:t,pos:b,size:0,elementRect:g})}}),n.sort(function(t,e){return e.pos[l]-t.pos[l]}),i.sort(function(t,e){return t.pos[l]-e.pos[l]}),{total:e,start:n,end:i,inner:[]}})}(s,u,r,o),f=l?ri:ni,p=l?ni:ri,h=r[f.start],v=r[f.end];d.forEach(function(e){var o=e.total,u=e.start,d=e.end,g=e.inner,m=n[c]+o[0].pos[c]-r[p.start],b=r;u.forEach(function(e){var r=e.elementRect.rect,o=b[f.start]-r[f.end];if(o>0){var u=[0,0];u[l]=n[l]+b[f.start]-h-o,u[c]=m,a.push(ji(t,s,"dashed",a.length,o,u,e.className,i))}b=r}),b=r,d.forEach(function(e){var r=e.elementRect.rect,o=r[f.start]-b[f.end];if(o>0){var u=[0,0];u[l]=n[l]+b[f.end]-h,u[c]=m,a.push(ji(t,s,"dashed",a.length,o,u,e.className,i))}b=r}),g.forEach(function(e){var r=e.elementRect.rect,o=h-r[f.start],u=r[f.end]-v,d=[0,0],p=[0,0];d[l]=n[l]-o,d[c]=m,p[l]=n[l]+v-h,p[c]=m,a.push(ji(t,s,"dashed",a.length,o,d,e.className,i)),a.push(ji(t,s,"dashed",a.length,u,p,e.className,i))})})}),a}function Ii(t,e,n,r,i){var o=function(t,e,n,r){var i=e[0]-t[0],o=e[1]-t[1];if(Math.abs(i)<_&&(i=0),Math.abs(o)<_&&(o=0),!i)return r?[0,0]:[0,n];if(!o)return r?[n,0]:[0,0];var a=o/i,s=t[1]-a*t[0];return r?[n,a*(e[0]+n)+s-e[1]]:[(e[1]+n-s)/a-e[0],n]}(t,e,n,r);if(!o)return{isOutside:!1,offset:[0,0]};var a=rt(t,e),s=rt(o,t),u=rt(o,e),l=s>a||u>a,c=Ar({datas:i,distX:o[0],distY:o[1]});return{offset:[c[0],c[1]],isOutside:l}}function Ai(t,e){return t.isBound?t.offset:e.isSnap?pi(e).offset:0}function Fi(t,e,n,r,i,o){if(!ii(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=ar(o.absolutePoses,[e,n]),s=$n(a),u=s.left,l=s.right,c=s.top,d=s.bottom,f={horizontal:a.map(function(t){return t[1]}),vertical:a.map(function(t){return t[0]})},p=Ni(t,i,ai(oi(t.props.snapDirections),{left:u,right:l,top:c,bottom:d,center:(u+l)/2,middle:(c+d)/2}),f),h=p.vertical,v=p.horizontal,g=Ci(t,a,o),m=g.vertical,b=g.horizontal,y=h.isSnap,x=v.isSnap,E=h.isBound||m.isBound,S=v.isBound||b.isBound,C=function(t,e,n,r,i){var o=e[0],a=e[1],s=n[0],u=n[1],l=r[0],c=r[1],d=i[0],f=i[1],p=-d,h=-f;if(t&&o&&a){p=0,h=0;var v=[];if(s&&u?v.push([0,f],[d,0]):s?v.push([d,0]):u?v.push([0,f]):l&&c?v.push([0,f],[d,0]):l?v.push([d,0]):c&&v.push([0,f]),v.length){v.sort(function(t,e){return Zn(de([o,a],t))-Zn(de([o,a],e))});var g=v[0];if(g[0]&&Math.abs(o)>_)p=-g[0],h=a*Math.abs(o+p)/Math.abs(o)-a;else if(g[1]&&Math.abs(a)>_){var m=a;h=-g[1],p=o*Math.abs(a+h)/Math.abs(m)-o}if(t&&u&&s)if(Math.abs(p)>_&&Math.abs(p)<Math.abs(d))p*=b=Math.abs(d)/Math.abs(p),h*=b;else if(Math.abs(h)>_&&Math.abs(h)<Math.abs(f)){var b;p*=b=Math.abs(f)/Math.abs(h),h*=b}else p=vr(-d,p),h=vr(-f,h)}}else p=o||s?-d:0,h=a||u?-f:0;return[p,h]}(r,[e,n],[E,S],[y,x],[vr(h.offset,m.offset),vr(v.offset,b.offset)]);return[{isBound:E,isSnap:y,offset:C[0]},{isBound:S,isSnap:x,offset:C[1]}]}function Ni(t,e,n,r){void 0===r&&(r=n);var i=Ri(_i(t),r.vertical,r.horizontal),o=i.horizontal,a=i.vertical,s=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:ci(t,n.vertical,n.horizontal),u=s.horizontal,l=s.vertical,c=Ai(o[0],u),d=Ai(a[0],l),f=Math.abs(c),p=Math.abs(d);return{horizontal:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:f,bounds:o,snap:u},vertical:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:d,dist:p,bounds:a,snap:l}}}function Li(t,e,n,r,i){var o=Ri(e,n,r),a=o.horizontal,s=o.vertical,u=di(t,n,r,i),l=u.horizontal,c=u.vertical,d=Ai(a[0],l),f=Ai(s[0],c),p=Math.abs(d),h=Math.abs(f);return{horizontal:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:d,dist:p,bounds:a,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:h,bounds:s,snap:c}}}function Yi(t,e,n,r,i,o){return n.map(function(n){var a=n[0],s=n[1],u=Lr(e,a),l=Lr(e,s),c=r?function(t,e,n,r){var i=function(t,e,n){var r=_i(t),i=r.left,o=r.top,a=r.right,s=r.bottom,u=n[0],l=n[1],c=de(n,e),d=c[0],f=c[1];Math.abs(d)<Mn&&(d=0),Math.abs(f)<Mn&&(f=0);var p=f>0,h=d>0,v={isBound:!1,offset:0,pos:0},g={isBound:!1,offset:0,pos:0};if(0===d&&0===f)return{vertical:v,horizontal:g};if(0===d)p?s<l&&(g.pos=s,g.offset=l-s):o>l&&(g.pos=o,g.offset=l-o);else if(0===f)h?a<u&&(v.pos=a,v.offset=u-a):i>u&&(v.pos=i,v.offset=u-i);else{var m=f/d,b=n[1]-m*u,y=0,x=0,E=!1;h&&a<=u?(y=m*a+b,x=a,E=!0):!h&&u<=i&&(y=m*i+b,x=i,E=!0),E&&(y<o||y>s)&&(E=!1),E||(p&&s<=l?(x=((y=s)-b)/m,E=!0):!p&&l<=o&&(x=((y=o)-b)/m,E=!0)),E&&(v.isBound=!0,v.pos=x,v.offset=u-x,g.isBound=!0,g.pos=y,g.offset=l-y)}return{vertical:v,horizontal:g}}(t,e,n),o=i.horizontal,a=i.vertical,s=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,n){var r=n[0],i=n[1],o=e[0],a=e[1],s=de(n,e),u=s[0],l=s[1],c=l>0,d=u>0;u=xr(u),l=xr(l);var f={isSnap:!1,offset:0,pos:0},p={isSnap:!1,offset:0,pos:0};if(0===u&&0===l)return{vertical:f,horizontal:p};var h=ci(t,u?[r]:[],l?[i]:[]),v=h.vertical,g=h.horizontal;v.posInfos.filter(function(t){var e=t.pos;return d?e>=o:e<=o}),g.posInfos.filter(function(t){var e=t.pos;return c?e>=a:e<=a}),v.isSnap=v.posInfos.length>0,g.isSnap=g.posInfos.length>0;var m=pi(v),b=m.isSnap,y=m.guideline,x=pi(g),E=x.isSnap,S=x.guideline,C=E?S.pos[1]:0,w=b?y.pos[0]:0;if(0===u)E&&(p.isSnap=!0,p.pos=S.pos[1],p.offset=i-p.pos);else if(0===l)b&&(f.isSnap=!0,f.pos=w,f.offset=r-w);else{var D=l/u,M=n[1]-D*r,R=0,_=0,O=!1;b?(R=D*(_=w)+M,O=!0):E&&(_=((R=C)-M)/D,O=!0),O&&(f.isSnap=!0,f.pos=_,f.offset=r-_,p.isSnap=!0,p.pos=R,p.offset=i-R)}return{vertical:f,horizontal:p}}(t,e,n),u=s.horizontal,l=s.vertical,c=Xi(o,u),d=Xi(a,l),f=Math.abs(c),p=Math.abs(d);return{horizontal:{isBound:o.isBound,isSnap:u.isSnap,offset:c,dist:f},vertical:{isBound:a.isBound,isSnap:l.isSnap,offset:d,dist:p}}}(t,u,l,i):Ni(t,i,{vertical:[l[0]],horizontal:[l[1]]}),d=c.horizontal,f=d.offset,p=d.isBound,h=d.isSnap,v=c.vertical,g=v.offset,m=v.isBound,b=v.isSnap,y=de(s,a);if(!g&&!f)return{isBound:m||p,isSnap:b||h,sign:y,offset:[0,0]};var x=function(t,e,n,r){var i=et(t,e)/Math.PI*180,o=n.vertical,a=o.isBound,s=o.isSnap,u=o.dist,l=n.horizontal,c=l.isBound,d=l.isSnap,f=l.dist,p=i%180,h=p<3||p>177,v=p>87&&p<93;return f<u&&(a||s&&!v&&(!r||!h))?"vertical":!c&&(!d||h||r&&v)?"":"horizontal"}(u,l,c,r);if(!x)return{sign:y,isBound:!1,isSnap:!1,offset:[0,0]};var E="vertical"===x,S=Ii(u,l,-(E?g:f),E,o).offset.map(function(t,e){return t*(y[e]?2/y[e]:0)});return{sign:y,isBound:E?m:p,isSnap:E?b:h,offset:S}})}function Xi(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function qi(t){var e=t.state;if(!e.guidelines||!e.guidelines.length){var n=t.state.container,r=t.props.snapContainer||n,i=e.containerClientRect,o={left:0,top:0,bottom:0,right:0};if(n!==r){var a=Sr(r,!0);if(a){var s=ir(a),u=wr(e,[s.left-i.left,s.top-i.top]),l=wr(e,[s.right-i.right,s.bottom-i.bottom]);o.left=it(u[0],.1),o.top=it(u[1],.1),o.right=it(l[0],.1),o.bottom=it(l[1],.1)}}e.snapOffset=o,e.guidelines=li(t),e.enableSnap=!0}}function Wi(t,e,n,r,i,o){var a=Hn(t,e,n,o?4:3);return ar(a,de(r,function(t,e){return Lr(t,e.map(function(t){return-t}))}(a,i)))}function Vi(t,e,n,r,i,o){var a=function(t,e){var n=[],r=[-t[0],-t[1]];return t[0]&&t[1]?(n.push([r,[t[0],-t[1]]],[r,[-t[0],t[1]]]),e&&n.push([r,t])):t[0]?e?n.push([r,[r[0],-1]],[r,[r[0],1]],[r,[t[0],-1]],[r,t],[r,[t[0],1]]):n.push([[r[0],-1],[t[0],-1]],[[r[0],0],[t[0],0]],[[r[0],1],[t[0],1]]):t[1]?e?n.push([r,[-1,r[1]]],[r,[1,r[1]]],[r,[-1,t[1]]],[r,[1,t[1]]],[r,t]):n.push([[-1,r[1]],[-1,t[1]]],[[0,r[1]],[0,t[1]]],[[1,r[1]],[1,t[1]]]):n.push([r,[1,0]],[r,[-1,0]],[r,[0,-1]],[r,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),n}(n,r),s=wi(e,n,r),u=bn(bn([],Yi(t,e,a,r,i,o)),Si(t,s,Lr(e,[0,0]),o)),l=gi(u,0),c=gi(u,1);return{width:{isBound:l.isBound,offset:l.offset[0]},height:{isBound:c.isBound,offset:c.offset[1]}}}function Hi(t,e,n,r,i,o,a,s){for(var u=sr(t.state),l=t.props.keepRatio,c=0,d=0,f=0;f<2;++f){var p=Vi(t,e(c,d),i,l,a,s),h=p.width,v=p.height,g=h.isBound,m=v.isBound,b=h.offset,y=v.offset;if(1===f&&(g||(b=0),m||(y=0)),0===f&&a&&!g&&!m)return[0,0];if(l){var x=Math.abs(b)*(n?1/n:1),E=Math.abs(y)*(r?1/r:1);(g&&m?x<E:m||!g&&x<E)?b=n*y/r:y=r*b/n}c+=b,d+=y}if(i[0]&&i[1]){var S=function(t,e,n,r,i){var o=[-n[0],-n[1]],a=t.state,s=a.width,u=a.height,l=t.props.bounds,c=1/0,d=1/0;if(l){var f=[[n[0],-n[1]],[-n[0],n[1]]],p=l.left,h=void 0===p?-1/0:p,v=l.top,g=void 0===v?-1/0:v,m=l.right,b=void 0===m?1/0:m,y=l.bottom,x=void 0===y?1/0:y;f.forEach(function(t){var n=t[0]!==o[0],a=t[1]!==o[1],l=Lr(e,t),f=360*et(r,l)/Math.PI;if(a){var p=l.slice();(Math.abs(f-360)<2||Math.abs(f-180)<2)&&(p[1]=r[1]);var v=Ii(r,p,(r[1]<l[1]?x:g)-l[1],!1,i),m=v.offset[1],y=v.isOutside;isNaN(m)||(d=u+(y?1:-1)*Math.abs(m))}if(n){p=l.slice(),(Math.abs(f-90)<2||Math.abs(f-270)<2)&&(p[0]=r[0]);var E=Ii(r,p,(r[0]<l[0]?b:h)-l[0],!0,i),S=E.offset[0],C=E.isOutside;isNaN(S)||(c=s+(C?1:-1)*Math.abs(S))}})}return{maxWidth:c,maxHeight:d}}(t,u,i,o,s),C=S.maxWidth,w=S.maxHeight,D=function(t,e,n,r,i,o,a,s,u){var l=Lr(e,a),c=Ni(t,s,{vertical:[l[0]],horizontal:[l[1]]}),d=c.horizontal.offset,f=c.vertical.offset;if(f||d){var p=Ar({datas:u,distX:-f,distY:-d}),h=p[0],v=p[1];return[Math.min(i||1/0,n+a[0]*h)-n,Math.min(o||1/0,r+a[1]*v)-r]}return[0,0]}(t,e(c,d).map(function(t){return t.map(function(t){return it(t,Dn)})}),n+c,r+d,C,w,i,a,s);c+=b=D[0],d+=y=D[1]}return[c,d]}function $i(t,e,n,r){if(!ii(t,"rotatable"))return r;var i=e.pos1,o=e.pos2,a=e.pos3,s=e.pos4,u=r*Math.PI/180,l=[i,o,a,s].map(function(t){return de(t,n)}),c=l.map(function(t){return be(t,u)}),d=bn(bn([],ki(t,l,c,n,r)),Mi(t,l,c,n,r));return d.sort(function(t,e){return Math.abs(t-r)-Math.abs(e-r)}),d.length?d[0]:r}function Ki(t,e,n,r,i){var o=i.width,a=i.height,s=i.fixedPosition;if(!ii(t,"scalable"))return[0,0];var u=i.is3d,l=Hi(t,function(t,r){return Wi(function(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,o=t.targetMatrix,a=i?4:3;return Yr(r,le(o,Ce(e,a),a),n,a)}(i,ce(e,[t/o,r/a])),o,a,s,n,u)},o,a,n,s,r,i);return[l[0]/o,l[1]/a]}function Ui(t){var e=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){var n=t.guideline;e.indexOf(n)>-1||e.push(n)})}),e}function Zi(t,e,n,r,i,o){var a=Ri(_i(t,o),e,n),s=a.vertical,u=a.horizontal;s.forEach(function(t){t.isBound&&r.push({type:"bounds",pos:t.pos})}),u.forEach(function(t){t.isBound&&i.push({type:"bounds",pos:t.pos})});var l=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),r=n.pos1,i=n.pos2,o=n.pos3,a=n.pos4,s=Lr([r,i,o,a],[0,0]),u=e.left,l=e.top,c=e.width,d=e.height,f=[[u,l],[u,l+d]],p=[[u,l],[u+c,l]],h=[[u+c,l],[u+c,l+d]],v=[[u,l+d],[u+c,l+d]],g=[],m=[],b={top:!1,bottom:!1,left:!1,right:!1};return[[r,i],[i,a],[a,o],[o,r]].forEach(function(t){var e=mi(s,t),n=e.horizontal,r=e.vertical,i=Ei(t,p,r,1,!0),o=Ei(t,v,r,1,!0),a=Ei(t,f,n,1,!0),y=Ei(t,h,n,1,!0);i.isBound&&!b.top&&(g.push(l),b.top=!0),o.isBound&&!b.bottom&&(g.push(l+d),b.bottom=!0),a.isBound&&!b.left&&(m.push(u),b.left=!0),y.isBound&&!b.right&&(m.push(u+c),b.right=!0)}),{horizontal:g,vertical:m}}(t),c=l.vertical,d=l.horizontal;c.forEach(function(t){W(r,function(e){var n=e.type,r=e.pos;return"bounds"===n&&r===t})>=0||r.push({type:"bounds",pos:t})}),d.forEach(function(t){W(i,function(e){var n=e.type,r=e.pos;return"bounds"===n&&r===t})>=0||i.push({type:"bounds",pos:t})})}var Ji={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,e){var n=t.state,r=n.top,i=n.left,o=n.pos1,a=n.pos2,s=n.pos3,u=n.pos4,l=n.snapRenderInfo;if(!l||!ii(t,""))return[];n.guidelines=li(t);var c=Math.min(o[0],a[0],s[0],u[0]),d=Math.min(o[1],a[1],s[1],u[1]),f=l.externalPoses||[],p=sr(t.state),h=[],v=[],g=[],m=[],b=[],y=$n(p),x=y.width,E=y.height,S=y.top,C=y.left,w=y.bottom,D=y.right,M={left:C,right:D,top:S,bottom:w,center:(C+D)/2,middle:(S+w)/2},R=f.length>0,_=R?$n(f):{};if(!l.request){if(l.direction&&b.push(function(t,e,n){var r=[];if(n[0]&&n[1])r=[n,[-n[0],n[1]],[n[0],-n[1]]].map(function(t){return Lr(e,t)});else if(n[0]||n[1])t.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],n].map(function(t){return Lr(e,t)}):(r=Nr(e,n)).length>1&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]);else for(var i=[e[0],e[1],e[3],e[2],e[0]],o=0;o<4;++o)r.push(i[o]),r.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return ci(t,r.map(function(t){return t[0]}),r.map(function(t){return t[1]}),1)}(t,p,l.direction)),l.snap){var O=$n(p);l.center&&(O.middle=(O.top+O.bottom)/2,O.center=(O.left+O.right)/2),b.push(fi(t,O,1))}R&&(l.center&&(_.middle=(_.top+_.bottom)/2,_.center=(_.left+_.right)/2),b.push(fi(t,_,1))),b.forEach(function(t){var e=t.vertical.posInfos,n=t.horizontal.posInfos;h.push.apply(h,e.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),v.push.apply(v,n.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),g.push.apply(g,Ui(e)),m.push.apply(m,Ui(n))})}Zi(t,[C,D],[S,w],h,v),R&&Zi(t,[_.left,_.right],[_.top,_.bottom],h,v,l.externalBounds);var P=bn(bn([],g),m),k=P.filter(function(t){return t.element&&!t.gapRects}),B=P.filter(function(t){return t.gapRects});return dr(t,"onSnap",{guidelines:P.filter(function(t){return!t.element}),elements:k,gaps:B},!0),bn(bn(bn(bn(bn(bn([],Gi(t,k,[c,d],M,e)),function(t,e,n,r,i){var o=[];return["horizontal","vertical"].forEach(function(a){var s=e.filter(function(t){return t.type===a}),u="vertical"===a?0:1,l=u?0:1,c=u?ri:ni,d=u?ni:ri,f=r[c.start],p=r[c.end],h=r[d.start],v=r[d.end];s.forEach(function(e){var r=e.gap,a=e.gapRects,s=e.className,g=Math.max.apply(Math,bn([h],a.map(function(t){return t.rect[d.start]}))),m=Math.min.apply(Math,bn([v],a.map(function(t){return t.rect[d.end]}))),b=(g+m)/2;g!==m&&b!==(h+v)/2&&a.forEach(function(e){var a=e.rect,d=[n[0],n[1]];if(a[c.end]<f)d[u]+=a[c.end]-f;else{if(!(p<a[c.start]))return;d[u]+=a[c.start]-f-r}d[l]+=b-h,o.push(ji(t,u?"vertical":"horizontal","gap",o.length,r,d,s,i))})})}),o}(t,B,[c,d],M,e)),zi(t,"horizontal",m,[i,r],M,e)),zi(t,"vertical",g,[i,r],M,e)),Ti(t,"horizontal",v,c,r,x,0,e)),Ti(t,"vertical",h,d,i,E,1,e))},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},qi(t)},drag:function(t){t.state.guidelines=li(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!(!Er(0,e)&&!uo(t,e))||(!e.isRequest&&e.inputEvent?at(e.inputEvent.target,Tn("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,qi(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,qi(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}},Qi={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,e){var n=t.props,r=n.throttleDragRotate,i=n.zoom,o=t.state,a=o.dragInfo,s=o.beforeOrigin;if(!r||!a)return[];var u=a.dist;if(!u[0]&&!u[1])return[];var l=Zn(u),c=et(u,[0,0]);return[e.createElement("div",{className:Tn("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:l+"px",transform:"translate("+s[0]+"px, "+s[1]+"px) rotate("+c+"rad) scaleY("+i+")"}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,o=t.state,a=o.target;if(o.gesto)return!1;o.gesto=i||t.targetGesto;var s=fr(a);n.datas={},n.left=parseFloat(s.left||"")||0,n.top=parseFloat(s.top||"")||0,n.bottom=parseFloat(s.bottom||"")||0,n.right=parseFloat(s.right||"")||0,n.startValue=[0,0],Br(t,e),qr(e,"translate"),function(t,e){e.absolutePoses=sr(t.state)}(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0],n.distOffset=[0,0];var u=lr(t,e,mn({set:function(t){n.startValue=t}},Xr(e)));return!1!==(r||dr(t,"onDragStart",u))?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.gesto=null,n.isPinch=!1),!!n.isDrag&&u},drag:function(t,e){if(e){Tr(e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,o=e.isPinch,a=e.isRequest,s=e.distX,u=e.distY,l=n.isDrag,c=n.prevDist,d=n.prevBeforeDist,f=n.startValue,p=n.distOffset;if(l){s+=p[0],u+=p[1];var h=t.props,v=h.parentMoveable,g=r?0:h.throttleDrag||0,m=r?0:h.throttleDragRotate||0,b=!1,y=0;if(!r&&m>0&&(s||u)){var x=h.startDragRotate||0,E=it(x+180*et([0,0],[s,u])/Math.PI,m)-x,S=u*Math.abs(Math.cos((E-90)/180*Math.PI)),C=Zn([s*Math.abs(Math.cos(E/180*Math.PI)),S]);y=E*Math.PI/180,s=C*Math.cos(y),u=C*Math.sin(y)}if(!o&&!r&&!i&&(!m||s||u)){var w=Fi(t,s,u,m,a,n),D=w[0],M=w[1],R=D.isSnap,_=D.isBound,O=D.offset,P=M.isSnap,k=M.isBound,B=M.offset;b=R||P||_||k,s+=O,u+=B}var T=ce(Ir({datas:n,distX:s,distY:u}),f),z=ce(jr({datas:n,distX:s,distY:u}),f);m||b||(ot(z,g),ot(T,g));var j=de(T,f),G=de(z,f),I=de(G,c),A=de(j,d);n.prevDist=G,n.prevBeforeDist=j,n.passDelta=I,n.passDist=G;var F=n.left+j[0],N=n.top+j[1],L=n.right-j[0],Y=n.bottom-j[1],X=zr(n,"translate("+z[0]+"px, "+z[1]+"px)","translate("+G[0]+"px, "+G[1]+"px)");if(Vr(e,X),t.state.dragInfo.dist=r?[0,0]:G,r||v||!I.every(function(t){return!t})||!A.some(function(t){return!t})){var q=t.state,W=lr(t,e,{transform:X,dist:G,delta:I,translate:z,beforeDist:j,beforeDelta:A,beforeTranslate:T,left:F,top:N,right:L,bottom:Y,width:q.width,height:q.height,isPinch:o});return!r&&dr(t,"onDrag",W),W}}}},dragAfter:function(t,e){var n=e.datas,r=e.datas,i=r.deltaOffset,o=r.distOffset;return!(!i[0]&&!i[1])&&(n.deltaOffset=[0,0],o[0]=i[0],o[1]=i[1],this.drag(t,e))},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.gesto=null,t.state.dragInfo=null,r.isDrag){r.isDrag=!1;var i=cr(t,e,{});return!n&&dr(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var a=Or(t,this,"dragStart",[r||0,i||0],e,!1),s=dr(t,"onDragGroupStart",mn(mn({},o),{targets:t.props.targets,events:a}));return n.isDrag=!1!==s,!!n.isDrag&&o},dragGroup:function(t,e){if(e.datas.isDrag){var n=this.drag(t,e),r=Or(t,this,"drag",e.datas.passDelta,e,!1);if(n){var i=mn({targets:t.props.targets,events:r},n);return dr(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,e){var n=e.isDrag;if(e.datas.isDrag){this.dragEnd(t,e);var r=Or(t,this,"dragEnd",[0,0],e,!1);return dr(t,"onDragGroupEnd",cr(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(t){return"x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-n.top:"deltaY"in t&&(i+=t.deltaY),{datas:e,distX:r,distY:i}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function to(t,e,n,r){void 0===r&&(r="");var i=t.state,o=i.renderPoses,a=i.rotation,s=i.direction,u=t.props,l=u.renderDirections,c=void 0===l?e:l,d=u.zoom,f={};if(!c)return[];var p=s>0?1:-1,h=!0===c?On:c,v=a/Math.PI*180;return h.forEach(function(t){f[t]=!0}),h.map(function(t){var e=Pn[t];if(!e||!f[t])return null;var i=(it(v,15)+p*kn[t]+720)%180;return n.createElement("div",{className:Tn("control","direction",t,r),"data-rotation":i,"data-direction":t,key:"direction-"+t,style:tr.apply(void 0,bn([a,d],e.map(function(t){return o[t]})))})})}function eo(t,e,n,r,i,o){for(var a=[],s=6;s<arguments.length;s++)a[s-6]=arguments[s];var u=et(n,r),l=e?it(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line"+o,className:Tn.apply(void 0,bn(["line","direction",e],a)),"data-rotation":l,"data-line-index":o,"data-direction":e,style:Qn(n,r,i,u)})}function no(t,e){return to(t,On,e)}function ro(t,e){return to(t,["nw","ne","sw","se"],e)}function io(t,e,n,r,i,o){var a=t.state.is3d?4:3,s=Vn(t.state.rootMatrix,i,a),u=ce([o.left,o.top],s);e.startAbsoluteOrigin=u,e.prevDeg=et(u,[n,r])/Math.PI*180,e.prevSnapDeg=e.prevDeg,e.startDeg=e.prevDeg,e.loop=0}function oo(t,e,n,r,i,o){var a=n.prevDeg,s=$i(t,e,n.origin,r);return n.prevDeg=s,[s-a,s,o+s]}function ao(t,e,n,r,i,o,a,s){var u=n.prevDeg,l=n.prevSnapDeg,c=n.startDeg,d=n.loop;u>r&&u>270&&r<90?++n.loop:u<r&&u<90&&r>270&&--n.loop;var f=n.loop,p=360*d+l-c+o,h=360*f+r-c+o;n.prevDeg=h-360*f+c-o;var v=i*((h=it(h,a))-o);return s&&(h=(v=$i(t,e,n.origin,v))/i+o),n.prevSnapDeg=h-360*f+c-o,[i*(h-p),v,o+v]}function so(t,e,n,r,i,o,a,s){return ao(t,e,n,et(n.startAbsoluteOrigin,[i,o])/Math.PI*180,r,a,s,!0)}function uo(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var n=e.inputEvent.target;if(at(n,Tn("rotation-control")))return!0;var r=t.props.rotationTarget;return!!r&&Cr(r,!0).some(function(t){return!!t&&(n===t||n.contains(t))})}var lo={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object},events:{onRotateStart:"rotateStart",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".rotation {\n            position: absolute;\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% 100%;\n            height: calc(40px * var(--zoom));\n            top: auto;\n            left: 0;\n            bottom: 100%;\n            will-change: transform;\n        }\n        .rotation .rotation-line {\n            display: block;\n            width: 100%;\n            height: 100%;\n            transform-origin: 50% 50%;\n        }\n        .rotation .rotation-control {\n            border-color: #4af;\n            border-color: var(--moveable-color);\n            background:#fff;\n            cursor: alias;\n        }"],render:function(t,e){var n=t.props,r=n.rotatable,i=n.rotationPosition,o=n.zoom,a=n.renderDirections,s=t.state,u=s.renderPoses,l=s.direction;if(!r)return null;var c=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];if("none"!==t){var s=(t||"top").split("-"),u=s[0],l=s[1],c=[r,i];"left"===u?c=[o,r]:"right"===u?c=[i,a]:"bottom"===u&&(c=[a,o]);var d=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2],f=nr(c,n);if(l){var p="top"===l||"left"===l,h="bottom"===u||"left"===u;d=c[p&&!h||!p&&h?0:1]}return[d,f]}}(i,u,l),d=[];if(c){var f=c[0],p=c[1];d.push(e.createElement("div",{key:"rotation",className:Tn("rotation"),style:{transform:"translate(-50%) translate("+f[0]+"px, "+f[1]+"px) rotate("+p+"rad)"}},e.createElement("div",{className:Tn("line rotation-line"),style:{transform:"scaleX("+o+")"}}),e.createElement("div",{className:Tn("control rotation-control"),style:{transform:"translate(0.5px) scale("+o+")"}})))}return a&&d.push.apply(d,to(t,[],e)),d},dragControlCondition:uo,dragControlStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,o=e.parentRotate,a=e.parentFlag,s=e.isPinch,u=e.isRequest,l=t.state,c=l.target,d=l.left,f=l.top,p=l.origin,h=l.beforeOrigin,v=l.direction,g=l.beforeDirection,m=l.targetTransform,b=l.moveableClientRect;if(!u&&!c)return!1;var y=t.getRect();if(n.rect=y,n.transform=m,n.left=d,n.top=f,n.fixedPosition=Zr(t,Ur(t)),n.absoluteInfo={origin:y.origin,startValue:y.rotation},io(t,n.absoluteInfo,r,i,p,b),u||s||a){var x=o||0;n.beforeInfo={origin:y.beforeOrigin,prevDeg:x,startDeg:x,prevSnapDeg:x,loop:0},n.afterInfo={origin:y.origin,prevDeg:x,startDeg:x,prevSnapDeg:x,loop:0}}else n.beforeInfo={origin:y.beforeOrigin},n.afterInfo={origin:y.origin},io(t,n.beforeInfo,r,i,h,b),io(t,n.afterInfo,r,i,p,b);n.direction=v,n.beforeDirection=g,n.startValue=0,n.datas={},qr(e,"rotate");var E=lr(t,e,mn(mn({set:function(t){n.startValue=t*Math.PI/180}},Xr(e)),{dragStart:Qi.dragStart(t,(new Rr).dragStart([0,0],e))})),S=dr(t,"onRotateStart",E);return n.isRotate=!1!==S,t.state.snapRenderInfo={request:e.isRequest},!!n.isRotate&&E},dragControl:function(t,e){var n,r,i,o,a,s,u,l,c,d=e.datas,f=e.clientX,p=e.clientY,h=e.parentRotate,v=e.parentFlag,g=e.isPinch,m=e.groupDelta,b=d.beforeDirection,y=d.beforeInfo,x=d.afterInfo,E=d.absoluteInfo,S=d.isRotate,C=d.startValue,w=d.rect;if(S){Tr(e,"rotate");var D,M,R,_,O,P,k,B,T,z=b*function(t){return Un(t.datas.beforeTransform,[50,50],100,100).direction}(e),j=t.props,G=j.throttleRotate,I=void 0===G?0:G,A=j.parentMoveable,F=180/Math.PI*C,N=E.startValue;if(!v&&"parentDist"in e){var L=e.parentDist;D=(n=oo(t,w,x,L,0,F))[0],M=n[1],R=n[2],_=(r=oo(t,w,y,L,0,F))[0],O=r[1],P=r[2],k=(i=oo(t,w,E,L,0,N))[0],B=i[1],T=i[2]}else g||v?(D=(o=ao(t,w,x,h,z,F,I))[0],M=o[1],R=o[2],_=(a=ao(t,w,y,h,b,F,I))[0],O=a[1],P=a[2],k=(s=ao(t,w,E,h,z,N,I))[0],B=s[1],T=s[2]):(D=(u=so(t,w,x,z,f,p,F,I))[0],M=u[1],R=u[2],_=(l=so(t,w,y,b,f,p,F,I))[0],O=l[1],P=l[2],k=(c=so(t,w,E,z,f,p,N,I))[0],B=c[1],T=c[2]);if(k||D||_||A){var Y=zr(d,"rotate("+R+"deg)","rotate("+M+"deg)"),X=function(t,e,n,r){return Kr(t,"rotate("+e+"deg)",Ur(t),n,r)}(t,M,d.fixedPosition,d),q=de(ce(m||[0,0],X),d.prevInverseDist||[0,0]);d.prevInverseDist=X;var W=lr(t,e,mn({delta:D,dist:M,rotate:R,beforeDist:O,beforeDelta:_,beforeRotate:P,absoluteDist:B,absoluteDelta:k,absoluteRotate:T,isPinch:!!g},$r(t,Y,q,g,e)));return dr(t,"onRotate",W),W}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=cr(t,e,{});return dr(t,"onRotateEnd",r),r}},dragGroupControlCondition:uo,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,o=r.top,a=r.beforeOrigin,s=this.dragControlStart(t,e);if(!s)return!1;s.set(n.beforeDirection*t.rotation);var u=Pr(t,this,"dragControlStart",e,function(t,e){var n=t.state,r=n.left,s=n.top,u=n.beforeOrigin,l=ce(de([r,s],[i,o]),de(u,a));return e.datas.groupClient=l,mn(mn({},e),{parentRotate:0})}),l=dr(t,"onRotateGroupStart",mn(mn({},s),{targets:t.props.targets,events:u}));return n.isRotate=!1!==l,!!n.isRotate&&s},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,o=r.beforeDist,a=r.beforeDelta/180*Math.PI,s=Pr(t,this,"dragControl",e,function(t,e){var n=e.datas.groupClient,r=n[0],s=n[1],u=be([r,s],a*i),l=u[0],c=u[1],d=[l-r,c-s];return e.datas.groupClient=[l,c],mn(mn({},e),{parentRotate:o,groupDelta:d})});t.rotation=i*r.beforeRotate;var u=mn({targets:t.props.targets,events:s,set:function(e){t.rotation=e}},r);return dr(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isRotate){this.dragControlEnd(t,e);var r=Pr(t,this,"dragControlEnd",e);return dr(t,"onRotateGroupEnd",cr(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaRotate"in t?n+=t.deltaRotate:"rotate"in t&&(n=t.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},co={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean},events:{onResizeStart:"resizeStart",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,e){var n=t.props,r=n.resizable,i=n.edge;if(r)return i?ro(t,e):no(t,e)},dragControlCondition:Er,dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,o=e.parentDirection,a=e.datas,s=e.parentFlag,u=o||(i?[0,0]:or(r.target)),l=t.state,c=l.target,d=l.width,f=l.height;if(!u||!c)return!1;!i&&Br(t,e),a.datas={},a.direction=u,a.startOffsetWidth=d,a.startOffsetHeight=f,a.prevWidth=0,a.prevHeight=0,n=function(t){var e=fr(t);return[parseFloat(e.width),parseFloat(e.height)]}(c),a.startWidth=n[0],a.startHeight=n[1];var p=[Math.max(0,d-a.startWidth),Math.max(0,f-a.startHeight)];if(a.minSize=p,a.maxSize=[1/0,1/0],!s){var h=fr(c),v=h.position,g=h.minWidth,m=h.minHeight,b=h.maxWidth,y=h.maxHeight,x="static"===v||"relative"===v,E=x?c.parentElement:c.offsetParent,S=d,C=f;if(E&&(S=E.clientWidth,C=E.clientHeight,x)){var w=fr(E);S-=parseFloat(w.paddingLeft)||0,C-=parseFloat(w.paddingTop)||0}a.minSize=ce([U(g,S)||0,U(m,C)||0],p),a.maxSize=ce([U(b,S)||1/0,U(y,C)||1/0],p)}var D=t.props.transformOrigin||"% %";function M(t){a.ratio=t&&isFinite(t)?t:0}function R(e){a.fixedDirection=e,a.fixedPosition=Qr(t,e)}a.transformOrigin=D&&T(D)?D.split(" "):D,a.isWidth=!u[0]&&!u[1]||u[0]||!u[1],M(d/f),R([-u[0],-u[1]]);var _=lr(t,e,{direction:u,set:function(t){var e=t[0],n=t[1];a.startWidth=e,a.startHeight=n},setMin:function(t){a.minSize=t},setMax:function(t){a.maxSize=[t[0]||1/0,t[1]||1/0]},setRatio:M,setFixedDirection:R,setOrigin:function(t){a.transformOrigin=t},dragStart:Qi.dragStart(t,(new Rr).dragStart([0,0],e))});return!1!==dr(t,"onResizeStart",_)&&(a.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:u}),!!a.isResize&&_},dragControl:function(t,e){var n,r=e.datas,i=e.distX,o=e.distY,a=e.parentFlag,s=e.isPinch,u=e.parentDistance,l=e.parentScale,c=e.parentKeepRatio,d=e.dragClient,f=e.parentDist,p=e.isRequest,h=r.isResize,v=r.transformOrigin,g=r.fixedDirection,m=r.startWidth,b=r.startHeight,y=r.prevWidth,x=r.prevHeight,E=r.minSize,S=r.maxSize,C=r.ratio,w=r.isWidth,D=r.startOffsetWidth,M=r.startOffsetHeight;if(h){var R=t.props,_=R.throttleResize,O=void 0===_?0:_,P=R.parentMoveable,k=R.snapThreshold,B=void 0===k?5:k,T=r.direction,z=T,j=0,G=0;T[0]||T[1]||(z=[1,1]);var I=C&&(t.props.keepRatio||c),A=d;if(d||(A=!a&&s?Qr(t,[0,0]):r.fixedPosition),f)j=f[0],G=f[1],I&&(j?G||(G=j/C):j=G*C);else if(l)j=(l[0]-1)*D,G=(l[1]-1)*M;else if(s)u&&(j=u,G=u*M/D);else{var F=Ar({datas:r,distX:i,distY:o});if(j=z[0]*F[0],G=z[1]*F[1],I&&D&&M){var N=et([0,0],F),L=et([0,0],z),Y=Zn([j,G]),X=Math.cos(N-L)*Y;if(z[0])if(z[1]){var q=2*z[0]*D,W=2*z[1]*M,V=Zn([q+F[0],W+F[1]])-Zn([q,W]),H=et([0,0],[C,1]);j=Math.cos(H)*V,G=Math.sin(H)*V}else G=(j=X)*C;else j=(G=X)/C}else if(!I){var $=bn([],T);D||(F[0]<0?$[0]=-1:F[0]>0&&($[0]=1)),M||(F[1]<0?$[1]=-1:F[1]>0&&($[1]=1)),T=$,j=(z=$)[0]*F[0],G=z[1]*F[1]}}var K=z[0]||I?Math.max(D+j,Mn):D,U=z[1]||I?Math.max(M+G,Mn):M;I&&D&&M&&(w?U=K/C:K=U*C);var Z=[0,0];if(s||(Z=function(t,e,n,r,i,o,a){if(!ii(t,"resizable"))return[0,0];var s=t.state,u=s.allMatrix,l=s.is3d;return Hi(t,function(t,o){return Wi(u,e+t,n+o,i,r,l)},e,n,r,i,o,a)}(t,K,U,T,A,p,r)),f&&(!f[0]&&(Z[0]=0),!f[1]&&(Z[1]=0)),I){z[0]&&z[1]&&Z[0]&&Z[1]&&(Math.abs(Z[0])>Math.abs(Z[1])?Z[1]=0:Z[0]=0);var J=!Z[0]&&!Z[1];J&&(w?K=it(K,O):U=it(U,O)),z[0]&&!z[1]||Z[0]&&!Z[1]||J&&w?U=(K+=Z[0])/C:(!z[0]&&z[1]||!Z[0]&&Z[1]||J&&!w)&&(K=(U+=Z[1])*C)}else D+j<-B&&(Z[0]=0),D+G<-B&&(Z[1]=0),K+=Z[0],U+=Z[1],Z[0]||(K=it(K,O)),Z[1]||(U=it(U,O));K=(n=Q([K,U],E,S,I))[0],U=n[1],K=Math.round(K),U=Math.round(U);var tt=[(j=K-D)-y,(G=U-M)-x];r.prevWidth=j,r.prevHeight=G;var nt=Jr(t,K,U,g,A,v);if(P||!tt.every(function(t){return!t})||!nt.every(function(t){return!t})){var rt=lr(t,e,{width:m+j,height:b+G,offsetWidth:K,offsetHeight:U,direction:T,dist:[j,G],delta:tt,isPinch:!!s,drag:Qi.drag(t,Mr(e,t.state,nt,!!s,!1))});return dr(t,"onResize",rt),rt}}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,o=n.startOffsetHeight,a=n.prevWidth,s=n.prevHeight;if(r){var u=t.state,l=u.width-(i+a),c=u.height-(o+s),d=Math.abs(l)>3,f=Math.abs(c)>3;return d&&(n.startWidth+=l,n.startOffsetWidth+=l,n.prevWidth+=l),f&&(n.startHeight+=c,n.startOffsetHeight+=c,n.prevHeight+=c),d||f?this.dragControl(t,e):void 0}},dragControlEnd:function(t,e){var n=e.datas;if(n.isResize){n.isResize=!1;var r=cr(t,e,{});return dr(t,"onResizeEnd",r),r}},dragGroupControlCondition:Er,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=_r(t,"resizable",e);function o(e,r){var i=n.fixedDirection,o=n.fixedPosition,a=Qr(e,i),s=pe(Ee(-t.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),u=s[0],l=s[1];return r.datas.originalX=u,r.datas.originalY=l,r}var a=Pr(t,this,"dragControlStart",e,function(t,e){return o(t,e)}),s=mn(mn({},r),{targets:t.props.targets,events:a,setFixedDirection:function(e){r.setFixedDirection(e),a.forEach(function(n,r){n.setFixedDirection(e),o(t.moveables[r],i[r])})}}),u=dr(t,"onResizeGroupStart",s);return n.isResize=!1!==u,!!n.isResize&&r},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=this.dragControl(t,e);if(r){var i=r.offsetWidth,o=r.offsetHeight,a=r.dist,s=t.props.keepRatio,u=[i/(i-a[0]),o/(o-a[1])],l=n.fixedPosition,c=Pr(t,this,"dragControl",e,function(e,n){var r=pe(Ee(t.rotation/180*Math.PI,3),[n.datas.originalX*u[0],n.datas.originalY*u[1],1],3),i=r[0],o=r[1];return mn(mn({},n),{parentDist:null,parentScale:u,dragClient:ce(l,[i,o]),parentKeepRatio:s})}),d=mn({targets:t.props.targets,events:c},r);return dr(t,"onResizeGroup",d),d}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isResize){this.dragControlEnd(t,e);var r=Pr(t,this,"dragControlEnd",e);return dr(t,"onResizeGroupEnd",cr(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=0,r=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?n=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(n+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:e,parentDist:[n,r]}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},fo={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,o=n.edge;if(!r&&i)return o?ro(t,e):no(t,e)},dragControlCondition:Er,dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,o=e.parentDirection||(r?[0,0]:or(i.target)),a=t.state,s=a.width,u=a.height,l=a.targetTransform,c=a.target,d=a.pos1,f=a.pos2,p=a.pos4;if(!o||!c)return!1;r||Br(t,e),n.datas={},n.transform=l,n.prevDist=[1,1],n.direction=o,n.width=s,n.height=u,n.startValue=[1,1];var h=rt(d,f),v=rt(f,p),g=!o[0]&&!o[1]||o[0]||!o[1];function m(t){n.ratio=t&&isFinite(t)?t:0}function b(e){n.fixedDirection=e,n.fixedPosition=Qr(t,e)}n.scaleWidth=h,n.scaleHeight=v,n.scaleXRatio=h/s,n.scaleYRatio=v/u,qr(e,"scale"),n.isWidth=g,m(rt(d,f)/rt(f,p)),b([-o[0],-o[1]]);var y=lr(t,e,mn(mn({direction:o,set:function(t){n.startValue=t},setRatio:m,setFixedDirection:b},Xr(e)),{dragStart:Qi.dragStart(t,(new Rr).dragStart([0,0],e))}));return!1!==dr(t,"onScaleStart",y)&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),!!n.isScale&&y},dragControl:function(t,e){Tr(e,"scale");var n=e.datas,r=e.distX,i=e.distY,o=e.parentScale,a=e.parentDistance,s=e.parentKeepRatio,u=e.parentFlag,l=e.isPinch,c=e.dragClient,d=e.parentDist,f=e.isRequest,p=n.prevDist,h=n.direction,v=n.width,g=n.height,m=n.isScale,b=n.startValue,y=n.isWidth,x=n.ratio,E=n.fixedDirection,S=n.scaleXRatio,C=n.scaleYRatio;if(!m)return!1;var w=t.props,D=w.throttleScale,M=w.parentMoveable,R=h;h[0]||h[1]||(R=[1,1]);var _=x&&(t.props.keepRatio||s),O=t.state,P=1,k=1,T=c;if(c||(T=!u&&l?Qr(t,[0,0]):n.fixedPosition),d)P=(v+d[0])/v,k=(g+d[1])/g;else if(o)P=o[0],k=o[1];else if(l)a&&(P=(v+a)/v,k=(g+a*g/v)/g);else{var z=Ar({datas:n,distX:r,distY:i}),j=R[0]*z[0]*S,G=R[1]*z[1]*C;if(_&&v&&g)if(R[0])if(R[1]){var I=Zn([j,G]),A=et([0,0],z),F=et([0,0],R),N=Math.cos(A-F)*I,L=et([0,0],[x,1]);j=Math.cos(L)*N,G=Math.sin(L)*N}else G=j/x;else j=G*x;P=(v+j/S)/v,k=(g+G/C)/g}P=R[0]||_?P*b[0]:b[0],k=R[1]||_?k*b[1]:b[1],0===P&&(P=1e-9*(p[0]>0?1:-1)),0===k&&(k=1e-9*(p[1]>0?1:-1));var Y=[P/b[0],k/b[1]],X=[P,k];if(!l&&t.props.groupable){var q=(O.snapRenderInfo||{}).direction;B(q)&&(q[0]||q[1])&&(O.snapRenderInfo={direction:h,request:e.isRequest})}var W=[0,0];if(l||(W=Ki(t,Y,h,f,n)),_){R[0]&&R[1]&&W[0]&&W[1]&&(Math.abs(W[0]*v)>Math.abs(W[1]*g)?W[1]=0:W[0]=0);var V=!W[0]&&!W[1];if(V&&(y?Y[0]=it(Y[0]*b[0],D)/b[0]:Y[1]=it(Y[1]*b[1],D)/b[1]),R[0]&&!R[1]||W[0]&&!W[1]||V&&y){Y[0]+=W[0];var H=v*Y[0]*b[0]/x;Y[1]=H/g/b[1]}else if(!R[0]&&R[1]||!W[0]&&W[1]||V&&!y){Y[1]+=W[1];var $=g*Y[1]*b[1]*x;Y[0]=$/v/b[0]}}else Y[0]+=W[0],Y[1]+=W[1],W[0]||(Y[0]=it(Y[0]*b[0],D)/b[0]),W[1]||(Y[1]=it(Y[1]*b[1],D)/b[1]);0===Y[0]&&(Y[0]=1e-9*(p[0]>0?1:-1)),0===Y[1]&&(Y[1]=1e-9*(p[1]>0?1:-1));var K,U,Z=[Y[0]/p[0],Y[1]/p[1]];U=b,X=[(K=Y)[0]*U[0],K[1]*U[1]];var J=function(t,e,n,r,i){return Kr(t,"scale("+e.join(", ")+")",n,r,i)}(t,Y,E,T,n),Q=de(J,n.prevInverseDist||[0,0]);if(n.prevDist=Y,n.prevInverseDist=J,P===p[0]&&k===p[1]&&Q.every(function(t){return!t})&&!M)return!1;var tt=zr(n,"scale("+X.join(", ")+")","scale("+Y.join(", ")+")"),nt=lr(t,e,mn({offsetWidth:v,offsetHeight:g,direction:h,scale:X,dist:Y,delta:Z,isPinch:!!l},$r(t,tt,Q,l,e)));return dr(t,"onScale",nt),nt},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isScale&&(n.isScale=!1,dr(t,"onScaleEnd",cr(t,e,{})),r)},dragGroupControlCondition:Er,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=_r(t,"resizable",e);function o(e,r){var i=n.fixedDirection,o=n.fixedPosition,a=Qr(e,i),s=pe(Ee(-t.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),u=s[0],l=s[1];return r.datas.originalX=u,r.datas.originalY=l,r}n.moveableScale=t.scale;var a=Pr(t,this,"dragControlStart",e,function(t,e){return o(t,e)}),s=mn(mn({},r),{targets:t.props.targets,events:a,setFixedDirection:function(e){r.setFixedDirection(e),a.forEach(function(n,r){n.setFixedDirection(e),o(t.moveables[r],i[r])})}}),u=dr(t,"onScaleGroupStart",s);return n.isScale=!1!==u,!!n.isScale&&s},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){var r=this.dragControl(t,e);if(r){var i=n.moveableScale;t.scale=[r.scale[0]*i[0],r.scale[1]*i[1]];var o=t.props.keepRatio,a=r.dist,s=r.scale,u=n.fixedPosition,l=Pr(t,this,"dragControl",e,function(e,n){var r=pe(Ee(t.rotation/180*Math.PI,3),[n.datas.originalX*a[0],n.datas.originalY*a[1],1],3),i=r[0],l=r[1];return mn(mn({},n),{parentDist:null,parentScale:s,parentKeepRatio:o,dragClient:ce(u,[i,l])})}),c=mn({targets:t.props.targets,events:l},r);return dr(t,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isScale){this.dragControlEnd(t,e);var r=Pr(t,this,"dragControlEnd",e);return dr(t,"onScaleGroupEnd",cr(t,e,{targets:t.props.targets,events:r})),n}},request:function(){var t={},e=0,n=0;return{isControl:!0,requestStart:function(e){return{datas:t,parentDirection:e.direction||[1,1]}},request:function(r){return e+=r.deltaWidth,n+=r.deltaHeight,{datas:t,parentDist:[e,n]}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function po(t,e){return t.map(function(t,n){return r=t,i=e[n],(r*(a=2)+i*(o=1))/(o+a);var r,i,o,a})}function ho(t,e,n){var r=et(t,e),i=et(t,n)-r;return i>=0?i:i+2*Math.PI}var vo={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,o=n.warpable,a=n.zoom;if(r||i||!o)return[];var s=t.state,u=s.pos1,l=s.pos2,c=s.pos3,d=s.pos4,f=po(u,l),p=po(l,u),h=po(u,c),v=po(c,u),g=po(c,d),m=po(d,c),b=po(l,d),y=po(d,l);return bn([e.createElement("div",{className:Tn("line"),key:"middeLine1",style:Qn(f,g,a)}),e.createElement("div",{className:Tn("line"),key:"middeLine2",style:Qn(p,m,a)}),e.createElement("div",{className:Tn("line"),key:"middeLine3",style:Qn(h,b,a)}),e.createElement("div",{className:Tn("line"),key:"middeLine4",style:Qn(v,y,a)})],no(t,e))},dragControlCondition:function(t,e){return!e.isRequest&&at(e.inputEvent.target,Tn("direction"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,o=or(r.target);if(!o||!i)return!1;var a=t.state,s=a.transformOrigin,u=a.is3d,l=a.targetTransform,c=a.targetMatrix,d=a.width,f=a.height,p=a.left,h=a.top;return n.datas={},n.targetTransform=l,n.warpTargetMatrix=u?c:se(c,3,4),n.targetInverseMatrix=ie(oe(n.warpTargetMatrix,4),3,4),n.direction=o,n.left=p,n.top=h,n.poses=[[0,0],[d,0],[0,f],[d,f]].map(function(t){return de(t,s)}),n.nextPoses=n.poses.map(function(t){var e=t[0],r=t[1];return pe(n.warpTargetMatrix,[e,r,0,1],4)}),n.startValue=Se(4),n.prevMatrix=Se(4),n.absolutePoses=sr(a),n.posIndexes=Fr(o),Br(t,e),qr(e,"matrix3d"),a.snapRenderInfo={request:e.isRequest,direction:o},!1!==dr(t,"onWarpStart",lr(t,e,mn({set:function(t){n.startValue=t}},Xr(e))))&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,o=e.distY,a=n.targetInverseMatrix,s=n.prevMatrix,u=n.isWarp,l=n.startValue,c=n.poses,d=n.posIndexes,f=n.absolutePoses;if(!u)return!1;if(Tr(e,"matrix3d"),ii(t,"warpable")){var p=d.map(function(t){return f[t]});p.length>1&&p.push([(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]);var h=Ni(t,r,{horizontal:p.map(function(t){return t[1]+o}),vertical:p.map(function(t){return t[0]+i})}),v=h.horizontal,g=h.vertical;o-=v.offset,i-=g.offset}var m=Ar({datas:n,distX:i,distY:o},!0),b=n.nextPoses.slice();if(d.forEach(function(t){b[t]=ce(b[t],m)}),!wn.every(function(t){return e=t.map(function(t){return c[t]}),n=t.map(function(t){return b[t]}),r=ho(e[0],e[1],e[2]),i=ho(n[0],n[1],n[2]),o=Math.PI,!(r>=o&&i<=o||r<=o&&i>=o);var e,n,r,i,o}))return!1;var y=De(c[0],c[2],c[1],c[3],b[0],b[2],b[1],b[3]);if(!y.length)return!1;var x=Gr(n,le(a,y,4),!0),E=le(oe(s,4),x,4);n.prevMatrix=x;var S=le(l,x,4),C=zr(n,"matrix3d("+S.join(", ")+")","matrix3d("+x.join(", ")+")");return Vr(e,C),dr(t,"onWarp",lr(t,e,{delta:E,matrix:S,dist:x,multiply:le,transform:C})),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isWarp&&(n.isWarp=!1,dr(t,"onWarpEnd",cr(t,e,{})),r)}},go=Tn("area-pieces"),mo=Tn("area-piece"),bo=Tn("avoid");function yo(t){var e=t.areaElement,n=t.state,r=n.width,i=n.height;!function(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}(e,bo),e.style.cssText+="left: 0px; top: 0px; width: "+r+"px; height: "+i+"px"}function xo(t){return t.createElement("div",{key:"area_pieces",className:go},t.createElement("div",{className:mo}),t.createElement("div",{className:mo}),t.createElement("div",{className:mo}),t.createElement("div",{className:mo}))}var Eo={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,o=n.groupable,a=n.passDragArea,s=t.state,u=s.width,l=s.height,c=s.renderPoses,f=a?Tn("area","pass"):Tn("area");if(o)return[e.createElement("div",{key:"area",ref:d(t,"areaElement"),className:f}),xo(e)];if(!r||!i)return[];var p=De([0,0],[u,0],[0,l],[u,l],c[0],c[1],c[2],c[3]),h=p.length?Xn(p,!0):"none";return[e.createElement("div",{key:"area",ref:d(t,"areaElement"),className:f,style:{top:"0px",left:"0px",width:u+"px",height:l+"px",transformOrigin:"0 0",transform:h}}),xo(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY;if(!e.inputEvent)return!1;n.isDragArea=!1;var o=t.areaElement,a=t.state,s=a.moveableClientRect,u=a.renderPoses,l=a.rootMatrix,c=a.is3d,d=s.left,f=s.top,p=$n(u),h=p.left,v=p.top,g=p.width,m=p.height,b=gr(l,[r-d,i-f],c?4:3),y=b[0],x=b[1],E=[{left:h,top:v,width:g,height:(x-=v)-10},{left:h,top:v,width:(y-=h)-10,height:m},{left:h,top:v+x+10,width:g,height:m-x-10},{left:h+y+10,top:v,width:g-y-10,height:m}],S=[].slice.call(o.nextElementSibling.children);E.forEach(function(t,e){S[e].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"}),st(o,bo),a.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,yo(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||yo(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){yo(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&H(function(){e.disableNativeEvent=!1})}},So=yn("origin",{render:function(t,e){var n=t.props.zoom,r=t.state,i=r.beforeOrigin,o=r.rotation;return[e.createElement("div",{className:Tn("control","origin"),style:tr(o,n,i),key:"beforeOrigin"})]}});function Co(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var wo={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,e){var n=t.props.scrollContainer,r=void 0===n?t.getContainer():n,i=new $e,o=Sr(r,!0);e.datas.dragScroll=i;var a=e.isControl?"controlGesto":"targetGesto",s=e.targets;i.on("scroll",function(n){var r=n.container,i=n.direction,o=lr(t,e,{scrollContainer:r,direction:i}),a=s?"onScrollGroup":"onScroll";s&&(o.targets=s),dr(t,a,o)}).on("move",function(n){var r=n.offsetX,i=n.offsetY;t[a].scrollBy(r,i,e.inputEvent,!1)}),i.dragStart(e,{container:o})},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,o=void 0===i?t.getContainer():i,a=r.scrollThreshold,s=void 0===a?0:a,u=r.getScrollPosition,l=void 0===u?Co:u;return n.drag(e,{container:o,threshold:s,getScrollPosition:function(t){return l({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,mn(mn({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,mn(mn({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,mn(mn({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,mn(mn({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,mn(mn({},e),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,mn(mn({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,mn(mn({},e),{targets:t.props.targets}))}},Do={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object},events:{}},Mo=yn("padding",{render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=n.padding||{},i=r.left,o=void 0===i?0:i,a=r.top,s=void 0===a?0:a,u=r.right,l=void 0===u?0:u,c=r.bottom,d=void 0===c?0:c,f=t.state,p=f.renderPoses,h=[f.pos1,f.pos2,f.pos3,f.pos4],v=[];return o>0&&v.push([0,2]),s>0&&v.push([0,1]),l>0&&v.push([1,3]),d>0&&v.push([2,3]),v.map(function(t,n){var r=t[0],i=t[1],o=De([0,0],[100,0],[0,100],[100,100],h[r],h[i],p[r],p[i]);if(o.length)return e.createElement("div",{key:"padding"+n,className:Tn("padding"),style:{transform:Xn(o,!0)}})})}}),Ro=["nw","ne","se","sw"];function _o(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var Oo=[1,2,5,6],Po=[0,3,4,7],ko=[1,-1,-1,1],Bo=[1,1,-1,-1];function To(t,e,n,r,i,o,a,s,u){void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=r),void 0===u&&(u=i);var l=[],c=!1,d=t.map(function(t,d){var f=e[d],p=f.horizontal,h=f.vertical;if(h&&!c&&(c=!0,l.push("/")),c){var v=Math.max(0,1===h?t[1]-a:u-t[1]);return l.push(yr(v,i,n)),v}v=Math.max(0,1===p?t[0]-o:s-t[0]);return l.push(yr(v,r,n)),v});return{styles:l,raws:d}}function zo(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var o=t[i];o.sub&&(o.horizontal&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),o.vertical&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function jo(t,e,n,r,i,o){var a,s,u,l;void 0===o&&(o=[0,0]);var c=t.indexOf("/"),d=(c>-1?t.slice(0,c):t).length,f=t.slice(0,d),p=t.slice(d+1),h=f[0],v=void 0===h?"0px":h,g=f[1],m=void 0===g?v:g,b=f[2],y=void 0===b?v:b,x=f[3],E=void 0===x?m:x,S=p[0],C=void 0===S?v:S,w=p[1],D=void 0===w?C:w,M=p[2],R=void 0===M?C:M,_=p[3],O=void 0===_?D:_,P=[v,m,y,E].map(function(t){return U(t,e)}),k=[C,D,R,O].map(function(t){return U(t,n)}),B=P.slice(),T=k.slice();a=_o([B[0],B[1]],e),B[0]=a[0],B[1]=a[1],s=_o([B[3],B[2]],e),B[3]=s[0],B[2]=s[1],u=_o([T[0],T[3]],n),T[0]=u[0],T[3]=u[1],l=_o([T[1],T[2]],n),T[1]=l[0],T[2]=l[1];var z=B.slice(0,Math.max(o[0],f.length)),j=T.slice(0,Math.max(o[1],p.length));return bn(bn([],z.map(function(t,e){var o=Ro[e];return{horizontal:ko[e],vertical:0,pos:[r+t,i+(-1===Bo[e]?n:0)],sub:!0,raw:P[e],direction:o}})),j.map(function(t,n){var o=Ro[n];return{horizontal:0,vertical:Bo[n],pos:[r+(-1===ko[n]?e:0),i+t],sub:!0,raw:k[n],direction:o}}))}function Go(t,e,n,r,i){void 0===i&&(i=e.length);var o=zo(t.slice(r)),a=o.horizontalRange,s=o.verticalRange,u=n-r,l=0;if(0===u)l=i;else if(u>0&&u<a[1])l=a[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(n,l),e.splice(n,l)}function Io(t,e,n,r,i,o,a,s,u,l,c){void 0===l&&(l=0),void 0===c&&(c=0);var d=zo(t.slice(n)),f=d.horizontalRange,p=d.verticalRange;if(r>-1)for(var h=1===ko[r]?o-l:s-o,v=f[1];v<=r;++v){var g=1===Bo[v]?c:u,m=0;if(r===v?m=o:0===v?m=l+h:-1===ko[v]&&(m=s-(e[n][0]-l)),t.splice(n+v,0,{horizontal:ko[v],vertical:0,pos:[m,g]}),e.splice(n+v,0,[m,g]),0===v)break}else if(i>-1){var b=1===Bo[i]?a-c:u-a;if(0===f[1]&&0===p[1]){var y=[l+b,c];t.push({horizontal:ko[0],vertical:0,pos:y}),e.push(y)}var x=p[0];for(v=p[1];v<=i;++v){m=1===ko[v]?l:s,g=0;if(i===v?g=a:0===v?g=c+b:1===Bo[v]?g=e[n+x][1]:-1===Bo[v]&&(g=u-(e[n+x][1]-c)),t.push({horizontal:0,vertical:Bo[v],pos:[m,g]}),e.push([m,g]),0===v)break}}}function Ao(t,e){return void 0===e&&(e=t.map(function(t){return t.raw})),{horizontals:t.map(function(t,n){return t.horizontal?e[n]:null}).filter(function(t){return null!=t}),verticals:t.map(function(t,n){return t.vertical?e[n]:null}).filter(function(t){return null!=t})}}var Fo=[[0,-1,"n"],[1,0,"e"]],No=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Lo(t,e,n){var r=t.props.clipRelative,i=t.state,o=i.width,a=i.height,s=e,u=s.type,l=s.poses,c="rect"===u,d="circle"===u;if("polygon"===u)return n.map(function(t){return yr(t[0],o,r)+" "+yr(t[1],a,r)});if(c||"inset"===u){var f=n[1][1],p=n[3][0],h=n[7][0],v=n[5][1];if(c)return[f,p,v,h].map(function(t){return t+"px"});var g=[f,o-p,a-v,h].map(function(t,e){return yr(t,e%2?o:a,r)});if(n.length>8){var m=de(n[4],n[0]),b=m[0],y=m[1];g.push.apply(g,bn(["round"],To(n.slice(8),l.slice(8),r,b,y,h,f,p,v).styles))}return g}if(d||"ellipse"===u){var x=n[0],E=yr(Math.abs(n[1][1]-x[1]),d?Math.sqrt((o*o+a*a)/2):a,r);return(g=d?[E]:[yr(Math.abs(n[2][0]-x[0]),o,r),E]).push("at",yr(x[0],o,r),yr(x[1],a,r)),g}}function Yo(t,e,n,r){var i=[r,(r+e)/2,e],o=[t,(t+n)/2,n];return No.map(function(t){var e=t[0],n=t[1],r=t[2],a=i[e+1],s=o[n+1];return{vertical:Math.abs(n),horizontal:Math.abs(e),direction:r,pos:[a,s]}})}function Xo(t,e,n,r,i){var o,a,s,u,l,c,d,f=i;if(!f){var p=fr(t),h=p.clipPath;f="none"!==h?h:p.clip}if(f&&"none"!==f&&"auto"!==f||(f=r)){var v=N(f),g=v.prefix,m=void 0===g?f:g,b=v.value,y=void 0===b?"":b,x="circle"===m,E=" ";if("polygon"===m)return E=",",{type:m,clipText:f,poses:k=(M=F(y||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(t){var r=t.split(" "),i=r[0],o=r[1];return{vertical:1,horizontal:1,pos:[U(i,e),U(o,n)]}}),splitter:E};if(x||"ellipse"===m){var S="",C="",w=0,D=0,M=A(y);if(x){var R;R=void 0===(o=M[0])?"50%":o,S=void 0===(a=M[2])?"50%":a,C=void 0===(s=M[3])?"50%":s,w=U(R,Math.sqrt((e*e+n*n)/2)),D=w}else{var _,O;_=void 0===(u=M[0])?"50%":u,O=void 0===(l=M[1])?"50%":l,S=void 0===(c=M[3])?"50%":c,C=void 0===(d=M[4])?"50%":d,w=U(_,e),D=U(O,n)}var P=[U(S,e),U(C,n)],k=bn([{vertical:1,horizontal:1,pos:P,direction:"nesw"}],Fo.slice(0,x?1:2).map(function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[P[0]+t[0]*w,P[1]+t[1]*D]}}));return{type:m,clipText:f,radiusX:w,radiusY:D,left:P[0]-w,top:P[1]-D,poses:k,splitter:E}}if("inset"===m){var B=(M=A(y||"0 0 0 0")).indexOf("round"),T=(B>-1?M.slice(0,B):M).length,z=M.slice(T+1),j=M.slice(0,T),G=j[0],I=j[1],Y=void 0===I?G:I,X=j[2],q=void 0===X?G:X,W=j[3],V=void 0===W?Y:W,H=[G,q].map(function(t){return U(t,n)}),$=H[0],K=H[1],Z=[V,Y].map(function(t){return U(t,e)}),J=Z[0],Q=Z[1],tt=e-Q,et=n-K,nt=jo(z,tt-J,et-$,J,$);return{type:"inset",clipText:f,poses:k=bn(bn([],Yo($,tt,et,J)),nt),top:$,left:J,right:tt,bottom:et,radius:z,splitter:E}}if("rect"===m){M=F(y||"0px, "+e+"px, "+n+"px, 0px");E=",";var rt=M.map(function(t){return L(t).value});return{type:"rect",clipText:f,poses:k=Yo($=rt[0],Q=rt[1],K=rt[2],J=rt[3]),top:$,right:Q,bottom:K,left:J,values:M,splitter:E}}}}var qo={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,o=n.clipArea,a=n.zoom,s=t.state,u=s.target,l=s.width,c=s.height,d=s.allMatrix,f=s.is3d,p=s.left,h=s.top,v=s.pos1,g=s.pos2,m=s.pos3,b=s.pos4,y=s.clipPathState,x=s.snapBoundInfos,E=s.rotation;if(!u)return[];var S=Xo(u,l,c,i||"inset",y||r);if(!S)return[];var C=f?4:3,w=S.type,D=S.poses.map(function(t){var e=Vn(d,t.pos,C);return[e[0]-p,e[1]-h]}),M=[],R=[],_="rect"===w,O="inset"===w,P="polygon"===w;if(_||O||P){var k=O?D.slice(0,8):D;R=k.map(function(t,n){var r=0===n?k[k.length-1]:k[n-1],i=et(r,t),o=Jn(r,t);return e.createElement("div",{key:"clipLine"+n,className:Tn("line","clip-line","snap-control"),"data-clip-index":n,style:{width:o+"px",transform:"translate("+r[0]+"px, "+r[1]+"px) rotate("+i+"rad) scaleY("+a+")"}})})}if(M=D.map(function(t,n){return e.createElement("div",{key:"clipControl"+n,className:Tn("control","clip-control","snap-control"),"data-clip-index":n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) rotate("+E+"rad) scale("+a+")"}})}),O&&M.push.apply(M,D.slice(8).map(function(t,n){return e.createElement("div",{key:"clipRadiusControl"+n,className:Tn("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) rotate("+E+"rad) scale("+a+")"}})})),"circle"===w||"ellipse"===w){var B=S.left,T=S.top,z=S.radiusX,j=S.radiusY,G=de(Vn(d,[B,T],C),Vn(d,[0,0],C)),I=G[0],A=G[1],F="none";if(!o){for(var N=Math.max(10,z/5,j/5),L=[],Y=0;Y<=N;++Y){var X=2*Math.PI/N*Y;L.push([z+(z-a)*Math.cos(X),j+(j-a)*Math.sin(X)])}L.push([z,-2]),L.push([-2,-2]),L.push([-2,2*j+2]),L.push([2*z+2,2*j+2]),L.push([2*z+2,-2]),L.push([z,-2]),F="polygon("+L.map(function(t){return t[0]+"px "+t[1]+"px"}).join(", ")+")"}M.push(e.createElement("div",{key:"clipEllipse",className:Tn("clip-ellipse","snap-control"),style:{width:2*z+"px",height:2*j+"px",clipPath:F,transform:"translate("+(-p+I)+"px, "+(-h+A)+"px) "+Xn(d)}}))}if(o){var q=$n(bn([v,g,m,b],D)),W=q.width,V=q.height,H=q.left,$=q.top;if(P||_||O){L=O?D.slice(0,8):D;M.push(e.createElement("div",{key:"clipArea",className:Tn("clip-area","snap-control"),style:{width:W+"px",height:V+"px",transform:"translate("+H+"px, "+$+"px)",clipPath:"polygon("+L.map(function(t){return t[0]-H+"px "+(t[1]-$)+"px"}).join(", ")+")"}}))}}return x&&["vertical","horizontal"].forEach(function(t){var n=x[t],r="horizontal"===t;n.isSnap&&R.push.apply(R,n.snap.posInfos.map(function(n,i){var o=n.pos,s=de(Vn(d,r?[0,o]:[o,0],C),[p,h]),u=de(Vn(d,r?[l,o]:[o,c],C),[p,h]);return eo(e,"",s,u,a,"clip"+t+"snap"+i,"guideline")})),n.isBound&&R.push.apply(R,n.bounds.map(function(n,i){var o=n.pos,s=de(Vn(d,r?[0,o]:[o,0],C),[p,h]),u=de(Vn(d,r?[l,o]:[o,c],C),[p,h]);return eo(e,"",s,u,a,"clip"+t+"bounds"+i,"guideline","bounds","bold")}))}),bn(bn([],M),R)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props.dragWithClip;return!(void 0===n||n)&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,e)},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,o=r.customClipPath,a=n.target,s=n.width,u=n.height,l=e.inputEvent?e.inputEvent.target:null,c=l&&l.getAttribute("class")||"",d=e.datas,f=Xo(a,s,u,i||"inset",o);if(!f)return!1;var p=f.clipText;return!1===dr(t,"onClipStart",lr(t,e,{clipType:f.type,clipStyle:p,poses:f.poses.map(function(t){return t.pos})}))?(d.isClipStart=!1,!1):(d.isControl=c&&c.indexOf("clip-control")>-1,d.isLine=c.indexOf("clip-line")>-1,d.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,d.index=l?parseInt(l.getAttribute("data-clip-index"),10):-1,d.clipPath=f,d.isClipStart=!0,n.clipPathState=p,Br(t,e),!0)},dragControl:function(t,e){var n,r=e.datas,i=e.originalDatas;if(!r.isClipStart)return!1;var o=r,a=o.isControl,s=o.isLine,u=o.isArea,l=o.index,c=o.clipPath;if(!c)return!1;var d=Ar(e),f=d[0],p=d[1],h=t.props,v=t.state,g=v.width,m=v.height,b=!u&&!a&&!s,y=c.type,x=c.poses,E=c.splitter,S=x.map(function(t){return t.pos});b&&(f=-f,p=-p);var C=!a||"nesw"===x[l].direction,w="inset"===y||"rect"===y,D=x.map(function(){return[0,0]});if(a&&!C){var M=x[l],R=M.horizontal,_=M.vertical,O=[f*Math.abs(R),p*Math.abs(_)];D=function(t,e,n,r){var i=t[e],o=i.direction,a=i.sub,s=t.map(function(){return[0,0]}),u=o?o.split(""):[];if(r&&e<8){var l=u.filter(function(t){return"w"===t||"e"===t})[0],c=u.filter(function(t){return"n"===t||"s"===t})[0];s[e]=n,t.forEach(function(t,e){var r=t.direction;r&&(r.indexOf(l)>-1&&(s[e][0]=n[0]),r.indexOf(c)>-1&&(s[e][1]=n[1]))}),l&&(s[1][0]=n[0]/2,s[5][0]=n[0]/2),c&&(s[3][1]=n[1]/2,s[7][1]=n[1]/2)}else o&&!a?u.forEach(function(e){var r="n"===e||"s"===e;t.forEach(function(t,i){var o=t.direction,a=t.horizontal,u=t.vertical;o&&-1!==o.indexOf(e)&&(s[i]=[r||!a?0:n[0],r&&u?n[1]:0])})}):s[e]=n;return s}(x,l,O,w)}else C&&(D=S.map(function(){return[f,p]}));var P=S.map(function(t,e){return ce(t,D[e])}),k=bn([],P);v.snapBoundInfos=null;var B="circle"===c.type,T="ellipse"===c.type;if(B||T){var z=$n(P),j=Math.abs(z.bottom-z.top),G=Math.abs(T?z.right-z.left:j),I=P[0][1]+j,A=P[0][0]-G,F=P[0][0]+G;B&&(k.push([F,z.bottom]),D.push([1,0])),k.push([z.left,I]),D.push([0,1]),k.push([A,z.bottom]),D.push([1,0])}var N=si((h.clipHorizontalGuidelines||[]).map(function(t){return U(""+t,m)}),(h.clipVerticalGuidelines||[]).map(function(t){return U(""+t,g)}),g,m),L=[],Y=[];if(B||T)L=[k[4][0],k[2][0]],Y=[k[1][1],k[3][1]];else if(w){var X=[k[0],k[2],k[4],k[6]],q=[D[0],D[2],D[4],D[6]];L=X.filter(function(t,e){return q[e][0]}).map(function(t){return t[0]}),Y=X.filter(function(t,e){return q[e][1]}).map(function(t){return t[1]})}else L=k.filter(function(t,e){return D[e][0]}).map(function(t){return t[0]}),Y=k.filter(function(t,e){return D[e][1]}).map(function(t){return t[1]});for(var W=[0,0],V=function(t){var e=Li(N,h.clipTargetBounds&&{left:0,top:0,right:g,bottom:m},L,Y,5),n=e.horizontal,r=e.vertical,i=n.offset,o=r.offset;if(n.isBound&&(W[1]+=i),r.isBound&&(W[0]+=o),!T&&!B||0!==D[0][0]||0!==D[0][1])return k.forEach(function(t,e){var n=D[e];n[0]&&(t[0]-=o),n[1]&&(t[1]-=i)}),"break";var a=$n(P),s=a.bottom-a.top,u=T?a.right-a.left:s;u-=r.isBound?Math.abs(o):0===r.snapIndex?-o:o,s-=n.isBound?Math.abs(i):0===n.snapIndex?-i:i,B&&(u=s=vi(r,n)>0?s:u);var l=k[0];k[1][1]=l[1]-s,k[2][0]=l[0]+u,k[3][1]=l[1]+s,k[4][0]=l[0]-u},H=0;H<2;++H){if("break"===V())break}var $=Lo(t,c,P),K=y+"("+$.join(E)+")";if(v.clipPathState=K,B||T)L=[k[4][0],k[2][0]],Y=[k[1][1],k[3][1]];else if(w){X=[k[0],k[2],k[4],k[6]];L=X.map(function(t){return t[0]}),Y=X.map(function(t){return t[1]})}else L=k.map(function(t){return t[0]}),Y=k.map(function(t){return t[1]});if(v.snapBoundInfos=Li(N,h.clipTargetBounds&&{left:0,top:0,right:g,bottom:m},L,Y,1),i.draggable){var Z=v.is3d,J=v.allMatrix,Q=Z?4:3;n=le(J,[W[0],W[1],0,0],Q),W[0]=n[0],W[1]=n[1],i.draggable.deltaOffset=W}return dr(t,"onClip",lr(t,e,{clipEventType:"changed",clipType:y,poses:P,clipStyle:K,clipStyles:$,distX:f,distY:p})),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,o=r.isLine,a=r.isClipStart,s=r.isControl;return!!a&&(dr(t,"onClipEnd",cr(t,e,{})),i&&(s?function(t,e){var n=e.datas,r=n.clipPath,i=n.index,o=r,a=o.type,s=o.poses,u=o.splitter,l=s.map(function(t){return t.pos}),c=l.length;if("polygon"===a)s.splice(i,1),l.splice(i,1);else{if("inset"!==a)return;if(i<8)return;if(Go(s,l,i,8,c),c===s.length)return}var d=Lo(t,r,l);dr(t,"onClip",lr(t,e,{clipEventType:"removed",clipType:a,poses:l,clipStyles:d,clipStyle:a+"("+d.join(u)+")",distX:0,distY:0}))}(t,e):o&&function(t,e){var n=kr(t,e),r=n[0],i=n[1],o=e.datas,a=o.clipPath,s=o.index,u=a,l=u.type,c=u.poses,d=u.splitter,f=c.map(function(t){return t.pos});if("polygon"===l)f.splice(s,0,[r,i]);else{if("inset"!==l)return;var p=Oo.indexOf(s),h=Po.indexOf(s),v=c.length;if(Io(c,f,8,p,h,r,i,f[4][0],f[4][1],f[0][0],f[0][1]),v===c.length)return}var g=Lo(t,a,f);dr(t,"onClip",lr(t,e,{clipEventType:"added",clipType:l,poses:f,clipStyles:g,clipStyle:l+"("+g.join(d)+")",distX:0,distY:0}))}(t,e)),i||n)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Wo={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:at(e.inputEvent.target,Tn("origin"))},dragControlStart:function(t,e){var n=e.datas;Br(t,e);var r=lr(t,e,{dragStart:Qi.dragStart(t,(new Rr).dragStart([0,0],e))}),i=dr(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,!1===i?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var o=Ar(e),a=o[0],s=o[1],u=t.state,l=u.width,c=u.height,d=u.offsetMatrix,f=u.targetMatrix,p=u.is3d,h=t.props.originRelative,v=void 0===h||h,g=p?4:3,m=[a,s];if(i){var b=e.distOrigin;(b[0]||b[1])&&(m=b)}var y=ce(n.startOrigin,m),x=ce(n.startTargetOrigin,m),E=de(m,n.prevOrigin),S=Yr(d,f,y,g),C=t.getRect(),w=$n(Hn(S,l,c,g)),D=[C.left-w.left,C.top-w.top];n.prevOrigin=m;var M=lr(t,e,{width:l,height:c,origin:y,dist:m,delta:E,transformOrigin:[yr(x[0],l,v),yr(x[1],c,v)].join(" "),drag:Qi.drag(t,Mr(e,t.state,D,!!r,!1))});return dr(t,"onDragOrigin",M),M},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(dr(t,"onDragOriginEnd",cr(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return!!n&&(t.transformOrigin=n.transformOrigin,!0)},request:function(t){var e={},n=t.getRect(),r=0,i=0,o=n.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-n.top:"deltaY"in t&&(i+=t.deltaY)),{datas:e,distX:r,distY:i,distOrigin:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Vo(t,e,n,r,i){var o;void 0===r&&(r=[0,0]);if(i)o=i;else{var a=fr(t);o=a&&a.borderRadius||""}return jo(!o||!i&&"0px"===o?[]:A(o),e,n,0,0,r)}function Ho(t,e,n,r,i,o){var a=t.state,s=a.width,u=a.height,l=To(o,i,t.props.roundRelative,s,u),c=l.raws,d=l.styles,f=Ao(i,c),p=f.horizontals,h=f.verticals,v=d.join(" ");a.borderRadiusState=v,dr(t,"onRound",lr(t,e,{horizontals:p,verticals:h,borderRadius:v,width:s,height:u,delta:r,dist:n}))}var $o={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,e){var n=t.state,r=n.target,i=n.width,o=n.height,a=n.allMatrix,s=n.is3d,u=n.left,l=n.top,c=n.borderRadiusState,d=t.props,f=d.minRoundControls,p=void 0===f?[0,0]:f,h=d.maxRoundControls,v=void 0===h?[4,4]:h,g=d.zoom;if(!r)return null;var m=s?4:3,b=Vo(r,i,o,p,c);if(!b)return null;var y=0,x=0;return b.map(function(t,n){x+=Math.abs(t.horizontal),y+=Math.abs(t.vertical);var r=de(Vn(a,t.pos,m),[u,l]),i=t.vertical?y<=v[1]:x<=v[0];return e.createElement("div",{key:"borderRadiusControl"+n,className:Tn("control","border-radius"),"data-radius-index":n,style:{display:i?"block":"none",transform:"translate("+r[0]+"px, "+r[1]+"px) scale("+g+")"}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,o=i.getAttribute("class")||"",a=o.indexOf("border-radius")>-1,s=o.indexOf("moveable-line")>-1&&o.indexOf("moveable-direction")>-1,u=a?parseInt(i.getAttribute("data-radius-index"),10):-1,l=s?parseInt(i.getAttribute("data-line-index"),10):-1;if(!a&&!s)return!1;if(!1===dr(t,"onRoundStart",lr(t,e,{})))return!1;r.lineIndex=l,r.controlIndex=u,r.isControl=a,r.isLine=s,Br(t,e);var c=t.props,d=c.roundRelative,f=c.minRoundControls,p=void 0===f?[0,0]:f,h=t.state,v=h.target,g=h.width,m=h.height;r.isRound=!0,r.prevDist=[0,0];var b=Vo(v,g,m,p)||[];return r.controlPoses=b,h.borderRadiusState=To(b.map(function(t){return t.pos}),b,d,g,m).styles.join(" "),!0},dragControl:function(t,e){var n=e.datas;if(!n.isRound||!n.isControl||!n.controlPoses.length)return!1;var r=n.controlIndex,i=n.controlPoses,o=Ar(e),a=o[0],s=o[1],u=[a,s],l=de(u,n.prevDist),c=t.props.maxRoundControls,d=void 0===c?[4,4]:c,f=t.state,p=f.width,h=f.height,v=i[r],g=v.vertical,m=v.horizontal,b=i.map(function(t){var e=t.horizontal,n=t.vertical,r=[e*m*u[0],n*g*u[1]];if(e){if(1===d[0])return r;if(d[0]<4&&e!==m)return r}else{if(0===d[1])return r[1]=n*m*u[0]/p*h,r;if(g){if(1===d[1])return r;if(d[1]<4&&n!==g)return r}}return[0,0]});b[r]=u;var y=i.map(function(t,e){return ce(t.pos,b[e])});return n.prevDist=[a,s],Ho(t,e,u,l,i,y),!0},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var o=n.width,a=n.height,s=r.isControl,u=r.controlIndex,l=r.isLine,c=r.lineIndex,d=r.controlPoses,f=d.map(function(t){return t.pos}),p=f.length,h=t.props.roundClickable;if(i&&(void 0===h||h)){if(s)Go(d,f,u,0);else if(l){var v=kr(t,e);!function(t,e,n,r,i,o,a){var s=Ao(t),u=s.horizontals,l=s.verticals,c=u.length,d=l.length,f=-1,p=-1;0===n?0===c?f=0:1===c&&(f=1):3===n&&(c<=2?f=2:c<=3&&(f=3)),2===n?0===d?p=0:d<4&&(p=3):1===n&&(d<=1?p=1:d<=2&&(p=2)),Io(t,e,0,f,p,r,i,o,a)}(d,f,c,v[0],v[1],o,a)}p!==d.length&&Ho(t,e,[0,0],[0,0],d,f)}return dr(t,"onRoundEnd",cr(t,e,{})),n.borderRadiusState="",!0},unset:function(t){t.state.borderRadiusState=""}};var Ko={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.target,o=n.targetMatrix,a=null===i||void 0===i?void 0:i.style.transform,s=r?"matrix3d("+o.join(",")+")":"matrix("+fe(o,!0)+")",u=a&&"none"!==a?a:s;e.datas.startTransforms=function(t,e){return t===(e?"matrix3d("+Se(4):"matrix("+Se(3)+")")||"matrix(1,0,0,1,0,0)"===t}(u,r)?[]:A(u)},resetTransform:function(t){t.datas.nextTransforms=t.datas.startTransforms,t.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return lr(t,e,{setTransform:function(t){e.datas.startTransforms=B(t)?t:A(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return lr(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),dr(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetTransform(e),dr(t,"onBeforeRender",lr(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){dr(t,"onBeforeRenderEnd",lr(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=_r(t,"beforeRenderable",e),i=t.moveables,o=r.map(function(t,e){var r=i[e];return n.setTransform(r,t),n.fillDragStartParams(r,t)});dr(t,"onBeforeRenderGroupStart",lr(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=_r(t,"beforeRenderable",e),i=t.moveables,o=r.map(function(t,e){var r=i[e];return n.resetTransform(t),n.fillDragParams(r,t)});dr(t,"onBeforeRenderGroup",lr(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),dr(t,"onBeforeRenderGroupEnd",lr(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},Uo={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,e){dr(t,"onRenderStart",lr(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){dr(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){if(e.resultCount)return this.drag(t,e)},dragEnd:function(t,e){dr(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){dr(t,"onRenderGroupStart",lr(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=_r(t,"beforeRenderable",e),i=t.moveables,o=r.map(function(t,e){var r=i[e];return n.fillDragParams(r,t)});dr(t,"onRenderGroup",lr(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,transform:Hr(e),events:o}))},dragGroupEnd:function(t,e){var n=this,r=_r(t,"beforeRenderable",e),i=t.moveables,o=r.map(function(t,e){var r=i[e];return n.fillDragEndParams(r,t)});dr(t,"onRenderGroupEnd",lr(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:o}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){return lr(t,e,{isPinch:!!e.isPinch,transform:Hr(e)})},fillDragEndParams:function(t,e){return lr(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag})}};function Zo(t,e,n,r,i,o,a){var s="Start"===i,u=t.state.target,l=o.isRequest;if(!u||s&&r.indexOf("Control")>-1&&!l&&t.areaElement===o.inputEvent.target)return!1;var c=""+n+r+i,d=""+n+r+"Condition",f="End"===i,p="After"===i,h=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());h&&t.updateRect(i,!0,!1),""!==i||l||mr(t.state,o);var v=bn([],t[e]);if(l){var g=o.requestAble;v.some(function(t){return t.name===g})||v.push.apply(v,t.props.ables.filter(function(t){return t.name===g}))}if(!v.length)return!1;var m=bn(bn([Ko],v),[Uo]).filter(function(t){return t[c]}),b=o.datas;h&&m.forEach(function(e){e.unset&&e.unset(t)});var y,x=o.inputEvent;f&&x&&(y=document.elementFromPoint(o.clientX,o.clientY)||x.target);var E=0,S=m.filter(function(e){var n=e.name,r=b[n]||(b[n]={});if(s&&(r.isEventStart=!e[d]||e[d](t,o)),r.isEventStart){var i=e[c](t,mn(mn({},o),{resultCount:E,datas:r,originalDatas:b,inputTarget:y}));return s&&!1===i&&(r.isEventStart=!1),E+=i?1:0,i}return!1}).length,C=!1;return s&&m.length&&!S&&(C=0===m.filter(function(t){var e=t.name,n=b[e];return!!n.isEventStart&&("strong"!==t.dragRelation||(n.isEventStart=!1,!1))}).length),(f||C)&&(t.state.gesto=null,t.moveables&&t.moveables.forEach(function(t){t.state.gesto=null})),h&&C&&m.forEach(function(e){e.unset&&e.unset(t)}),s&&!l&&S&&(null===o||void 0===o||o.preventDefault()),!t.isUnmounted&&!C&&((!s&&S&&!a||f)&&(t.updateRect(f?i:"",!0,!1),t.forceUpdate()),s||f||p||!S||a||Zo(t,e,n,r,i+"After",o),!0)}function Jo(t,e,n){var r=t.controlBox.getElement(),i=[];i.push(r),t.props.dragArea&&!t.props.dragTarget||i.push(e);var o=function(e){var n=e.inputEvent.target;return n===t.areaElement||!t.isMoveableElement(n)&&!t.controlBox.getElement().contains(n)||at(n,"moveable-area")||at(n,"moveable-padding")};return Qo(t,i,"targetAbles",n,{dragStart:o,pinchStart:o})}function Qo(t,e,n,r,i){void 0===i&&(i={});var o=t.props,a=o.pinchOutside,s=o.pinchThreshold,u={preventDefault:!1,container:window,pinchThreshold:s,pinchOutside:a},l=new an(e,u);return["drag","pinch"].forEach(function(e){["Start","","End"].forEach(function(o){l.on(""+e+o,function(a){var s=a.eventType;!i[s]||i[s](a)?Zo(t,n,e,r,o,a)||a.stop():a.stop()})})}),l}var ta=function(){function t(t,e,n){var r=this;this.target=t,this.moveable=e,this.eventName=n,this.ables=[],this.onEvent=function(t){var e=r.eventName,n=r.moveable;n.state.disableNativeEvent||r.ables.forEach(function(r){r[e](n,{inputEvent:t})})},this.target.addEventListener(this.eventName.toLowerCase(),this.onEvent)}var e=t.prototype;return e.setAbles=function(t){this.ables=t},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this.onEvent),this.target=null,this.moveable=null},t}(),ea=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=mn({container:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},rr(null)),e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._prevTarget=null,e._prevDragArea=!1,e._observer=null,e._observerId=0,e.onPreventClick=function(t){t.stopPropagation(),lt(window,"click",e.onPreventClick,!0)},e.checkUpdateRect=function(){if(!e.isDragging()){var t=e.props.parentMoveable;t?t.checkUpdateRect():($(e._observerId),e._observerId=H(function(){e.isDragging()||e.updateRect()}))}},e}gn(e,t);var n=e.prototype;return n.render=function(){var t=this.props,e=this.state,n=t.parentPosition,r=t.className,i=t.target,o=t.zoom,a=t.cspNonce,s=t.translateZ,u=t.cssStyled,l=t.portalContainer;this.checkUpdate(),this.updateRenderPoses();var c=n||{left:0,top:0},f=c.left,p=c.top,h=e.left,v=e.top,g=e.target,m=e.direction,b=t.targets,y=(b&&b.length||i)&&g,x=this.isDragging(),E={};return this.getEnabledAbles().forEach(function(t){E["data-able-"+t.name.toLowerCase()]=!0}),Et(u,mn({cspNonce:a,ref:d(this,"controlBox"),className:Tn("control-box",-1===m?"reverse":"",x?"dragging":"")+" "+r},E,{onClick:this.onPreventClick,portalContainer:l,style:{position:"absolute",display:y?"block":"none",transform:"translate3d("+(h-f)+"px, "+(v-p)+"px, "+s+")","--zoom":o,"--zoompx":o+"px"}}),this.renderAbles(),this._renderLines())},n.componentDidMount=function(){this.controlBox.getElement();var t=this.props,e=t.parentMoveable,n=t.container,r=t.wrapperMoveable;this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),n||e||r||this.updateRect("",!1,!0),this.updateCheckInput(),this._updateObserver(this.props)},n.componentDidUpdate=function(t){this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(t)},n.componentWillUnmount=function(){this.isUnmounted=!0,ur(this,"targetGesto"),ur(this,"controlGesto");var t=this.events;for(var e in t){var n=t[e];n&&n.destroy()}},n.getContainer=function(){var t=this.props,e=t.parentMoveable,n=t.wrapperMoveable;return t.container||n&&n.getContainer()||e&&e.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(t){return t&&(t.getAttribute("class")||"").indexOf(Sn)>-1},n.dragStart=function(t){return this.targetGesto&&this.targetGesto.triggerDragStart(t),this},n.hitTest=function(t){var e,n=this.state,r=n.target,i=n.pos1,o=n.pos2,a=n.pos3,s=n.pos4,u=n.targetClientRect;if(!r)return 0;if(t instanceof Element){var l=t.getBoundingClientRect();e={left:l.left,top:l.top,width:l.width,height:l.height}}else e=mn({width:0,height:0},t);var c=e.left,d=e.top,f=e.width,p=e.height,h=je([i,o,s,a],u),v=ze(Ye(h,[[c,d],[c+f,d],[c+f,d+p],[c,d+p]])),g=ze(h);return v&&g?Math.min(100,v/g*100):0},n.isInside=function(t,e){var n=this.state,r=n.target,i=n.pos1,o=n.pos2,a=n.pos3,s=n.pos4,u=n.targetClientRect;return!!r&&Ie([t,e],je([i,o,s,a],u))},n.updateRect=function(t,e,n){void 0===n&&(n=!0);var r=this.props,i=r.parentMoveable,o=this.state.target||this.props.target,a=this.getContainer(),s=i?i.props.rootContainer:r.rootContainer;this.updateState(rr(this.controlBox&&this.controlBox.getElement(),o,a,a,s||a),!i&&n)},n.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},n.updateTarget=function(t){this.updateRect(t,!0)},n.getRect=function(){var t=this.state,e=sr(this.state),n=e[0],r=e[1],i=e[2],o=e[3],a=$n(e),s=t.width,u=t.height,l=a.width,c=a.height,d=a.left,f=a.top,p=[t.left,t.top],h=ce(p,t.origin);return{width:l,height:c,left:d,top:f,pos1:n,pos2:r,pos3:i,pos4:o,offsetWidth:s,offsetHeight:u,beforeOrigin:ce(p,t.beforeOrigin),origin:h,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},n.getManager=function(){return this},n.getRotation=function(){var t=this.state;return function(t,e,n){var r=et(t,e)/Math.PI*180;return r=(r=n>=0?r:180-r)>=0?r:360+r}(t.pos1,t.pos2,t.direction)},n.request=function(t,e,n){void 0===e&&(e={});var r=this.props,i=r.ables,o=r.groupable,a=i.filter(function(e){return e.name===t})[0];if(this.isDragging()||!a||!a.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=a.request(this),l=n||e.isInstant,c=u.isControl?"controlAbles":"targetAbles",d=(o?"Group":"")+(u.isControl?"Control":""),f={request:function(e){return Zo(s,c,"drag",d,"",mn(mn({},u.request(e)),{requestAble:t,isRequest:!0}),l),this},requestEnd:function(){return Zo(s,c,"drag",d,"End",mn(mn({},u.requestEnd()),{requestAble:t,isRequest:!0}),l),this}};return Zo(s,c,"drag",d,"Start",mn(mn({},u.requestStart(e)),{requestAble:t,isRequest:!0}),l),l?f.request(e).requestEnd():f},n.destroy=function(){this.componentWillUnmount()},n.updateRenderPoses=function(){var t=this.state,e=this.props,n=t.originalBeforeOrigin,r=t.transformOrigin,i=t.allMatrix,o=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,l=t.pos4,c=t.left,d=t.top,f=e.padding||{},p=f.left,h=void 0===p?0:p,v=f.top,g=void 0===v?0:v,m=f.bottom,b=void 0===m?0:m,y=f.right,x=void 0===y?0:y,E=o?4:3,S=e.groupable?n:ce(n,[c,d]);t.renderPoses=[ce(a,br(i,[-h,-g],r,S,E)),ce(s,br(i,[x,-g],r,S,E)),ce(u,br(i,[-h,b],r,S,E)),ce(l,br(i,[x,b],r,S,E))]},n.checkUpdate=function(){var t=this.props,e=t.target,n=t.container,r=t.parentMoveable,i=this.state,o=i.target,a=i.container;if((o||e)&&(this.updateAbles(),!hr(o,e)||!hr(a,n))){var s=n||this.controlBox;s&&this.unsetAbles(),this.updateState({target:e,container:n}),!r&&s&&this.updateRect("End",!1,!1)}},n.triggerEvent=function(t,e){var n=this.props[t];return n&&n(e)},n.useCSS=function(t,e){var n=this.props.customStyledMap,r=t+e;return n[r]||(n[r]=hn(t,e)),n[r]},n.unsetAbles=function(){var t=this;this.targetAbles.forEach(function(e){e.unset&&e.unset(t)})},n.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var n=this.props,r=n.triggerAblesSimultaneously,i=t.filter(function(t){return t&&(t.always&&!1!==n[t.name]||n[t.name])}),o="drag"+e+"ControlStart",a=pr(i,["drag"+e+"Start","pinch"+e+"Start"],r),s=pr(i,[o],r);this.enabledAbles=i,this.targetAbles=a,this.controlAbles=s},n.updateState=function(t,e){if(e)this.setState(t);else{var n=this.state;for(var r in t)n[r]=t[r]}},n.getEnabledAbles=function(){var t=this.props;return t.ables.filter(function(e){return e&&t[e.name]})},n.renderAbles=function(){var t,e=this,n=this.props.triggerAblesSimultaneously,r={createElement:Et};return function(t,e){var n=[],r={};return t.forEach(function(i,o){var a=e(i,o,t),s=r[a];s||(s=[],r[a]=s,n.push(s)),s.push(i)}),n}((t=pr(this.getEnabledAbles(),["render"],n).map(function(t){return(0,t.render)(e,r)||[]}),t.reduce(function(t,e){return t.concat(e)},[])).filter(function(t){return t}),function(t){return t.key}).map(function(t){return t[0]})},n.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},n._updateObserver=function(t){var e,n=this.props,r=n.target;if(window.ResizeObserver&&r&&n.useResizeObserver){if(t.target!==r||!this._observer){var i=new ResizeObserver(this.checkUpdateRect);i.observe(r,{box:"border-box"}),this._observer=i}}else null===(e=this._observer)||void 0===e||e.disconnect()},n._updateEvents=function(){var t=this.controlBox.getElement(),e=this.targetAbles.length,n=this.controlAbles.length,r=this.props,i=r.dragTarget||r.target;(!e&&this.targetGesto||this._isTargetChanged(!0))&&(ur(this,"targetGesto"),this.updateState({gesto:null})),n||ur(this,"controlGesto"),i&&e&&!this.targetGesto&&(this.targetGesto=Jo(this,i,"")),!this.controlGesto&&n&&(this.controlGesto=Qo(this,t,"controlAbles","Control"))},n._updateTargets=function(){var t=this.props;this._prevTarget=t.dragTarget||t.target,this._prevDragArea=t.dragArea},n._renderLines=function(){var t=this.props,e=t.edge,n=t.zoom;if(t.hideDefaultLines)return[];var r=this.state.renderPoses,i={createElement:Et};return[eo(i,e?"n":"",r[0],r[1],n,0),eo(i,e?"e":"",r[1],r[3],n,1),eo(i,e?"w":"",r[0],r[2],n,2),eo(i,e?"s":"",r[2],r[3],n,3)]},n._isTargetChanged=function(t){var e=this.props,n=e.dragTarget||e.target,r=this._prevTarget,i=this._prevDragArea,o=e.dragArea;return!o&&r!==n||(t||o)&&i!==o},n._updateNativeEvents=function(){var t=this,e=this.props.dragArea?this.areaElement:this.state.target,n=this.events,r=K(n);if(this._isTargetChanged())for(var i in n){var o=n[i];o&&o.destroy(),n[i]=null}if(e){var a=this.enabledAbles;r.forEach(function(r){var i=pr(a,[r]),o=i.length>0,s=n[r];o?(s||(s=new ta(e,t,r),n[r]=s),s.setAbles(i)):s&&(s.destroy(),n[r]=null)})}},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{}},e}(Bt),na={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(t,e){var n=t.props.targets||[];t.moveables=[];var r=t.state,i={left:r.left,top:r.top},o=t.props;return n.map(function(n,r){return e.createElement(ea,{key:"moveable"+r,ref:f(t,"moveables",r),target:n,origin:!1,cssStyled:o.cssStyled,customStyledMap:o.customStyledMap,useResizeObserver:o.useResizeObserver,parentMoveable:t,parentPosition:i})})}},ra=yn("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(t,e){e.isRequest||ut(window,"click",t.onPreventClick,!0)},dragControlStart:function(t,e){this.dragStart(t,e)},dragGroupStart:function(t,e){this.dragStart(t,e),e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){this.endEvent(t);var n=t.state.target,r=e.inputEvent,i=e.inputTarget,o=!t.isMoveableElement(i)&&t.controlBox.getElement().contains(i);if(e.isDrag&&!o||this.unset(t),r&&i&&!e.isDrag&&!t.isMoveableElement(i)&&!o){var a=n.contains(i);dr(t,"onClick",lr(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,containsTarget:a}))}},dragGroupEnd:function(t,e){this.endEvent(t);var n=e.inputEvent,r=e.inputTarget;if(n&&r&&!e.isDrag&&!t.isMoveableElement(r)&&e.datas.inputTarget!==r){var i=t.props.targets,o=i.indexOf(r),a=o>-1,s=!1;-1===o&&(s=(o=W(i,function(t){return t.contains(r)}))>-1),dr(t,"onClickGroup",lr(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:o,isTarget:a,containsTarget:s}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)},endEvent:function(t){var e=this;H(function(){e.unset(t)})},unset:function(t){lt(window,"click",t.onPreventClick,!0)}});function ia(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),mn(mn({},t),{datas:e})}var oa=yn("edgeDraggable",{dragControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var n=e.inputEvent.target;return at(n,Tn("direction"))&&at(n,Tn("line"))},dragControlStart:function(t,e){return Qi.dragStart(t,ia(e))},dragControl:function(t,e){return Qi.drag(t,ia(e))},dragControlEnd:function(t,e){return Qi.dragEnd(t,ia(e))},dragGroupControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var n=e.inputEvent.target;return at(n,Tn("direction"))&&at(n,Tn("line"))},dragGroupControlStart:function(t,e){return Qi.dragGroupStart(t,ia(e))},dragGroupControl:function(t,e){return Qi.dragGroup(t,ia(e))},dragGroupControlEnd:function(t,e){return Qi.dragGroupEnd(t,ia(e))},unset:function(t){return Qi.unset(t)}}),aa={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},sa=[Ko,Do,Ji,Dr,Qi,oa,lo,co,fo,vo,wo,Mo,So,Wo,qo,$o,na,aa,ra,Eo,Uo],ua=sa.reduce(function(t,e){return mn(mn({},t),"events"in e?e.events:{})},{}),la=sa.reduce(function(t,e){return mn(mn({},t),e.props)},{}),ca=function(t){var e={};for(var n in t)e[t[n]]=n;return e}(ua),da=Object.keys(ca),fa=Object.keys(la);function pa(t,e){return Math.max.apply(Math,t.map(function(t){var n=t[0],r=t[1],i=t[2],o=t[3];return Math.max(n[e],r[e],i[e],o[e])}))}function ha(t,e){return Math.min.apply(Math,t.map(function(t){var n=t[0],r=t[1],i=t[2],o=t[3];return Math.min(n[e],r[e],i[e],o[e])}))}var va=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new Te,e.moveables=[],e.transformOrigin="50% 50%",e}gn(e,t);var n=e.prototype;return n.checkUpdate=function(){this.updateAbles()},n.updateRect=function(t,e,n){if(void 0===n&&(n=!0),this.controlBox){this.moveables.forEach(function(e){e.updateRect(t,!1,!1)});var r=this.state,i=this.props,o=r.target||i.target;(!e||""!==t&&i.updateGroup)&&(this.rotation=i.defaultGroupRotate,this.transformOrigin=i.defaultGroupOrigin||"50% 50%",this.scale=[1,1]);var a=this.rotation,s=this.scale,u=function(t,e){if(!t.length)return[0,0,0,0];var n=t.map(function(t){return sr(t.state)}),r=Rn,i=Rn,o=0,a=0,s=it(e,Mn);if(s%90){var u=s/180*Math.PI,l=Math.tan(u),c=-1/l,d=[_n,Rn],f=[_n,Rn];n.forEach(function(t){t.forEach(function(t){var e=t[1]-l*t[0],n=t[1]-c*t[0];d[0]=Math.max(d[0],e),d[1]=Math.min(d[1],e),f[0]=Math.max(f[0],n),f[1]=Math.min(f[1],n)})}),d.forEach(function(t){f.forEach(function(e){var n=(e-t)/(l-c),o=l*n+t;r=Math.min(r,n),i=Math.min(i,o)})});var p=n.map(function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return[be(e,-u),be(n,-u),be(r,-u),be(i,-u)]});o=pa(p,0)-ha(p,0),a=pa(p,1)-ha(p,1)}else if(r=ha(n,0),i=ha(n,1),o=pa(n,0)-r,a=pa(n,1)-i,s%180){var h=o;o=a,a=h}return[r,i,o,a]}(this.moveables,a),l=u[0],c=u[1],d=u[2],f=u[3],p="rotate("+a+"deg) scale("+(s[0]>=0?1:-1)+", "+(s[1]>=0?1:-1)+")";o.style.cssText+="left:0px;top:0px; transform-origin: "+this.transformOrigin+"; width:"+d+"px; height:"+f+"px;transform:"+p,r.width=d,r.height=f;var h=this.getContainer(),v=rr(this.controlBox.getElement(),o,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||h),g=[v.left,v.top],m=sr(v),b=m[0],y=m[1],x=m[2],E=m[3],S=Ge([b,y,x,E]),C=[S.minX,S.minY];v.pos1=de(b,C),v.pos2=de(y,C),v.pos3=de(x,C),v.pos4=de(E,C),v.left=l-v.left+C[0],v.top=c-v.top+C[1],v.origin=de(ce(g,v.origin),C),v.beforeOrigin=de(ce(g,v.beforeOrigin),C),v.originalBeforeOrigin=ce(g,v.originalBeforeOrigin);var w=v.targetClientRect,D=s[0]*s[1]>0?1:-1;w.top+=v.top-r.top,w.left+=v.left-r.left,o.style.transform="translate("+-C[0]+"px, "+-C[1]+"px) "+p,this.updateState(mn(mn({},v),{direction:D,beforeDirection:D}),n)}},n.getRect=function(){return mn(mn({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},n.triggerEvent=function(e,n,r){if(r||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,n)},n.updateAbles=function(){t.prototype.updateAbles.call(this,bn(bn([],this.props.ables),[na]),"Group")},n._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},n._updateEvents=function(){var t=this.state,e=this.props,n=this._prevTarget,r=e.dragTarget||this.areaElement;n!==r&&(ur(this,"targetGesto"),ur(this,"controlGesto"),t.target=null),t.target||(t.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetGesto=Jo(this,r,"Group"),this.controlGesto=Qo(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var i=!hr(t.container,e.container);i&&(t.container=e.container);var o=this.differ.update(e.targets),a=o.added,s=o.changed,u=o.removed;(i||a.length||s.length||u.length)&&this.updateRect()},n._updateObserver=function(){},e.defaultProps=mn(mn({},ea.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(ea),ga=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveables=[],e}gn(e,t);var n=e.prototype;return n.render=function(){var t=this,e=this.props,n=e.cspNonce,r=e.cssStyled,i=e.targets;return Et(r,{cspNonce:n,ref:d(this,"controlBox"),className:Tn("control-box")},i.map(function(e,n){return Et(ea,mn({key:"moveable"+n,ref:f(t,"moveables",n)},t.props,{target:e,wrapperMoveable:t}))}))},n.componentDidUpdate=function(){},n.updateRect=function(t,e,n){void 0===n&&(n=!0),this.moveables.forEach(function(r){r.updateRect(t,e,n)})},n.getRect=function(){return mn(mn({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},n.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},n.dragStart=function(){return this},n.hitTest=function(){return 0},n.isInside=function(){return!1},n.isDragging=function(){return!1},n.updateRenderPoses=function(){},n.checkUpdate=function(){},n.triggerEvent=function(){},n.updateAbles=function(){},n._updateEvents=function(){},n._updateObserver=function(){},e}(ea),ma=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e}gn(e,t);var n,r,i=e.prototype;return e.makeStyled=function(){var t={};this.getTotalAbles().forEach(function(e){var n=e.css;n&&n.forEach(function(e){t[e]=!0})});var e,n=K(t).join("\n");this.defaultStyled=hn("div",(e=Sn,(Cn+n).replace(/([^}{]*){/gm,function(t,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+e+"$1")+"{"})))},e.getTotalAbles=function(){return bn([Do,na,aa,Eo],this.defaultAbles)},i.render=function(){var t=this.constructor;t.defaultStyled||t.makeStyled();var e=this.props,n=e.ables,r=e.props,i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["ables","props"]),o=function(t,e){var n=[];return t.forEach(function(t){t&&(T(t)?e[t]&&n.push.apply(n,e[t]):n.push(t))}),n}(this._updateRefs(!0),this.selectorMap),a=o.length>1,s=bn(bn([],t.getTotalAbles()),n||[]),u=mn(mn(mn({},i),r||{}),{ables:s,cssStyled:t.defaultStyled,customStyledMap:t.customStyledMap});return a?i.individualGroupable?Et(ga,mn({key:"individual-group",ref:d(this,"moveable")},u,{target:null,targets:o})):Et(va,mn({key:"group",ref:d(this,"moveable")},u,{target:null,targets:o})):Et(ea,mn({key:"single",ref:d(this,"moveable")},u,{target:o[0]}))},i.componentDidMount=function(){this._updateRefs()},i.componentDidUpdate=function(){this._updateRefs()},i.getManager=function(){return this.moveable},i._updateRefs=function(t){var e=this.refTargets,n=Cr(this.props.target||this.props.targets),r="undefined"!=typeof document,i=e.length!==n.length||e.some(function(t,e){var r=n[e];return!(!t&&!r)&&t!==r}),o=this.selectorMap,a={};return this.refTargets.forEach(function(t){T(t)&&(!o[t]&&r?(i=!0,a[t]=[].slice.call(document.querySelectorAll(t))):a[t]=o[t])}),this.refTargets=n,this.selectorMap=a,!t&&i&&this.forceUpdate(),n},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);o>3&&a&&Object.defineProperty(e,n,a)}([(n=Bn,void 0===r&&(r={}),function(t,e){n.forEach(function(n){var i=r[n]||n;i in t||(t[i]=function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=(t=this[e])[n].apply(t,r);return o===this[e]?this:o})})})],e.prototype,"moveable",void 0),e}(Bt);const ba=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gn(e,t),e.defaultAbles=sa,e}(ma);var ya=function(t,e){return(ya=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function xa(t,e){function n(){this.constructor=t}ya(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ea=function(){return(Ea=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var Sa=function(t){function e(e){var n=t.call(this,e)||this;return n.state={},n.state=n.props,n}return xa(e,t),e.prototype.render=function(){return t=Et(ba,Ea({ref:d(this,"moveable")},this.state)),e=this.state.parentElement,Et(Tt,{element:t,container:e});var t,e},e}(kt),Ca=fa,wa=Bn,Da=da,Ma=function(){return(Ma=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};const Ra=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xa(e,t),e}(function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;r.tempElement=document.createElement("div");var i=Ea({},n),o={};Da.forEach(function(t){o[Y("on "+t)]=function(e){return r.trigger(t,e)}}),It(Et(Sa,Ea({ref:d(r,"innerMoveable"),parentElement:e},i,o)),r.tempElement);var a=i.target;return B(a)&&a.length>1&&r.updateRect(),r}xa(e,t);var n=e.prototype;return n.setState=function(t,e){this.innerMoveable.setState(t,e)},n.destroy=function(){It(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([p(wa,function(t,e){t[e]||(t[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.getMoveable();if(r&&r[e])return r[e].apply(r,t)})}),p(Ca,function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var n;this.setState(((n={})[e]=t,n))},enumerable:!0,configurable:!0})})],e)}(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(k(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(k(t))for(var n in t)this.off(n);else if(e){var r=this._events[t];if(r){var i=W(r,function(t){return t.listener===e});i>-1&&r.splice(i,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var n=this;return e&&this._addEvent(t,e,{once:!0}),new Promise(function(e){n._addEvent(t,e,{once:!0})})},e.emit=function(t,e){var n=this;void 0===e&&(e={});var r=this._events[t];if(!t||!r)return!0;var i=!1;return e.eventType=t,e.stop=function(){i=!0},e.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(r).forEach(function(r){r.listener(e),r.once&&n.off(t,r.listener)}),!i},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(Ma({listener:e},n))},t}()));var _a=n("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/Subject.js"),Oa=n("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/operators/first.js"),Pa=function(t,e){return(Pa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var ka="object",Ba="string";function Ta(t){return t&&typeof t===ka}function za(t){return Array.isArray(t)}function ja(t){return typeof t===Ba}function Ga(t,e,n,r){t.addEventListener(e,n,r)}function Ia(t,e,n){t.removeEventListener(e,n)}var Aa=function(){return(Aa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var Fa=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(Ta(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(Ta(t))for(var n in t)this.off(n);else if(e){var r=this._events[t];if(r){var i=function(t,e,n){void 0===n&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}(r,function(t){return t.listener===e});i>-1&&r.splice(i,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var n=this;return e&&this._addEvent(t,e,{once:!0}),new Promise(function(e){n._addEvent(t,e,{once:!0})})},e.emit=function(t,e){var n=this;void 0===e&&(e={});var r=this._events[t];if(!t||!r)return!0;var i=!1;return e.eventType=t,e.stop=function(){i=!0},e.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(r).forEach(function(r){r.listener(e),r.once&&n.off(t,r.listener)}),!i},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(Aa({listener:e},n))},t}();var Na,La=function(t,e){return t(e={exports:{}},e.exports),e.exports}(function(t,e){function n(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return a[t];var n,o=String(t);return(n=r[o.toLowerCase()])?n:(n=i[o.toLowerCase()])||(1===o.length?o.charCodeAt(0):void 0)}n.isEventKey=function(t,e){if(t&&"object"==typeof t){var n=t.which||t.keyCode||t.charCode;if(null===n||void 0===n)return!1;if("string"==typeof e){var o;if(o=r[e.toLowerCase()])return o===n;if(o=i[e.toLowerCase()])return o===n}else if("number"==typeof e)return e===n;return!1}};var r=(e=t.exports=n).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=e.aliases={windows:91,"â§":16,"â¥":18,"â":17,"â":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)r[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)r[o-48]=o;for(o=1;o<13;o++)r["f"+o]=o+111;for(o=0;o<10;o++)r["numpad "+o]=o+96;var a=e.names=e.title={};for(o in r)a[r[o]]=o;for(var s in i)r[s]=i[s]}),Ya=(La.code,La.codes,La.aliases,La.names),Xa=(La.title,{"+":"plus","left command":"meta","right command":"meta"}),qa={shift:1,ctrl:2,alt:3,meta:4};function Wa(t){var e=Ya[t]||"";for(var n in Xa)e=e.replace(n,Xa[n]);return e.replace(/\s/g,"")}function Va(t,e){void 0===e&&(e=Wa(t.keyCode));var n=function(t){return[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"].filter(Boolean)}(t);return-1===n.indexOf(e)&&n.push(e),n.filter(Boolean)}function Ha(t){var e=t.slice();return e.sort(function(t,e){return(qa[t]||5)-(qa[e]||5)}),e}const $a=function(t){function e(e){void 0===e&&(e=window);var n=t.call(this)||this;return n.container=e,n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n.clear=function(){return n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n},n.keydownEvent=function(t){n.triggerEvent("keydown",t)},n.keyupEvent=function(t){n.triggerEvent("keyup",t)},n.blur=function(){n.clear(),n.trigger("blur")},Ga(e,"blur",n.blur),Ga(e,"keydown",n.keydownEvent),Ga(e,"keyup",n.keyupEvent),n}!function(t,e){function n(){this.constructor=t}Pa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return Object.defineProperty(e,"global",{get:function(){return Na||(Na=new e)},enumerable:!1,configurable:!0}),e.setGlobal=function(){return this.global},n.destroy=function(){var t=this.container;this.clear(),this.off(),Ia(t,"blur",this.blur),Ia(t,"keydown",this.keydownEvent),Ia(t,"keyup",this.keyupEvent)},n.keydown=function(t,e){return this.addEvent("keydown",t,e)},n.offKeydown=function(t,e){return this.removeEvent("keydown",t,e)},n.offKeyup=function(t,e){return this.removeEvent("keyup",t,e)},n.keyup=function(t,e){return this.addEvent("keyup",t,e)},n.addEvent=function(t,e,n){return za(e)?this.on(t+"."+Ha(e).join("."),n):ja(e)?this.on(t+"."+e,n):this.on(t,e),this},n.removeEvent=function(t,e,n){return za(e)?this.off(t+"."+Ha(e).join("."),n):ja(e)?this.off(t+"."+e,n):this.off(t,e),this},n.triggerEvent=function(t,e){this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey;var n=Wa(e.keyCode),r={key:n,isToggle:"ctrl"===n||"shift"===n||"meta"===n||"alt"===n,inputEvent:e,keyCode:e.keyCode,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey};this.trigger(t,r),this.trigger(t+"."+n,r);var i=Va(e,n);i.length>1&&this.trigger(t+"."+i.join("."),r)},e}(Fa);var Ka=function(t,e){return(Ka=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Ua(t,e){function n(){this.constructor=t}Ka(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Za=function(){return(Za=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Ja(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},o=i.className,a=void 0===o?"":o,s=i.style;return{tag:t,className:a,style:void 0===s?{}:s,attributes:function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(i,["className","style"]),children:n}}function Qa(t,e,n){t!==e&&n(t,e)}function ts(t,e,n){var r;void 0===n&&(n=t.datas.boundArea);var i=t.distX,o=void 0===i?0:i,a=t.distY,s=void 0===a?0:a,u=t.datas,l=u.startX,c=u.startY;if(e>0){var d=Math.sqrt((o*o+s*s)/(1+e*e));o=(o>=0?1:-1)*(e*d),s=(s>=0?1:-1)*d}var f=Math.abs(o),p=Math.abs(s);f=(r=Q([f,p],[0,0],[o<0?l-n.left:n.right-l,s<0?c-n.top:n.bottom-c],!!e))[0],p=r[1],o=(o>=0?1:-1)*f,s=(s>=0?1:-1)*p;var h=l+Math.min(0,o),v=c+Math.min(0,s);return{left:h,top:v,right:h+f,bottom:v+p,width:f,height:p}}function es(t){var e=t.getBoundingClientRect(),n=e.left,r=e.top,i=e.width,o=e.height;return{pos1:[n,r],pos2:[n+i,r],pos3:[n,r+o],pos4:[n+i,r+o]}}function ns(t,e){var n=Be(t,e),r=n.list,i=n.prevList,o=n.added,a=n.removed;return o.map(function(t){return r[t]}).concat(a.map(function(t){return i[t]}))}var rs=ln("\n:host {\n    position: fixed;\n    display: none;\n    border: 1px solid #4af;\n    background: rgba(68, 170, 255, 0.5);\n    z-index: 100;\n}\n:host {\n    position: absolute;\n}\n"),is="selecto-selection "+rs.className,os=["boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","toggleContinueSelect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd"];(function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a]})(["dragContainer","cspNonce"],os),Array,Boolean,Boolean,Boolean,Array,Number,Object,Boolean,Boolean,String,Number,Function,Boolean,Object,Function,Boolean;const as=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ua(e,t),e}(function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;return n.selectedTargets=[],n.dragScroll=new $e,n._onDragStart=function(t,e){var r=t.datas,i=t.clientX,o=t.clientY,a=t.inputEvent,s=n.options,u=s.continueSelect,l=s.selectFromInside,c=s.selectByClick,d=s.rootContainer,f=s.boundContainer,p=s.preventDragFromInside,h=void 0===p||p,v=s.clickBySelectEnd,g=s.dragCondition;if(!g||g(t)){n.findSelectableTargets(r),r.startSelectedTargets=n.selectedTargets,r.scaleMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.containerX=0,r.containerY=0;var m={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(d){var b=n.container.getBoundingClientRect();r.containerX=b.left,r.containerY=b.top,r.scaleMatrix=function(t,e){void 0===e&&(e=document.body);for(var n=t,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];n&&(r=xe(Me(getComputedStyle(n).transform),r),n!==e);)n=n.parentElement;return(r=oe(r,4))[12]=0,r[13]=0,r[14]=0,r}(n.container,d)}if(f){var y=k(f)&&"element"in f?Za({left:!0,top:!0,bottom:!0,right:!0},f):{element:f,left:!0,top:!0,bottom:!0,right:!0},x=y.element;if(x){var E=(T(x)?document.querySelector(x):!0===x?n.container:x).getBoundingClientRect();y.left&&(m.left=E.left),y.top&&(m.top=E.top),y.right&&(m.right=E.right),y.bottom&&(m.bottom=E.bottom)}}r.boundArea=m;var S={left:i,top:o,right:i,bottom:o,width:0,height:0},C=[];if(c&&!v){var w=n._findElement(e||document.elementFromPoint(i,o),r.selectableTargets);C=w?[w]:[]}var D=C.length>0,M=!l&&D;if(M&&!c)return t.stop(),!1;var R=a.type,_="mousedown"===R||"touchstart"===R;if(!(!(!t.isClick&&_)||n.emit("dragStart",Za({},t))))return t.stop(),!1;u?(C=ns(n.selectedTargets,C),r.startPassedTargets=n.selectedTargets):r.startPassedTargets=[],n.select(n.selectedTargets,C,S,a,!0),r.startX=i,r.startY=o,r.selectFlag=!1,r.preventDragFromInside=!1;var O=Re(r.scaleMatrix,[i-r.containerX,o-r.containerY]);if(r.boundsArea=n.target.style.cssText+="position: "+(d?"absolute":"fixed")+";left:0px;top:0px;transform: translate("+O[0]+"px, "+O[1]+"px)",M&&c&&!v)a.preventDefault(),h&&(n.selectEnd(r.startSelectedTargets,r.startPassedTargets,S,t),r.preventDragFromInside=!0);else{r.selectFlag=!0,"touchstart"===R&&a.preventDefault();var P=n.options.scrollOptions;P&&P.container&&n.dragScroll.dragStart(t,P),v&&(r.selectFlag=!1,t.preventDrag())}return!0}t.stop()},n._onDrag=function(t){var e;if(t.datas.selectFlag){var r=n.scrollOptions;if((null===(e=r)||void 0===e?void 0:e.container)&&n.dragScroll.drag(t,r))return}n._checkSelected(t)},n._onDragEnd=function(t){var e=t.datas,r=t.inputEvent,i=ts(t,n.options.ratio),o=e.selectFlag;if(r&&!t.isClick&&n.emit("dragEnd",Za(Za({isDouble:!!t.isDouble,isDrag:!1,isSelect:o},t),{isClick:!!t.isClick,rect:i})),n.target.style.cssText+="display: none;",o)e.selectFlag=!1,n.dragScroll.dragEnd();else if(n.selectByClick&&n.clickBySelectEnd){var a=n._findElement(document.elementFromPoint(t.clientX,t.clientY),e.selectableTargets);n.select(n.selectedTargets,a?[a]:[],i,r)}e.preventDragFromInside||n.selectEnd(e.startSelectedTargets,e.startPassedTargets,i,t)},n._onKeyDown=function(t){n._sameCombiKey(t)&&(n.continueSelect=!0,n.emit("keydown",{}))},n._onKeyUp=function(t){n._sameCombiKey(t,!0)&&(n.continueSelect=!1,n.emit("keyup",{}))},n._onBlur=function(){n.toggleContinueSelect&&n.continueSelect&&(n.continueSelect=!1,n.emit("keyup",{}))},n._onDocumentSelectStart=function(t){if(n.gesto.isFlag()){var e=n.dragContainer;e===window&&(e=document.documentElement);var r=e instanceof Element?[e]:[].slice.call(e),i=t.target;r.some(function(e){if(e===i||e.contains(i))return t.preventDefault(),!0})}},n.target=e.portalContainer,n.container=e.container||document.body,n.options=Za({portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,toggleContinueSelect:null,keyContainer:null,scrollOptions:void 0,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,getElementRect:es,cspNonce:"",ratio:0},e),n.initElement(),n.initDragScroll(),n.setKeyController(),n}Ua(e,t);var n=e.prototype;return n.setSelectedTargets=function(t){return this.selectedTargets=t,this},n.getSelectedTargets=function(){return this.selectedTargets},n.setKeyContainer=function(t){var e=this,n=this.options;Qa(n.keyContainer,t,function(){n.keyContainer=t,e.setKeyController()})},n.setToggleContinueSelect=function(t){var e=this,n=this.options;Qa(n.toggleContinueSelect,t,function(){n.toggleContinueSelect=t,e.setKeyEvent()})},n.setPreventDefault=function(t){this.gesto.options.preventDefault=t},n.setCheckInput=function(t){this.gesto.options.checkInput=t},n.triggerDragStart=function(t){return this.gesto.triggerDragStart(t),this},n.destroy=function(){this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),lt(document,"selectstart",this._onDocumentSelectStart),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},n.getElementPoints=function(t){var e=this.getElementRect||es,n=e(t),r=[n.pos1,n.pos2,n.pos4,n.pos3];return e!==es?je(r,t.getBoundingClientRect()):r},n.getSelectableElements=function(){var t=[];return this.options.selectableTargets.forEach(function(e){k(e)?t.push(e):[].slice.call(document.querySelectorAll(e)).forEach(function(e){t.push(e)})}),t},n.checkScroll=function(){var t;if(this.gesto.isFlag()){var e=this.scrollOptions;(null===(t=e)||void 0===t?void 0:t.container)&&this.dragScroll.checkScroll(Za({inputEvent:this.gesto.getCurrentEvent()},e))}},n.findSelectableTargets=function(t){var e=this;void 0===t&&(t=this.gesto.getEventDatas());var n=this.getSelectableElements(),r=n.map(function(t){return e.getElementPoints(t)});t.selectableTargets=n,t.selectablePoints=r},n.clickTarget=function(t,e){var n=function(t){if("touches"in t){var e=t.touches[0]||t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}return{clientX:t.clientX,clientY:t.clientY}}(t),r={datas:{selectFlag:!1},clientX:n.clientX,clientY:n.clientY,inputEvent:t,isClick:!0,stop:function(){return!1}};return this._onDragStart(r,e)&&this._onDragEnd(r),this},n.setKeyController=function(){var t=this.options,e=t.keyContainer,n=t.toggleContinueSelect;this.keycon&&(this.keycon.destroy(),this.keycon=null),n&&(this.keycon=new $a(e||window),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},n.setKeyEvent=function(){this.options.toggleContinueSelect&&!this.keycon&&this.setKeyController()},n.initElement=function(){this.target=function t(e,n,r){var i=e.tag,o=e.children,a=e.attributes,s=e.className,u=e.style,l=n||document.createElement(i);for(var c in a)l.setAttribute(c,a[c]);var d=l.children;if(o.forEach(function(e,n){t(e,d[n],l)}),s&&s.split(" ").forEach(function(t){at(l,t)||st(l,t)}),u){var f=l.style;for(var c in u)f[c]=u[c]}return!n&&r&&r.appendChild(l),l}(Ja("div",{className:is}),this.target,this.container);var t=this.target,e=this.options,n=e.dragContainer,r=e.checkInput,i=e.preventDefault;this.dragContainer="string"==typeof n?[].slice.call(document.querySelectorAll(n)):n||this.target.parentNode,this.gesto=new an(this.dragContainer,{checkWindowBlur:!0,container:window,checkInput:r,preventDefault:i}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),ut(document,"selectstart",this._onDocumentSelectStart),this.injectResult=rs.inject(t,{nonce:this.options.cspNonce})},n.hitTest=function(t,e,n,r,i){var o=this.options,a=o.hitRate,s=o.selectByClick,u=t.left,l=t.top,c=t.right,d=t.bottom,f=[[u,l],[c,l],[c,d],[u,d]];return r.filter(function(t,r){var o=i[r],u=Ie([e,n],o);if(s&&u)return!0;var l=Ye(f,o);if(!l.length)return!1;var c=ze(l),d=ze(o),p=L(""+a);return"px"===p.unit?c>=p.value:Z(Math.round(c/d*100),0,100)>=Math.min(100,p.value)})},n.initDragScroll=function(){var t=this;this.dragScroll.on("scroll",function(e){var n=e.container,r=e.direction;t.emit("scroll",{container:n,direction:r})}).on("move",function(e){var n=e.offsetX,r=e.offsetY,i=e.inputEvent,o=t.gesto;if(o&&o.isFlag()){var a=t.gesto.getEventDatas(),s=a.boundArea;a.startX-=n,a.startY-=r,a.selectablePoints.forEach(function(t){t.forEach(function(t){t[0]-=n,t[1]-=r})}),s.left-=n,s.right-=n,s.top-=r,s.bottom-=r,t.gesto.scrollBy(n,r,i.inputEvent,!1),t._checkSelected(t.gesto.getCurrentEvent())}})},n.select=function(t,e,n,r,i){var o=Be(t,e),a=o.added,s=o.removed,u=o.prevList,l=o.list;this.selectedTargets=e,i&&this.emit("selectStart",{selected:e,added:a.map(function(t){return l[t]}),removed:s.map(function(t){return u[t]}),rect:n,inputEvent:r}),(a.length||s.length)&&this.emit("select",{selected:e,added:a.map(function(t){return l[t]}),removed:s.map(function(t){return u[t]}),rect:n,inputEvent:r})},n.selectEnd=function(t,e,n,r){var i=r.inputEvent,o=r.isDouble,a=Be(t,this.selectedTargets),s=a.added,u=a.removed,l=a.prevList,c=a.list,d=Be(e,this.selectedTargets),f=d.added,p=d.removed,h=d.prevList,v=d.list,g=i&&i.type,m="mousedown"===g||"touchstart"===g;this.emit("selectEnd",{selected:this.selectedTargets,added:s.map(function(t){return c[t]}),removed:u.map(function(t){return l[t]}),afterAdded:f.map(function(t){return v[t]}),afterRemoved:p.map(function(t){return h[t]}),isDragStart:m,isClick:!!r.isClick,isDouble:!!o,rect:n,inputEvent:i})},n._checkSelected=function(t,e){void 0===e&&(e=ts(t,this.options.ratio));var n=t.datas,r=t.inputEvent,i=e.top,o=e.left,a=e.width,s=e.height,u=n.selectFlag,l=n.containerX,c=n.containerY,d=n.scaleMatrix,f=Re(d,[o-l,i-c]),p=Re(d,[a,s]),h=[],v=[];if(u){this.target.style.cssText+="display: block;left:0px;top:0px;pointer-events: none;transform: translate("+f[0]+"px, "+f[1]+"px);width:"+p[0]+"px;height:"+p[1]+"px;";var g=this.hitTest(e,n.startX,n.startY,n.selectableTargets,n.selectablePoints);h=this.selectedTargets,v=ns(n.startPassedTargets,g),this.selectedTargets=v}if(!1===this.emit("drag",Za(Za({},t),{isSelect:u,rect:e})))return this.target.style.cssText+="display: none;",void t.stop();u&&this.select(h,v,e,r)},n._sameCombiKey=function(t,e){var n=[].concat(this.options.toggleContinueSelect),r=Va(t.inputEvent,t.key),i=B(n[0])?n:[n];if(e){var o=t.key;return i.some(function(t){return t.some(function(t){return t===o})})}return i.some(function(t){return t.every(function(t){return r.indexOf(t)>-1})})},n._findElement=function(t,e){for(var n=t;n&&!(e.indexOf(n)>-1);)n=n.parentElement;return n},e=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([p(os,function(t,e){var n={enumerable:!0,configurable:!0,get:function(){return this.options[e]}},r=Y("set "+e);t[r]?n.set=function(t){this[r](t)}:n.set=function(t){this.options[e]=t},Object.defineProperty(t,e,n)})],e)}(qe));var ss=n("./public/app/core/config.ts"),us=n("./public/app/features/canvas/index.ts"),ls=n("./public/app/features/dimensions/utils.ts"),cs=n("./public/app/plugins/panel/canvas/types.ts"),ds=n("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const fs=["placement","constraint"];class ps extends i.f{constructor(t,e,n){var r,i,o;super(t,e),this.options=t,this.scene=e,this.changeCallback=n,o=(t=>{this.div=t}),(i="setRootRef")in(r=this)?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,this.options=t,this.scene=e,this.changeCallback=n,this.sizeStyle={height:"100%",width:"100%"}}isRoot(){return!0}onChange(t){this.revId++,this.options=Object.assign({},t),this.changeCallback()}getSaveModel(){const t=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(this.options,fs);return Object.assign({},t,{elements:this.elements.map(t=>t.getSaveModel())})}render(){return(0,ds.jsx)("div",{ref:this.setRootRef,style:Object.assign({},this.sizeStyle,this.dataStyle),children:this.elements.map(t=>t.render())},this.UID)}}function hs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class vs{constructor(t,e,n){var r=this;this.onSave=n,hs(this,"styles",gs(ss.vc.theme2)),hs(this,"selection",new s.t(1)),hs(this,"moved",new _a.x),hs(this,"byName",new Map),hs(this,"root",void 0),hs(this,"revId",0),hs(this,"width",0),hs(this,"height",0),hs(this,"style",{}),hs(this,"data",void 0),hs(this,"selecto",void 0),hs(this,"moveable",void 0),hs(this,"div",void 0),hs(this,"currentLayer",void 0),hs(this,"isEditingEnabled",void 0),hs(this,"skipNextSelectionBroadcast",!1),hs(this,"getNextElementName",function(){const t=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"Frame":"Element";let e=r.byName.size+1;const n=e+100;for(;e<n;){const n=`${t} ${e++}`;if(!r.byName.has(n))return n}return`${t} ${Date.now()}`}),hs(this,"canRename",t=>!this.byName.has(t)),hs(this,"context",{getColor:t=>(0,ls.FP)(this.data,t),getScale:t=>(0,ls.pb)(this.data,t),getScalar:t=>(0,ls.z2)(this.data,t),getText:t=>(0,ls.WO)(this.data,t),getResource:t=>(0,ls.Qz)(this.data,t)}),hs(this,"generateFrameContainer",t=>{let e=1/0,n=1/0,r=0,i=0;return t.forEach(t=>{var o;const a=null===(o=t.div)||void 0===o?void 0:o.getBoundingClientRect();a&&(e>a.top&&(e=a.top),n>a.left&&(n=a.left),r<a.right&&(r=a.right),i<a.bottom&&(i=a.bottom))}),{top:e,left:n,width:r-n,height:i-e}}),hs(this,"save",function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r.onSave(r.root.getSaveModel()),t&&setTimeout(()=>{r.div&&r.initMoveable(!0,r.isEditingEnabled)},100)}),hs(this,"findElementByTarget",t=>{const e=[...this.root.elements];for(;e.length>0;){const n=e.shift();if(n&&n.div&&n.div===t)return n;const r=n instanceof i.f?n.elements:[];for(const t of r)e.unshift(t)}}),hs(this,"setRef",t=>{this.div=t}),hs(this,"select",t=>{this.selecto&&(this.selecto.setSelectedTargets(t.targets),this.updateSelection(t))}),hs(this,"updateSelection",t=>{if(this.moveable.target=t.targets,this.skipNextSelectionBroadcast)this.skipNextSelectionBroadcast=!1;else if(t.frame)this.selection.next([t.frame]);else{const e=t.targets.map(t=>this.findElementByTarget(t));this.selection.next(e)}}),hs(this,"generateTargetElements",t=>{let e=[];const n=[...t];for(;n.length>0;){const t=n.shift();t&&t.div&&e.push(t.div);const r=t instanceof i.f?t.elements:[];for(const t of r)n.unshift(t)}return e}),hs(this,"initMoveable",function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=r.generateTargetElements(r.root.elements);t&&r.selecto&&r.selecto.destroy(),r.selecto=new as({container:r.div,selectableTargets:n,selectByClick:!0}),r.moveable=new Ra(r.div,{draggable:e,resizable:e,origin:!1}).on("clickGroup",t=>{r.selecto.clickTarget(t.inputEvent,t.inputTarget)}).on("drag",t=>{r.findElementByTarget(t.target).applyDrag(t)}).on("dragGroup",t=>{t.events.forEach(t=>{r.findElementByTarget(t.target).applyDrag(t)})}).on("dragEnd",t=>{const e=r.findElementByTarget(t.target);e&&(null===e||void 0===e||e.setPlacementFromConstraint()),r.moved.next(Date.now())}).on("resize",t=>{r.findElementByTarget(t.target).applyResize(t),r.moved.next(Date.now())}).on("resizeGroup",t=>{t.events.forEach(t=>{r.findElementByTarget(t.target).applyResize(t)}),r.moved.next(Date.now())}).on("resizeEnd",t=>{const e=r.findElementByTarget(t.target);e&&(null===e||void 0===e||e.setPlacementFromConstraint())});let i=[];r.selecto.on("dragStart",t=>{const e=t.inputEvent.target;(r.moveable.isMoveableElement(e)||i.some(t=>t===e||t.contains(e)))&&t.stop()}).on("selectEnd",t=>{i=t.selected,r.updateSelection({targets:i}),t.isDragStart&&(t.inputEvent.preventDefault(),setTimeout(()=>{r.moveable.dragStart(t.inputEvent)}))})}),this.onSave=n,this.root=this.load(t,e)}load(t,e){return this.root=new ps(null!==t&&void 0!==t?t:{type:"frame",elements:[us.Nm]},this,this.save),this.isEditingEnabled=e,setTimeout(()=>{if(this.div){const t=e;this.initMoveable(t,e),this.currentLayer=this.root,this.selection.next([])}},100),this.root}updateData(t){this.data=t,this.root.updateData(this.context)}updateSize(t,e){var n;this.width=t,this.height=e,this.style={width:t,height:e},null!==(n=this.selecto)&&void 0!==n&&n.getSelectedTargets().length&&this.clearCurrentSelection()}frameSelection(){this.selection.pipe((0,Oa.P)()).subscribe(t=>{var e;const n=t[0].parent,r=new i.f({type:"frame",name:this.getNextElementName(!0),elements:[]},this,t[0].parent),o=this.generateFrameContainer(t);r.options.placement=o,t.forEach(t=>{var e;const i=null===(e=t.div)||void 0===e?void 0:e.getBoundingClientRect();t.setPlacementFromConstraint(i,o),n.doAction(cs.G.Delete,t),r.doAction(cs.G.Duplicate,t,!1,!1)}),r.setPlacementFromConstraint(o,null===(e=n.div)||void 0===e?void 0:e.getBoundingClientRect()),n.elements.push(r),this.byName.set(r.getName(),r),this.save()})}clearCurrentSelection(){var t;let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.skipNextSelectionBroadcast=e;let n=new MouseEvent("click");null===(t=this.selecto)||void 0===t||t.clickTarget(n,this.div)}updateCurrentLayer(t){this.currentLayer=t,this.clearCurrentSelection(),this.save()}render(){return(0,ds.jsx)("div",{className:this.styles.wrap,style:this.style,ref:this.setRef,children:this.root.render()},this.revId)}}const gs=(0,c.stylesFactory)(t=>({wrap:o.css`
    overflow: hidden;
    position: relative;
  `,toolbar:o.css`
    position: absolute;
    bottom: 0;
    margin: 10px;
  `}));var ms,bs,ys,xs=n("./public/app/types/events.ts"),Es=n("./.yarn/__virtual__/react-draggable-virtual-eb201fa540/0/cache/react-draggable-npm-4.4.4-f0b7a5c546-b8258a5893.zip/node_modules/react-draggable/build/cjs/cjs.js"),Ss=n.n(Es),Cs=n("./.yarn/__virtual__/react-resizable-virtual-13412137cd/0/cache/react-resizable-npm-3.0.4-aa39f9db2b-cbf86ad04b.zip/node_modules/react-resizable/index.js"),ws=n("./public/app/core/store.ts"),Ds=n("./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),Ms=n("./.yarn/__virtual__/react-use-virtual-00326e70ba/0/cache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useObservable.js"),Rs=n("./public/app/features/dashboard/components/PanelEditor/OptionsPaneCategoryDescriptor.tsx"),_s=n("./public/app/features/dashboard/components/PanelEditor/getVisualizationOptions.tsx"),Os=n("./public/app/features/dashboard/components/PanelEditor/utils.ts"),Ps=n("./public/app/features/dimensions/editors/NumberInput.tsx");const ks=["top","left","bottom","right","width","height"],Bs=[{label:"Left",value:us._5.Left},{label:"Right",value:us._5.Right},{label:"Left and right",value:us._5.LeftRight},{label:"Center",value:us._5.Center},{label:"Scale",value:us._5.Scale}],Ts=[{label:"Top",value:us.fJ.Top},{label:"Bottom",value:us.fJ.Bottom},{label:"Top and bottom",value:us.fJ.TopBottom},{label:"Center",value:us.fJ.Center},{label:"Scale",value:us.fJ.Scale}],zs=t=>{var e;let{item:n}=t;const r=n.settings;if((0,Ms.Z)(null!==r&&void 0!==r&&r.scene?r.scene.moved:new _a.x),!r)return ms||(ms=(0,ds.jsx)("div",{children:"Loading..."}));const i=r.element;if(!i)return bs||(bs=(0,ds.jsx)("div",{children:"???"}));const{options:o}=i,{placement:a,constraint:s}=o;return(0,ds.jsxs)("div",{children:[(0,ds.jsxs)(c.VerticalGroup,{children:[(0,ds.jsx)(c.Select,{options:Ts,onChange:t=>{i.options.constraint.vertical=t.value,i.setPlacementFromConstraint(),r.scene.revId++,r.scene.save(!0)},value:null===s||void 0===s?void 0:s.vertical}),(0,ds.jsx)(c.Select,{options:Bs,onChange:t=>{i.options.constraint.horizontal=t.value,i.setPlacementFromConstraint(),r.scene.revId++,r.scene.save(!0)},value:null===(e=o.constraint)||void 0===e?void 0:e.horizontal})]}),ys||(ys=(0,ds.jsx)("br",{})),(0,ds.jsx)(c.Field,{label:"Position",children:(0,ds.jsx)(ds.Fragment,{children:ks.map(t=>{const e=a[t];return null==e?null:(0,ds.jsx)(c.InlineFieldRow,{children:(0,ds.jsx)(c.InlineField,{label:t,labelWidth:8,grow:!0,children:(0,ds.jsx)(Ps.Y,{value:e,onChange:e=>((t,e)=>{i.options.placement[e]=null!==t&&void 0!==t?t:i.options.placement[e],i.applyLayoutStylesToDiv(),r.scene.clearCurrentSelection()})(e,t)})})},t)})})})]})};var js=n("./public/app/plugins/panel/canvas/editor/options.ts");function Gs(t){return{category:t.category,path:"--",values:e=>({getValue:e=>(0,Ds.get)(t.element.options,e),onChange:(e,n)=>{let r=t.element.options;if("type"===e&&n){const t=us.Jk.getIfExists(n);if(!t)return void console.warn("layer does not exist",n);r=Object.assign({},r,t.getNewOptions(r),{type:t.id})}else r=(0,Os.hs)(r,e,n);t.element.onChange(r),t.element.updateData(t.scene.context)}}),build:(e,n)=>{var r;const{options:i}=t.element,o=us.Jk.selectOptions(null!==i&&void 0!==i&&i.type?[i.type]:[us.Nm.type]);e.addSelect({path:"type",name:void 0,settings:{options:o.options}});const a=us.Jk.getIfExists(null!==(r=null===i||void 0===i?void 0:i.type)&&void 0!==r?r:us.Nm.type);let s=i;s||(s=Object.assign({},a.getNewOptions(i),{type:a.id,name:`Element ${Date.now()}.${Math.floor(100*Math.random())}`}));const u=Object.assign({},n,{options:s});null!==a&&void 0!==a&&a.registerOptionsUI&&a.registerOptionsUI(e,u),js.I.addBackground(e,u),js.I.addBorder(e,u),e.addCustomEditor({category:["Layout"],id:"content",path:"__",name:"Constraints",editor:zs,settings:t})}}}var Is,As,Fs,Ns=n("./public/app/core/app_events.ts"),Ls=n("./public/app/core/components/Layers/AddLayerButton.tsx"),Ys=n("./public/app/core/components/Layers/LayerDragDropList.tsx"),Xs=n("./public/app/features/canvas/elements/notFound.tsx"),qs=n("./public/app/features/canvas/runtime/element.tsx");function Ws(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Vs extends a.PureComponent{constructor(){super(...arguments),Ws(this,"getScene",()=>{const{settings:t}=this.props.item;if(null!==t&&void 0!==t&&t.layer)return t.layer.scene}),Ws(this,"onAddItem",t=>{var e;const{settings:n}=this.props.item;if(null===n||void 0===n||!n.layer)return;const{layer:r}=n,i=null!==(e=us.Jk.getIfExists(t.value))&&void 0!==e?e:Xs.C,o=i.getNewOptions();o.type=i.id;const a=new qs.f(i,o,r);a.updateData(r.scene.context),r.elements.push(a),r.scene.save(),r.reinitializeMoveable()}),Ws(this,"onSelect",t=>{const{settings:e}=this.props.item;if(null!==e&&void 0!==e&&e.scene)try{let n={targets:[]};if(t instanceof i.f){const r=[];r.push(null===t||void 0===t?void 0:t.div),n.targets=r,n.frame=t,e.scene.select(n)}else if(t instanceof qs.f){const r=[null===t||void 0===t?void 0:t.div];n.targets=r,e.scene.select(n)}}catch(t){Ns.Z.emit(r.AppEvents.alertError,["Unable to select element, try selecting element in panel instead"])}}),Ws(this,"onClearSelection",()=>{const{settings:t}=this.props.item;if(null===t||void 0===t||!t.layer)return;const{layer:e}=t;e.scene.clearCurrentSelection()}),Ws(this,"onDragEnd",t=>{if(!t.destination)return;const{settings:e}=this.props.item;if(null===e||void 0===e||!e.layer)return;const{layer:n}=e,r=n.elements.length-1,i=-1*(t.source.index-r),o=-1*(t.destination.index-r);n.reorder(i,o)}),Ws(this,"goUpLayer",()=>{const t=this.props.item.settings;if(null===t||void 0===t||!t.layer||null===t||void 0===t||!t.scene)return;const{scene:e,layer:n}=t;n.parent&&e.updateCurrentLayer(n.parent)}),Ws(this,"decoupleFrame",()=>{const t=this.props.item.settings;if(null===t||void 0===t||!t.layer)return;const{layer:e}=t;this.deleteFrame(),e.elements.forEach(t=>{var n,r,i,o;const a=null===(n=t.div)||void 0===n?void 0:n.getBoundingClientRect();t.setPlacementFromConstraint(a,null===(r=e.parent)||void 0===r?void 0:null===(i=r.div)||void 0===i?void 0:i.getBoundingClientRect()),null===(o=e.parent)||void 0===o||o.doAction(cs.G.Duplicate,t,!1,!1)})}),Ws(this,"onDecoupleFrame",()=>{Ns.Z.publish(new xs.VJ({title:"Decouple frame",text:"Are you sure you want to decouple this frame?",text2:"This will remove the frame and push nested elements in the next level up.",confirmText:"Yes",yesText:"Decouple",onConfirm:async()=>{this.decoupleFrame()}}))}),Ws(this,"deleteFrame",()=>{var t;const e=this.props.item.settings;if(null===e||void 0===e||!e.layer)return;const{layer:n}=e,r=this.getScene();null===r||void 0===r||r.byName.delete(n.getName()),n.elements.forEach(t=>null===r||void 0===r?void 0:r.byName.delete(t.getName())),null===(t=n.parent)||void 0===t||t.doAction(cs.G.Delete,n),this.goUpLayer()}),Ws(this,"onFrameSelection",()=>{const t=this.getScene();t?t.frameSelection():console.warn("no scene!")}),Ws(this,"onDeleteFrame",()=>{Ns.Z.publish(new xs.VJ({title:"Delete frame",text:"Are you sure you want to delete this frame?",text2:"This will delete the frame and all nested elements.",icon:"trash-alt",confirmText:"Delete",yesText:"Delete",onConfirm:async()=>{this.deleteFrame()}}))})}render(){const t=this.props.item.settings;if(!t)return Is||(Is=(0,ds.jsx)("div",{children:"No settings"}));const e=t.layer;if(!e)return As||(As=(0,ds.jsx)("div",{children:"Missing layer?"}));const n=t.selected?t.selected.map(t=>t.getName()):[];return(0,ds.jsxs)(ds.Fragment,{children:[!e.isRoot()&&(0,ds.jsxs)(ds.Fragment,{children:[(0,ds.jsx)(c.Button,{icon:"angle-up",size:"sm",variant:"secondary",onClick:this.goUpLayer,children:"Go up level"}),(0,ds.jsx)(c.Button,{size:"sm",variant:"secondary",onClick:()=>this.onSelect(e),children:"Select frame"}),(0,ds.jsx)(c.Button,{size:"sm",variant:"secondary",onClick:()=>this.onDecoupleFrame(),children:"Decouple frame"}),(0,ds.jsx)(c.Button,{size:"sm",variant:"secondary",onClick:()=>this.onDeleteFrame(),children:"Delete frame"})]}),(0,ds.jsx)(Ys.E,{onDragEnd:this.onDragEnd,onSelect:this.onSelect,onDelete:t=>{e.doAction(cs.G.Delete,t)},onDuplicate:t=>{e.doAction(cs.G.Duplicate,t)},getLayerInfo:t=>t.options.type,onNameChange:(t,e)=>{t.onChange(Object.assign({},t.options,{name:e}))},verifyLayerNameUniqueness:t=>{const e=this.getScene();return Boolean(null===e||void 0===e?void 0:e.canRename(t))},isFrame:t=>t instanceof i.f,layers:e.elements,selection:n}),Fs||(Fs=(0,ds.jsx)("br",{})),(0,ds.jsxs)(c.HorizontalGroup,{children:[(0,ds.jsx)(Ls.f,{onChange:this.onAddItem,options:us.Jk.selectOptions().options,label:"Add item"}),n.length>0&&(0,ds.jsx)(c.Button,{size:"sm",variant:"secondary",onClick:this.onClearSelection,children:"Clear selection"}),n.length>1&&(0,ds.jsx)(c.Button,{size:"sm",variant:"secondary",onClick:this.onFrameSelection,children:"Frame selection"})]})]})}}function Hs(t){const{selected:e,scene:n}=t;if(n.currentLayer||(n.currentLayer=n.root),e)for(const t of e){if(t instanceof i.f){n.currentLayer=t;break}if(t.parent){n.currentLayer=t.parent;break}}const r=n.currentLayer.options||{elements:[]};return{category:["Layer"],path:"--",values:t=>({getValue:t=>(0,Ds.get)(r,t),onChange:(t,e)=>{var i,o;if("type"===t&&e)return void console.warn("unable to change layer type");const a=(0,Os.hs)(r,t,e);null===(i=n.currentLayer)||void 0===i||i.onChange(a),null===(o=n.currentLayer)||void 0===o||o.updateData(n.context)}}),build:(i,o)=>{const a=n.currentLayer;a&&a.isRoot(),i.addCustomEditor({id:"content",path:"root",name:"Elements",editor:Vs,settings:{scene:n,layer:n.currentLayer,selected:e}});const s=Object.assign({},o,{options:r});js.I.addBackground(i,s),js.I.addBorder(i,s),a&&!a.isRoot()&&i.addCustomEditor({category:["Layout"],id:"content",path:"__",name:"Constraints",editor:zs,settings:{scene:t.scene,element:a}})}}}const $s=()=>{var t;const e=(0,Ms.Z)(ru),n=null===e||void 0===e?void 0:null===(t=e.panel.context)||void 0===t?void 0:t.instanceState,r=(0,a.useMemo)(()=>{const t=n;if(!t)return new Rs.j({id:"root",title:"root"});return function(t,e){const n={data:t.input,options:t.options},r=new Rs.j({id:"root",title:"root"}),i={getValue:e=>(0,Ds.get)(t.options,e),onChange:(e,n)=>{t.onChange((0,Os.hs)(t.options,e,n))}};return(0,_s.HZ)(e,i,t=>{if(null!==t&&void 0!==t&&t.length){const e=t[0];let n=r.categories.find(t=>t.props.id===e);return n||(n=new Rs.j({id:e,title:e}),r.categories.push(n)),n}return r},n),r}({},(e,r)=>{e.addNestedOptions(Hs(n));const o=t.selected;if(1===(null===o||void 0===o?void 0:o.length)){const n=o[0];n instanceof i.f||e.addNestedOptions(Gs({category:[`Selected element (${n.options.name})`],element:n,scene:t.scene}))}})},[n]);return(0,ds.jsxs)("div",{children:[(0,ds.jsx)("div",{children:r.items.map(t=>t.render())}),(0,ds.jsx)("div",{children:r.categories.map(t=>(0,ds.jsxs)("div",{children:[(0,ds.jsx)("h5",{children:t.props.title}),(0,ds.jsx)("div",{children:t.items.map(t=>t.render())})]},t.props.id))})]})};var Ks,Us;const Zs=t=>{let{onClose:e}=t;const n=document.querySelector("[data-btninlineedit]").getBoundingClientRect(),r=(0,a.useRef)(null),i=(0,c.useStyles2)(Js),o=350,s=400,u=n.x+70,l=n.y-s,d=ws.Z.getObject("inlineEditPanel",{x:u,y:l,w:o,h:s}),[f,p]=(0,a.useState)({width:d.w,height:d.h}),[h,v]=(0,a.useState)({x:d.x,y:d.y}),g=(t,e,n,r)=>{ws.Z.setObject("inlineEditPanel",{x:t,y:e,w:n,h:r})};return(0,ds.jsx)(c.Portal,{children:(0,ds.jsx)("div",{className:i.draggableWrapper,children:(0,ds.jsx)(Ss(),{handle:"strong",onStop:(t,e)=>{let n=e.x<0?0:e.x,r=e.y<0?0:e.y;v({x:n,y:r}),g(n,r,f.width,f.height)},position:{x:h.x,y:h.y},children:(0,ds.jsx)(Cs.Resizable,{height:f.height,width:f.width,onResize:(t,e)=>{const{size:n}=e;p({width:n.width,height:n.height}),g(h.x,h.y,n.width,n.height)},children:(0,ds.jsxs)("div",{className:i.inlineEditorContainer,style:{height:`${f.height}px`,width:`${f.width}px`},ref:r,children:[(0,ds.jsxs)("strong",{className:i.inlineEditorHeader,children:[(0,ds.jsx)("div",{className:i.placeholder}),Ks||(Ks=(0,ds.jsx)("div",{children:"Canvas Inline Editor"})),(0,ds.jsx)(c.IconButton,{name:"times",size:"xl",className:i.inlineEditorClose,onClick:e})]}),(0,ds.jsx)("div",{className:i.inlineEditorContentWrapper,children:(0,ds.jsx)("div",{className:i.inlineEditorContent,children:Us||(Us=(0,ds.jsx)($s,{}))})})]})})})})})},Js=t=>({inlineEditorContainer:o.css`
    display: flex;
    flex-direction: column;
    background: ${t.v1.colors.panelBg};
    box-shadow: 5px 5px 20px -5px #000000;
    z-index: 1000;
    opacity: 1;
  `,draggableWrapper:o.css`
    width: 0;
    height: 0;
  `,inlineEditorHeader:o.css`
    display: flex;
    align-items: center;
    justify-content: center;
    background: ${t.colors.background.canvas};
    border: 1px solid ${t.colors.border.weak};
    height: 40px;
    cursor: move;
  `,inlineEditorContent:o.css`
    white-space: pre-wrap;
    padding: 10px;
  `,inlineEditorClose:o.css`
    margin-left: auto;
  `,placeholder:o.css`
    width: 24px;
    height: 24px;
    visibility: hidden;
    margin-right: auto;
  `,inlineEditorContentWrapper:o.css`
    overflow: scroll;
  `});function Qs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let tu=[],eu=void 0,nu=!1;const ru=new s.t(1);class iu extends a.Component{constructor(t){super(t),Qs(this,"panelContext",{}),Qs(this,"scene",void 0),Qs(this,"subs",new u.w0),Qs(this,"needsReload",!1),Qs(this,"styles",ou(l.config.theme)),Qs(this,"isEditing",void 0!==l.locationService.getSearchObject().editPanel),Qs(this,"onUpdateScene",t=>{const{onOptionsChange:e,options:n}=this.props;e(Object.assign({},n,{root:t})),this.setState({refresh:this.state.refresh+1})}),Qs(this,"inlineEditButtonClick",()=>{if(nu)return this.forceUpdate(),void this.setActivePanel();this.setActivePanel(),this.setState({openInlineEdit:!0}),nu=!0}),Qs(this,"inlineEditButtonClose",()=>{this.setState({openInlineEdit:!1}),nu=!1}),Qs(this,"setActivePanel",()=>{eu=this,ru.next({panel:this})}),Qs(this,"renderInlineEdit",()=>(0,ds.jsx)(Zs,{onClose:()=>this.inlineEditButtonClose()})),this.state={refresh:0,openInlineEdit:!1},this.scene=new vs(this.props.options.root,this.props.options.inlineEditing,this.onUpdateScene),this.scene.updateSize(t.width,t.height),this.scene.updateData(t.data),this.subs.add(this.props.eventBus.subscribe(xs.xF,t=>{this.scene.clearCurrentSelection(),this.inlineEditButtonClose()})),this.subs.add(this.props.eventBus.subscribe(xs.Yr,t=>{this.props.id===t.payload&&(this.needsReload=!0)}))}componentDidMount(){eu=this,ru.next({panel:this}),this.panelContext=this.context,this.panelContext.onInstanceStateChange&&(this.panelContext.onInstanceStateChange({scene:this.scene,layer:this.scene.root}),this.subs.add(this.scene.selection.subscribe({next:t=>{this.panelContext.onInstanceStateChange({scene:this.scene,selected:t,layer:this.scene.root}),eu=this,ru.next({panel:this}),tu.forEach(t=>{t!==eu&&t.scene.clearCurrentSelection(!0)})}}))),tu.push(this)}componentWillUnmount(){this.subs.unsubscribe(),nu=!1,tu=tu.filter(t=>{var e;return t.props.id!==(null===(e=eu)||void 0===e?void 0:e.props.id)})}shouldComponentUpdate(t,e){const{width:n,height:r,data:i}=this.props;let o=!1;n===t.width&&r===t.height||(this.scene.updateSize(t.width,t.height),o=!0),i!==t.data&&(this.scene.updateData(t.data),o=!0),this.state.refresh!==e.refresh&&(o=!0),this.state.openInlineEdit!==e.openInlineEdit&&(o=!0);const a=this.needsReload&&this.props.options!==t.options,s=this.props.options.inlineEditing!==t.options.inlineEditing;var u;(a||s)&&(this.needsReload=!1,this.scene.load(t.options.root,t.options.inlineEditing),this.scene.updateSize(t.width,t.height),this.scene.updateData(t.data),o=!0,s&&this.props.options.inlineEditing&&(null===(u=this.scene.selecto)||void 0===u||u.destroy()));return o}render(){return(0,ds.jsxs)(ds.Fragment,{children:[this.scene.render(),this.props.options.inlineEditing&&!this.isEditing&&(0,ds.jsxs)("div",{children:[(0,ds.jsx)("div",{className:this.styles.inlineEditButton,children:(0,ds.jsx)(c.Button,{size:"lg",variant:"secondary",icon:"edit","data-btninlineedit":this.props.id,onClick:this.inlineEditButtonClick})}),this.state.openInlineEdit&&this.renderInlineEdit()]})]})}}Qs(iu,"contextType",c.PanelContextRoot);const ou=(0,c.stylesFactory)(t=>({inlineEditButton:o.css`
    position: absolute;
    bottom: 8px;
    left: 8px;
    z-index: 999;
  `})),au=new r.PanelPlugin(iu).setNoPadding().useFieldConfig().setPanelOptions((t,e)=>{const n=e.instanceState;if(t.addBooleanSwitch({path:"inlineEditing",name:"Inline editing",description:"Enable editing the panel directly",defaultValue:!0}),n){t.addNestedOptions(Hs(n));const e=n.selected;if(1===(null===e||void 0===e?void 0:e.length)){const r=e[0];r instanceof i.f||t.addNestedOptions(Gs({category:[`Selected element (${r.options.name})`],element:r,scene:n.scene}))}}})},"./public/app/plugins/panel/canvas/types.ts":(t,e,n)=>{let r;n.d(e,{G:()=>r}),function(t){t.Delete="delete",t.Duplicate="duplicate",t.MoveTop="move-top",t.MoveBottom="move-bottom"}(r||(r={}))},"./.yarn/__virtual__/react-use-virtual-00326e70ba/0/cache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useObservable.js":(t,e,n)=>{n.d(e,{Z:()=>o});var r=n("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),i=n("./.yarn/__virtual__/react-use-virtual-00326e70ba/0/cache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useIsomorphicLayoutEffect.js");const o=function(t,e){var n=(0,r.useState)(e),o=n[0],a=n[1];return(0,i.Z)(function(){var e=t.subscribe(a);return function(){return e.unsubscribe()}},[t]),o}}}]);