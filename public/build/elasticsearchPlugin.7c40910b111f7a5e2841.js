(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9897],{"./public/app/plugins/datasource/elasticsearch/module.ts":(e,t,s)=>{"use strict";s.r(t),s.d(t,{plugin:()=>Es});var i=s("./packages/grafana-data/src/index.ts"),r=s("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/0/cache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=s("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),a=s("./packages/grafana-ui/src/index.ts");const l=(e,t,s)=>{return(0,n.useCallback)(i=>{e(s(t,i))},[e,t,s])},o=(0,n.createContext)(void 0),c=()=>{const e=(0,n.useContext)(o);if(!e)throw new Error("Use DispatchContext first.");return e},d=e=>({name:e,pipelineAgg:""}),u=e=>`var${Math.max(0,...e.map(e=>{var t;return parseInt((null===(t=e.name.match("^var(\\d+)$"))||void 0===t?void 0:t[1])||"0",10)}))+1}`,m=e=>{var t;return"ewma"===(null===(t=e.settings)||void 0===t?void 0:t.model)},p=e=>{var t;return"holt"===(null===(t=e.settings)||void 0===t?void 0:t.model)},h=e=>{var t;return"holt_winters"===(null===(t=e.settings)||void 0===t?void 0:t.model)},g=e=>{var t;return["holt","ewma","holt_winters"].includes((null===(t=e.settings)||void 0===t?void 0:t.model)||"")},v=e=>x[e.type].requiresField,f=e=>x[e.type].isPipelineAgg,b=e=>x[e.type].supportsMultipleBucketPaths,y=e=>x[e.type].hasSettings,j=e=>x[e.type].supportsInlineScript,_=["count","avg","sum","min","max","extended_stats","percentiles","cardinality","raw_document","raw_data","logs","moving_avg","moving_fn","derivative","serial_diff","cumulative_sum","bucket_script","rate","top_metrics"],x={count:{label:"Count",requiresField:!1,isPipelineAgg:!1,supportsMissing:!1,supportsMultipleBucketPaths:!1,hasSettings:!1,hasMeta:!1,supportsInlineScript:!1,defaults:{}},avg:{label:"Average",requiresField:!0,supportsInlineScript:!0,supportsMissing:!0,isPipelineAgg:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,hasMeta:!1,defaults:{}},sum:{label:"Sum",requiresField:!0,supportsInlineScript:!0,supportsMissing:!0,isPipelineAgg:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,hasMeta:!1,defaults:{}},max:{label:"Max",requiresField:!0,supportsInlineScript:!0,supportsMissing:!0,isPipelineAgg:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,hasMeta:!1,defaults:{}},min:{label:"Min",requiresField:!0,supportsInlineScript:!0,supportsMissing:!0,isPipelineAgg:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,hasMeta:!1,defaults:{}},extended_stats:{label:"Extended Stats",requiresField:!0,supportsMissing:!0,supportsInlineScript:!0,isPipelineAgg:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,hasMeta:!0,defaults:{meta:{std_deviation_bounds_lower:!0,std_deviation_bounds_upper:!0}}},percentiles:{label:"Percentiles",requiresField:!0,supportsMissing:!0,supportsInlineScript:!0,isPipelineAgg:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,hasMeta:!1,defaults:{settings:{percents:["25","50","75","95","99"]}}},cardinality:{label:"Unique Count",requiresField:!0,supportsMissing:!0,isPipelineAgg:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,supportsInlineScript:!1,hasMeta:!1,defaults:{}},moving_avg:{label:"Moving Average",requiresField:!0,isPipelineAgg:!0,versionRange:">=2.0.0 <8.0.0",supportsMissing:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,supportsInlineScript:!1,hasMeta:!1,defaults:{settings:{model:"simple",window:"5"}}},moving_fn:{label:"Moving Function",requiresField:!0,isPipelineAgg:!0,supportsMultipleBucketPaths:!1,supportsInlineScript:!1,supportsMissing:!1,hasMeta:!1,hasSettings:!0,versionRange:">=7.0.0",defaults:{}},derivative:{label:"Derivative",requiresField:!0,isPipelineAgg:!0,versionRange:">=2.0.0",supportsMissing:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,supportsInlineScript:!1,hasMeta:!1,defaults:{}},serial_diff:{label:"Serial Difference",requiresField:!0,isPipelineAgg:!0,versionRange:">=2.0.0",supportsMissing:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,supportsInlineScript:!1,hasMeta:!1,defaults:{settings:{lag:"1"}}},cumulative_sum:{label:"Cumulative Sum",requiresField:!0,isPipelineAgg:!0,versionRange:">=2.0.0",supportsMissing:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,supportsInlineScript:!1,hasMeta:!1,defaults:{}},bucket_script:{label:"Bucket Script",requiresField:!1,isPipelineAgg:!0,supportsMissing:!1,supportsMultipleBucketPaths:!0,versionRange:">=2.0.0",hasSettings:!0,supportsInlineScript:!1,hasMeta:!1,defaults:{pipelineVariables:[d(u([]))]}},raw_document:{label:"Raw Document (legacy)",requiresField:!1,isSingleMetric:!0,isPipelineAgg:!1,supportsMissing:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,supportsInlineScript:!1,hasMeta:!1,defaults:{settings:{size:"500"}}},raw_data:{label:"Raw Data",requiresField:!1,isSingleMetric:!0,isPipelineAgg:!1,supportsMissing:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,supportsInlineScript:!1,hasMeta:!1,defaults:{settings:{size:"500"}}},logs:{label:"Logs",requiresField:!1,isPipelineAgg:!1,supportsMissing:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,isSingleMetric:!0,supportsInlineScript:!1,hasMeta:!1,defaults:{settings:{limit:"500"}}},top_metrics:{label:"Top Metrics",xpack:!0,requiresField:!1,isPipelineAgg:!1,supportsMissing:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,supportsInlineScript:!1,versionRange:">=7.7.0",hasMeta:!1,defaults:{settings:{order:"desc"}}},rate:{label:"Rate",xpack:!0,versionRange:">=7.10.0",requiresField:!0,isPipelineAgg:!1,supportsMissing:!1,supportsMultipleBucketPaths:!1,hasSettings:!0,supportsInlineScript:!0,hasMeta:!1,defaults:{}}},E={moving_avg:[{label:"window",default:5},{label:"model",default:"simple"},{label:"predict"},{label:"minimize",default:!1}],moving_fn:[{label:"window",default:5},{label:"script"}],derivative:[{label:"unit"}],serial_diff:[{label:"lag"}],cumulative_sum:[{label:"format"}],bucket_script:[]},I=(e,t)=>{const s=t.filter(t=>{var s;return b(t)?null===(s=t.pipelineVariables)||void 0===s?void 0:s.some(t=>t.pipelineAgg===e.id):v(t)&&e.id===t.field});return[...s,...s.flatMap(e=>I(e,t))]},w=[{label:"Avg",value:"avg"},{label:"Min",value:"min"},{label:"Max",value:"max"},{label:"Sum",value:"sum"},{label:"Count",value:"count"},{label:"Std Dev",value:"std_deviation"},{label:"Std Dev Upper",value:"std_deviation_bounds_upper"},{label:"Std Dev Lower",value:"std_deviation_bounds_lower"}],S=[{label:"Simple",value:"simple"},{label:"Linear",value:"linear"},{label:"Exponentially Weighted",value:"ewma"},{label:"Holt Linear",value:"holt"},{label:"Holt Winters",value:"holt_winters"}],O={pre:"@HIGHLIGHT@",post:"@/HIGHLIGHT@"};function $(){return{type:"count",id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1"}}function N(){return{type:"date_histogram",id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1",settings:{interval:"auto"}}}const A=(e,t)=>e.find(e=>e.id===t);function F(e,t){var s;return!(null===e||void 0===e||null===(s=e.metrics)||void 0===s||!s.some(e=>e.type===t))}var R=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/index.js");const k=e=>v(e)?`${x[e.type].label} ${e.field}`:x[e.type].label,z=e=>Object.entries(e).reduce((e,t)=>{let[s,i]=t;if(null==i)return Object.assign({},e);if(Array.isArray(i)&&0===i.length)return Object.assign({},e);if(0===(null===i||void 0===i?void 0:i.length))return Object.assign({},e);if(!Array.isArray(i)&&"object"==typeof i){const t=z(i);return 0===Object.keys(t).length?Object.assign({},e):Object.assign({},e,{[s]:t})}return Object.assign({},e,{[s]:i})},{}),T=e=>{const t=e.match(/^(\d+)/);return t?t[1]:void 0},L=e=>{var t,s,i,r;return("object"==typeof(null===(t=e.settings)||void 0===t?void 0:t.script)?null===(s=e.settings)||void 0===s?void 0:null===(i=s.script)||void 0===i?void 0:i.inline:null===(r=e.settings)||void 0===r?void 0:r.script)||""},M=e=>{if("string"==typeof e)return(0,R.valid)(e)||"5.0.0";switch(e){case 2:return"2.0.0";case 56:return"5.6.0";case 60:return"6.0.0";case 70:return"7.0.0";case 5:default:return"5.0.0"}},C=e=>!!(0,R.gte)(e,"7.10.0");var P=s("./.yarn/__virtual__/@reduxjs-toolkit-virtual-341575ab98/0/cache/@reduxjs-toolkit-npm-1.8.0-436263eab0-e229571b80.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");const D=(0,P.PH)("@metrics/add"),q=(0,P.PH)("@metrics/remove"),V=(0,P.PH)("@metrics/toggle_visibility"),B=(0,P.PH)("@metrics/change_field"),G=(0,P.PH)("@metrics/change_type"),U=(0,P.PH)("@metrics/change_attr"),H=(0,P.PH)("@metrics/change_setting"),W=(0,P.PH)("@metrics/change_meta"),Q=(0,P.PH)("init"),X=(0,P.PH)("change_query"),Y=(0,P.PH)("change_alias_pattern"),Z=(e,t)=>X.match(t)?t.payload:Q.match(t)?e||"":e,J=(e,t)=>Y.match(t)?t.payload:Q.match(t)?e||"":e,K={terms:{label:"Terms",requiresField:!0,defaultSettings:{min_doc_count:"1",size:"10",order:"desc",orderBy:"_term"}},filters:{label:"Filters",requiresField:!1,defaultSettings:{filters:[{label:"",query:"*"}]}},geohash_grid:{label:"Geo Hash Grid",requiresField:!0,defaultSettings:{precision:"3"}},date_histogram:{label:"Date Histogram",requiresField:!0,defaultSettings:{interval:"auto",min_doc_count:"0",trimEdges:"0",timeZone:i.InternalTimeZones.utc}},histogram:{label:"Histogram",requiresField:!0,defaultSettings:{interval:"1000",min_doc_count:"0"}}},ee=[{label:"Term value",value:"_term"},{label:"Doc Count",value:"_count"}],te=[{label:"Top",value:"desc"},{label:"Bottom",value:"asc"}],se=[{label:"No limit",value:"0"},{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"5",value:"5"},{label:"10",value:"10"},{label:"15",value:"15"},{label:"20",value:"20"}],ie=(0,P.PH)("@bucketAggs/add"),re=(0,P.PH)("@bucketAggs/remove"),ne=(0,P.PH)("@bucketAggs/change_type"),ae=(0,P.PH)("@bucketAggs/change_field"),le=(0,P.PH)("@bucketAggs/change_setting"),oe=(e,t)=>{if(D.match(t))return[...e,$(t.payload)];if(q.match(t)){const s=e.find(e=>e.id===t.payload),i=[s,...I(s,e)],r=e.filter(e=>!i.some(t=>t.id===e.id));return 0===r.length?[$("1")]:r}return G.match(t)?e.filter(e=>!x[t.payload.type].isSingleMetric||e.id===t.payload.id).map(e=>e.id!==t.payload.id?e:Object.assign({id:e.id,type:t.payload.type},x[t.payload.type].defaults)):B.match(t)?e.map(e=>{if(e.id!==t.payload.id)return e;const s=Object.assign({},e,{field:t.payload.field});return f(e)?Object.assign({},s,{pipelineAgg:t.payload.field}):s}):V.match(t)?e.map(e=>e.id!==t.payload?e:Object.assign({},e,{hide:!e.hide})):H.match(t)?e.map(e=>{if(e.id!==t.payload.metric.id)return e;if(y(e)){const s=z(Object.assign({},e.settings,{[t.payload.settingName]:t.payload.newValue}));return Object.assign({},e,{settings:Object.assign({},s)})}return e}):W.match(t)?e.map(e=>e.id!==t.payload.metric.id?e:(e=>x[e.type].hasMeta)(e)?Object.assign({},e,{meta:Object.assign({},e.meta,{[t.payload.meta]:t.payload.newValue})}):e):U.match(t)?e.map(e=>e.id!==t.payload.metric.id?e:Object.assign({},e,{[t.payload.attribute]:t.payload.newValue})):Q.match(t)?null!==e&&void 0!==e&&e.length?e:[$("1")]:e};var ce=s("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const de=(0,n.createContext)(void 0),ue=(0,n.createContext)(void 0),me=(0,n.createContext)(void 0),pe=e=>{let{children:t,onChange:s,onRunQuery:i,query:r,datasource:a,range:c}=e;const d=(0,n.useCallback)(e=>{s(e),i()},[s,i]),u=(e=>(t,s)=>{const i={};for(const r in e)i[r]=e[r](t[r],s);return i})({query:Z,alias:J,metrics:oe,bucketAggs:(e=>(t,s)=>{if(ie.match(s)){const e={id:s.payload,type:"terms",settings:K.terms.defaultSettings},i=t[t.length-1];return"date_histogram"===(null===i||void 0===i?void 0:i.type)?[...t.slice(0,t.length-1),e,i]:[...t,e]}return re.match(s)?t.filter(e=>e.id!==s.payload):ne.match(s)?t.map(e=>e.id!==s.payload.id?e:{id:e.id,type:s.payload.newType,settings:K[s.payload.newType].defaultSettings}):ae.match(s)?t.map(e=>e.id!==s.payload.id?e:Object.assign({},e,{field:s.payload.newField})):G.match(s)?x[s.payload.type].isSingleMetric?[]:0===t.length?[Object.assign({},N("2"),{field:e})]:t:le.match(s)?t.map(e=>{if(e.id!==s.payload.bucketAgg.id)return e;const t=z(Object.assign({},e.settings,{[s.payload.settingName]:s.payload.newValue}));return Object.assign({},e,{settings:Object.assign({},t)})}):Q.match(s)?null!==t&&void 0!==t&&t.length?t:[Object.assign({},N("2"),{field:e})]:t})(a.timeField)}),m=l(e=>d(Object.assign({},r,e,{timeField:a.timeField})),r,u);return r.metrics&&r.bucketAggs&&void 0!==r.query?(0,ce.jsx)(de.Provider,{value:a,children:(0,ce.jsx)(ue.Provider,{value:r,children:(0,ce.jsx)(me.Provider,{value:c,children:(0,ce.jsx)(o.Provider,{value:m,children:t})})})}):(m(Q()),null)},he=e=>()=>{const t=(0,n.useContext)(e);if(!t)throw new Error("use ElasticsearchProvider first.");return t},ge=he(ue),ve=he(de),fe=he(me),be=e=>e.id,ye=e=>parseInt(e,10),je=["iconName","onClick","className","label"];const _e=r.css`
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
`,xe=e=>{let{iconName:t,onClick:s,className:i,label:n}=e,l=function(e,t){if(null==e)return{};var s,i,r={},n=Object.keys(e);for(i=0;i<n.length;i++)s=n[i],t.indexOf(s)>=0||(r[s]=e[s]);return r}(e,je);return(0,ce.jsxs)("button",Object.assign({className:(0,r.cx)("gf-form-label gf-form-label--btn query-part",i),onClick:s},l,{children:[(0,ce.jsx)("span",{className:_e,children:n}),(0,ce.jsx)(a.Icon,{name:t,"aria-hidden":"true"})]}))};var Ee=s("./.yarn/cache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");const Ie=e=>{let{children:t,label:s,onRemoveClick:i,onHideClick:r,hidden:n=!1}=e;const l=(0,a.useStyles2)(we);return(0,ce.jsxs)(a.InlineFieldRow,{children:[(0,ce.jsx)(a.InlineSegmentGroup,{children:(0,ce.jsxs)(a.InlineLabel,{width:17,as:"div",children:[(0,ce.jsx)("span",{children:s}),(0,ce.jsxs)("span",{className:l.iconWrapper,children:[r&&(0,ce.jsx)(a.IconButton,{name:n?"eye-slash":"eye",onClick:r,surface:"header",size:"sm","aria-pressed":n,"aria-label":"hide metric",className:l.icon}),(0,ce.jsx)(a.IconButton,{name:"trash-alt",surface:"header",size:"sm",className:l.icon,onClick:i||Ee.noop,disabled:!i,"aria-label":"remove metric"})]})]})}),t]})},we=e=>({iconWrapper:r.css`
      display: flex;
    `,icon:r.css`
      color: ${e.colors.text.secondary};
      margin-left: ${e.spacing(.25)};
    `});var Se=s("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/lastValueFrom.js");const Oe=e=>K[e.type].requiresField,$e=["date_histogram","histogram","terms","filters","geohash_grid"],Ne=e=>{if((e=>_.includes(e))(e))switch(e){case"cardinality":return[];case"top_metrics":default:return["number"]}if((e=>$e.includes(e))(e))switch(e){case"date_histogram":return["date"];case"geohash_grid":return["geo_point"];case"histogram":return["number"];default:return[]}return[]},Ae=e=>{let{text:t}=e;return{label:t,value:t}},Fe=e=>{const t=ve(),s=fe(),i=Array.isArray(e)?e:Ne(e);let r;return async e=>(r||(r=await(0,Se.n)(t.getFields(i,s))),r.filter(t=>{let{text:s}=t;return void 0===e||s.includes(e)}).map(Ae))},Re=r.css`
  min-width: 150px;
`,ke=e=>{let{label:t,children:s,hidden:i=!1}=e;const[l,o]=(0,n.useState)(!1),c=((e,t)=>({wrapper:r.css`
      max-width: 500px;
      display: flex;
      flex-direction: column;
    `,settingsWrapper:r.css`
      padding-top: ${e.spacing(.5)};
    `,icon:r.css`
      margin-right: ${e.spacing(.5)};
    `,button:r.css`
      justify-content: start;
      ${t&&r.css`
        color: ${e.colors.text.disabled};
      `}
    `}))((0,a.useTheme2)(),i);return(0,ce.jsx)(a.InlineSegmentGroup,{children:(0,ce.jsxs)("div",{className:(0,r.cx)(c.wrapper),children:[(0,ce.jsxs)("button",{className:(0,r.cx)("gf-form-label query-part",c.button,Re),onClick:()=>o(!l),"aria-expanded":l,children:[(0,ce.jsx)(a.Icon,{name:l?"angle-down":"angle-right","aria-hidden":"true",className:c.icon}),t]}),l&&(0,ce.jsx)("div",{className:c.settingsWrapper,children:s})]})})},ze=e=>{let{options:t,value:s,onChange:i}=e;const[r,a]=(0,n.useState)(((e,t)=>void 0===t||e.some((e=>t=>{let{value:s}=t;return s===e})(t))?e:[...e,{value:t,label:t}])(t,s));return{onCreateOption:e=>{(e=>a([...r,{value:e,label:e}]))(e),i({value:e})},onChange:i,allowCustomValue:!0,options:r,value:s}},Te=[{label:"auto",value:"auto"},{label:"10s",value:"10s"},{label:"1m",value:"1m"},{label:"5m",value:"5m"},{label:"10m",value:"10m"},{label:"20m",value:"20m"},{label:"1h",value:"1h"},{label:"1d",value:"1d"}],Le=(e,t,s)=>{return!s.some((e=>t=>{let{value:s}=t;return s===e})(e))&&e.trim().length>0},Me=(e,t)=>{var s;return(null===(s=e.value)||void 0===s?void 0:s.startsWith(t))||!1},Ce=e=>{var t,s,r,l,o,d,u,m,p,h;let{bucketAgg:g}=e;const v=c(),{current:f}=(0,n.useRef)((0,Ee.uniqueId)("es-date_histogram-"));return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(a.InlineField,Object.assign({label:"Interval"},Xe,{children:(0,ce.jsx)(a.Select,Object.assign({inputId:(0,Ee.uniqueId)("es-date_histogram-interval"),isValidNewOption:Le,filterOption:Me},ze({options:Te,value:(null===(t=g.settings)||void 0===t?void 0:t.interval)||(null===(s=K.date_histogram.defaultSettings)||void 0===s?void 0:s.interval),onChange:e=>{let{value:t}=e;return v(le({bucketAgg:g,settingName:"interval",newValue:t}))}})))})),(0,ce.jsx)(a.InlineField,Object.assign({label:"Min Doc Count"},Xe,{children:(0,ce.jsx)(a.Input,{id:`${f}-min_doc_count`,onBlur:e=>v(le({bucketAgg:g,settingName:"min_doc_count",newValue:e.target.value})),defaultValue:(null===(r=g.settings)||void 0===r?void 0:r.min_doc_count)||(null===(l=K.date_histogram.defaultSettings)||void 0===l?void 0:l.min_doc_count)})})),(0,ce.jsx)(a.InlineField,Object.assign({label:"Trim Edges"},Xe,{tooltip:"Trim the edges on the timeseries datapoints",children:(0,ce.jsx)(a.Input,{id:`${f}-trime_edges`,onBlur:e=>v(le({bucketAgg:g,settingName:"trimEdges",newValue:e.target.value})),defaultValue:(null===(o=g.settings)||void 0===o?void 0:o.trimEdges)||(null===(d=K.date_histogram.defaultSettings)||void 0===d?void 0:d.trimEdges)})})),(0,ce.jsx)(a.InlineField,Object.assign({label:"Offset"},Xe,{tooltip:"Change the start value of each bucket by the specified positive (+) or negative offset (-) duration, such as 1h for an hour, or 1d for a day",children:(0,ce.jsx)(a.Input,{id:`${f}-offset`,onBlur:e=>v(le({bucketAgg:g,settingName:"offset",newValue:e.target.value})),defaultValue:(null===(u=g.settings)||void 0===u?void 0:u.offset)||(null===(m=K.date_histogram.defaultSettings)||void 0===m?void 0:m.offset)})})),(0,ce.jsx)(a.InlineField,Object.assign({label:"Timezone"},Xe,{children:(0,ce.jsx)(a.TimeZonePicker,{value:(null===(p=g.settings)||void 0===p?void 0:p.timeZone)||(null===(h=K.date_histogram.defaultSettings)||void 0===h?void 0:h.timeZone),includeInternal:[i.InternalTimeZones.utc],onChange:e=>{v(le({bucketAgg:g,settingName:"timeZone",newValue:e}))}})}))]})},Pe=e=>{let{index:t,onAdd:s,onRemove:i,elements:n}=e;return(0,ce.jsxs)("div",{className:r.css`
        display: flex;
      `,children:[0===t&&(0,ce.jsx)(xe,{iconName:"plus",onClick:s,label:"add"}),n.length>=2&&(0,ce.jsx)(xe,{iconName:"minus",onClick:i,label:"remove"})]})},De=(0,P.PH)("@bucketAggregations/filter/add"),qe=(0,P.PH)("@bucketAggregations/filter/remove"),Ve=(0,P.PH)("@bucketAggregations/filter/change"),Be=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return De.match(t)?[...e,{label:"",query:"*"}]:qe.match(t)?e.slice(0,t.payload).concat(e.slice(t.payload+1)):Ve.match(t)?e.map((e,s)=>s!==t.payload.index?e:t.payload.filter):e},Ge=e=>{var t,s,i,o;let{bucketAgg:d}=e;const{current:u}=(0,n.useRef)((0,Ee.uniqueId)("es-filters-")),m=c(),p=l(e=>m(le({bucketAgg:d,settingName:"filters",newValue:e})),null===(t=d.settings)||void 0===t?void 0:t.filters,Be);return(0,n.useEffect)(()=>{var e,t;null!==(e=d.settings)&&void 0!==e&&null!==(t=e.filters)&&void 0!==t&&t.length||p(De())},[p,null===(s=d.settings)||void 0===s?void 0:null===(i=s.filters)||void 0===i?void 0:i.length]),(0,ce.jsx)(ce.Fragment,{children:(0,ce.jsx)("div",{className:r.css`
          display: flex;
          flex-direction: column;
        `,children:null===(o=d.settings)||void 0===o?void 0:o.filters.map((e,t)=>{var s;return(0,ce.jsxs)("div",{className:r.css`
              display: flex;
            `,children:[(0,ce.jsx)(a.InlineField,{label:"Query",labelWidth:8,children:(0,ce.jsx)("div",{className:r.css`
                  width: 150px;
                `,children:(0,ce.jsx)(a.QueryField,{placeholder:"Lucene Query",portalOrigin:"elasticsearch",onBlur:()=>{},onChange:s=>p(Ve({index:t,filter:Object.assign({},e,{query:s})})),query:e.query})})}),(0,ce.jsx)(a.InlineField,{label:"Label",labelWidth:8,children:(0,ce.jsx)(a.Input,{width:16,id:`${u}-label-${t}`,placeholder:"Label",onBlur:s=>p(Ve({index:t,filter:Object.assign({},e,{label:s.target.value})})),defaultValue:e.label})}),(0,ce.jsx)(Pe,{index:t,elements:(null===(s=d.settings)||void 0===s?void 0:s.filters)||[],onAdd:()=>p(De()),onRemove:()=>p(qe(t))})]},t)})})})},Ue=e=>{var t,s,i,r,l,o,d,u,m,p;let{bucketAgg:h}=e;const{metrics:g}=ge(),v=We(g),{current:f}=(0,n.useRef)((0,Ee.uniqueId)("es-terms-")),b=c();return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(a.InlineField,Object.assign({label:"Order"},Xe,{children:(0,ce.jsx)(a.Select,{inputId:`${f}-order`,onChange:e=>b(le({bucketAgg:h,settingName:"order",newValue:e.value})),options:te,value:(null===(t=h.settings)||void 0===t?void 0:t.order)||(null===(s=K.terms.defaultSettings)||void 0===s?void 0:s.order)})})),(0,ce.jsx)(a.InlineField,Object.assign({label:"Size"},Xe,{children:(0,ce.jsx)(a.Select,Object.assign({inputId:`${f}-size`},ze({options:se,value:(null===(i=h.settings)||void 0===i?void 0:i.size)||(null===(r=K.terms.defaultSettings)||void 0===r?void 0:r.size),onChange(e){let{value:t}=e;b(le({bucketAgg:h,settingName:"size",newValue:t}))}})))})),(0,ce.jsx)(a.InlineField,Object.assign({label:"Min Doc Count"},Xe,{children:(0,ce.jsx)(a.Input,{id:`${f}-min_doc_count`,onBlur:e=>b(le({bucketAgg:h,settingName:"min_doc_count",newValue:e.target.value})),defaultValue:(null===(l=h.settings)||void 0===l?void 0:l.min_doc_count)||(null===(o=K.terms.defaultSettings)||void 0===o?void 0:o.min_doc_count)})})),(0,ce.jsx)(a.InlineField,Object.assign({label:"Order By"},Xe,{children:(0,ce.jsx)(a.Select,{inputId:`${f}-order_by`,onChange:e=>b(le({bucketAgg:h,settingName:"orderBy",newValue:e.value})),options:v,value:(null===(d=h.settings)||void 0===d?void 0:d.orderBy)||(null===(u=K.terms.defaultSettings)||void 0===u?void 0:u.orderBy)})})),(0,ce.jsx)(a.InlineField,Object.assign({label:"Missing"},Xe,{children:(0,ce.jsx)(a.Input,{id:`${f}-missing`,onBlur:e=>b(le({bucketAgg:h,settingName:"missing",newValue:e.target.value})),defaultValue:(null===(m=h.settings)||void 0===m?void 0:m.missing)||(null===(p=K.terms.defaultSettings)||void 0===p?void 0:p.missing)})}))]})};function He(e){return"top_metrics"!==e.type&&!f(e)}const We=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(He).flatMap(e=>"extended_stats"===e.type?(e=e).meta?Object.keys(e.meta).filter(t=>{var s;return null===(s=e.meta)||void 0===s?void 0:s[t]}).map(t=>{let s=t;return"std_deviation_bounds_lower"===t&&(s="std_lower"),"std_deviation_bounds_upper"===t&&(s="std_upper"),{label:`${k(e)} (${s})`,value:`${e.id}[${s}]`}}):[]:"percentiles"===e.type?function(e){var t;return null!==(t=e.settings)&&void 0!==t&&t.percents?e.settings.percents.map(t=>{const s=/^\d+\.\d+/.test(`${t}`)?t:`${t}.0`;return{label:`${k(e)} (${t})`,value:`${e.id}[${s}]`}}):[]}(e):{label:k(e),value:e.id});var t;return[...ee,...e]},Qe=e=>t=>t.value===e,Xe={labelWidth:16},Ye=e=>{var t,s,i,r,l,o;let{bucketAgg:d}=e;const{current:u}=(0,n.useRef)((0,Ee.uniqueId)("es-setting-")),m=c(),p=(e=>{const{metrics:t}=ge();switch(e.type){case"terms":{var s,i,r,n;const l=(null===(s=e.settings)||void 0===s?void 0:s.order)||"desc",o=(null===(i=e.settings)||void 0===i?void 0:i.size)||"10",c=parseInt((null===(r=e.settings)||void 0===r?void 0:r.min_doc_count)||"0",10),d=(null===(n=e.settings)||void 0===n?void 0:n.orderBy)||"_term";let u="";var a;if("0"!==o)u=`${null===(a=te.find(Qe(l)))||void 0===a?void 0:a.label} ${o}, `;c>0&&(u+=`Min Doc Count: ${c}, `),u+="Order by: ";const m=ee.find(Qe(d));if(m)u+=m.label;else{const e=null===t||void 0===t?void 0:t.find(e=>e.id===T(d));u+=e?k(e):"metric not found"}return"0"===o&&(u+=` (${l})`),u}case"histogram":{var l,o;const t=(null===(l=e.settings)||void 0===l?void 0:l.interval)||1e3,s=(null===(o=e.settings)||void 0===o?void 0:o.min_doc_count)||1;return`Interval: ${t}${s>0?`, Min Doc Count: ${s}`:""}`}case"filters":var c,d;return`Filter Queries (${((null===(c=e.settings)||void 0===c?void 0:c.filters)||(null===(d=K.filters.defaultSettings)||void 0===d?void 0:d.filters)).length})`;case"geohash_grid":var u;return`Precision: ${Math.max(Math.min(parseInt((null===(u=e.settings)||void 0===u?void 0:u.precision)||"5",10),12),1)}`;case"date_histogram":{var m,p,h;const t=(null===(m=e.settings)||void 0===m?void 0:m.interval)||"auto",s=(null===(p=e.settings)||void 0===p?void 0:p.min_doc_count)||0,i=(null===(h=e.settings)||void 0===h?void 0:h.trimEdges)||0;let r=`Interval: ${t}`;return s>0&&(r+=`, Min Doc Count: ${s}`),i>0&&(r+=`, Trim edges: ${i}`),r}default:return"Settings"}})(d);return(0,ce.jsxs)(ke,{label:p,children:["terms"===d.type&&(0,ce.jsx)(Ue,{bucketAgg:d}),"date_histogram"===d.type&&(0,ce.jsx)(Ce,{bucketAgg:d}),"filters"===d.type&&(0,ce.jsx)(Ge,{bucketAgg:d}),"geohash_grid"===d.type&&(0,ce.jsx)(a.InlineField,Object.assign({label:"Precision"},Xe,{children:(0,ce.jsx)(a.Input,{id:`${u}-geohash_grid-precision`,onBlur:e=>m(le({bucketAgg:d,settingName:"precision",newValue:e.target.value})),defaultValue:(null===(t=d.settings)||void 0===t?void 0:t.precision)||(null===(s=K[d.type].defaultSettings)||void 0===s?void 0:s.precision)})})),"histogram"===d.type&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(a.InlineField,Object.assign({label:"Interval"},Xe,{children:(0,ce.jsx)(a.Input,{id:`${u}-histogram-interval`,onBlur:e=>m(le({bucketAgg:d,settingName:"interval",newValue:e.target.value})),defaultValue:(null===(i=d.settings)||void 0===i?void 0:i.interval)||(null===(r=K[d.type].defaultSettings)||void 0===r?void 0:r.interval)})})),(0,ce.jsx)(a.InlineField,Object.assign({label:"Min Doc Count"},Xe,{children:(0,ce.jsx)(a.Input,{id:`${u}-histogram-min_doc_count`,onBlur:e=>m(le({bucketAgg:d,settingName:"min_doc_count",newValue:e.target.value})),defaultValue:(null===(l=d.settings)||void 0===l?void 0:l.min_doc_count)||(null===(o=K[d.type].defaultSettings)||void 0===o?void 0:o.min_doc_count)})}))]})]})},Ze=Object.entries(K).map(e=>{let[t,{label:s}]=e;return{label:s,value:t}}),Je=e=>{let{value:t}=e;const s=c(),i=Fe(t.type);return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)(a.InlineSegmentGroup,{children:[(0,ce.jsx)(a.Segment,{className:Re,options:Ze,onChange:e=>s(ne({id:t.id,newType:e.value})),value:(e=>({label:K[e.type].label,value:e.type}))(t)}),Oe(t)&&(0,ce.jsx)(a.SegmentAsync,{className:Re,loadOptions:i,onChange:e=>s(ae({id:t.id,newField:e.value})),placeholder:"Select Field",value:t.field})]}),(0,ce.jsx)(Ye,{bucketAgg:t})]})},Ke=e=>{let{nextId:t}=e;const s=c(),{bucketAggs:i}=ge(),r=(null===i||void 0===i?void 0:i.length)||0;return(0,ce.jsx)(ce.Fragment,{children:i.map((e,i)=>(0,ce.jsxs)(Ie,{label:0===i?"Group By":"Then By",onRemoveClick:r>1&&(()=>s(re(e.id))),children:[(0,ce.jsx)(Je,{value:e}),0===i&&(0,ce.jsx)(xe,{iconName:"plus",onClick:()=>s(ie(t)),label:"add"})]},`${e.type}-${e.id}`))})},et=r.css`
  white-space: nowrap;
`,tt=e=>({label:k(e),value:e}),st=e=>{let{options:t,onChange:s,className:i,value:n}=e;const l=t.find(e=>e.id===n);return(0,ce.jsx)(a.Segment,{className:(0,r.cx)(i,et),options:(e=>e.map(tt))(t),onChange:s,placeholder:"Select Metric",value:l?tt(l):void 0})};function it(e){let{label:t,settingName:s,metric:i,placeholder:r,tooltip:l}=e;const o=c(),[d]=(0,n.useState)((0,Ee.uniqueId)("es-field-id-")),u=i.settings;let m=(null===u||void 0===u?void 0:u[s])||"";return"script"===s&&(m=L(i)),(0,ce.jsx)(a.InlineField,{label:t,labelWidth:16,tooltip:l,children:(0,ce.jsx)(a.Input,{id:d,placeholder:r,onBlur:e=>o(H({metric:i,settingName:s,newValue:e.target.value})),defaultValue:m})})}const rt=(0,P.PH)("@pipelineVariables/add"),nt=(0,P.PH)("@pipelineVariables/remove"),at=(0,P.PH)("@pipelineVariables/rename"),lt=(0,P.PH)("@pipelineVariables/change_metric"),ot=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return rt.match(t)?[...e,d(u(e))]:nt.match(t)?e.slice(0,t.payload).concat(e.slice(t.payload+1)):at.match(t)?e.map((e,s)=>s!==t.payload.index?e:Object.assign({},e,{name:t.payload.newName})):lt.match(t)?e.map((e,s)=>s!==t.payload.index?e:Object.assign({},e,{pipelineAgg:t.payload.newMetric})):e};var ct;const dt=e=>{var t;let{value:s,previousMetrics:i}=e;const o=c(),d=l(e=>o(U({metric:s,attribute:"pipelineVariables",newValue:e})),s.pipelineVariables,ot);return(0,n.useEffect)(()=>{var e;null!==(e=s.pipelineVariables)&&void 0!==e&&e.length||d(rt())},[d,null===(t=s.pipelineVariables)||void 0===t?void 0:t.length]),(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{className:r.css`
          display: flex;
        `,children:[ct||(ct=(0,ce.jsx)(a.InlineLabel,{width:16,children:"Variables"})),(0,ce.jsx)("div",{className:r.css`
            display: grid;
            grid-template-columns: 1fr auto;
            row-gap: 4px;
            margin-bottom: 4px;
          `,children:s.pipelineVariables.map((e,t)=>(0,ce.jsxs)(n.Fragment,{children:[(0,ce.jsxs)("div",{className:r.css`
                  display: grid;
                  column-gap: 4px;
                  grid-template-columns: auto auto;
                `,children:[(0,ce.jsx)(a.Input,{"aria-label":"Variable name",defaultValue:e.name,placeholder:"Variable Name",onBlur:e=>d(at({newName:e.target.value,index:t}))}),(0,ce.jsx)(st,{onChange:e=>d(lt({newMetric:e.value.id,index:t})),options:i,value:e.pipelineAgg})]}),(0,ce.jsx)(Pe,{index:t,elements:s.pipelineVariables||[],onAdd:()=>d(rt()),onRemove:()=>d(nt(t))})]},(0,Ee.uniqueId)("es-bs-")))})]}),(0,ce.jsx)(it,{label:"Script",metric:s,settingName:"script",tooltip:"Elasticsearch v5.0 and above: Scripting language is Painless. Use params.<var> to reference a variable. Elasticsearch pre-v5.0: Scripting language is per default Groovy if not changed. For Groovy use <var> to reference a variable.",placeholder:"params.var1 / params.var2"})]})},ut=e=>{var t,s,i,r,l,o,d,u,g,v,f,b;let{metric:y}=e;const j=c(),{current:_}=(0,n.useRef)((0,Ee.uniqueId)("es-moving-avg-"));return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(a.InlineField,{label:"Model",labelWidth:16,children:(0,ce.jsx)(a.Select,{inputId:`${_}-model`,onChange:e=>j(H({metric:y,settingName:"model",newValue:e.value})),options:S,value:null===(t=y.settings)||void 0===t?void 0:t.model})}),(0,ce.jsx)(it,{label:"Window",settingName:"window",metric:y,placeholder:"5"}),(0,ce.jsx)(it,{label:"Predict",settingName:"predict",metric:y}),(m(y)||p(y)||h(y))&&(0,ce.jsx)(a.InlineField,{label:"Alpha",labelWidth:16,children:(0,ce.jsx)(a.Input,{id:`${_}-alpha`,onBlur:e=>{var t;return j(H({metric:y,settingName:"settings",newValue:Object.assign({},null===(t=y.settings)||void 0===t?void 0:t.settings,{alpha:e.target.value})}))},defaultValue:null===(s=y.settings)||void 0===s?void 0:null===(i=s.settings)||void 0===i?void 0:i.alpha})}),(p(y)||h(y))&&(0,ce.jsx)(a.InlineField,{label:"Beta",labelWidth:16,children:(0,ce.jsx)(a.Input,{id:`${_}-beta`,onBlur:e=>{var t;return j(H({metric:y,settingName:"settings",newValue:Object.assign({},null===(t=y.settings)||void 0===t?void 0:t.settings,{beta:e.target.value})}))},defaultValue:null===(r=y.settings)||void 0===r?void 0:null===(l=r.settings)||void 0===l?void 0:l.beta})}),h(y)&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(a.InlineField,{label:"Gamma",labelWidth:16,children:(0,ce.jsx)(a.Input,{id:`${_}-gamma`,onBlur:e=>{var t;return j(H({metric:y,settingName:"settings",newValue:Object.assign({},null===(t=y.settings)||void 0===t?void 0:t.settings,{gamma:e.target.value})}))},defaultValue:null===(o=y.settings)||void 0===o?void 0:null===(d=o.settings)||void 0===d?void 0:d.gamma})}),(0,ce.jsx)(a.InlineField,{label:"Period",labelWidth:16,children:(0,ce.jsx)(a.Input,{id:`${_}-period`,onBlur:e=>{var t;return j(H({metric:y,settingName:"settings",newValue:Object.assign({},null===(t=y.settings)||void 0===t?void 0:t.settings,{period:e.target.value})}))},defaultValue:null===(u=y.settings)||void 0===u?void 0:null===(g=u.settings)||void 0===g?void 0:g.period})}),(0,ce.jsx)(a.InlineField,{label:"Pad",labelWidth:16,children:(0,ce.jsx)(a.InlineSwitch,{id:`${_}-pad`,onChange:e=>{var t;return j(H({metric:y,settingName:"settings",newValue:Object.assign({},null===(t=y.settings)||void 0===t?void 0:t.settings,{pad:e.target.checked})}))},checked:!(null===(v=y.settings)||void 0===v||null===(f=v.settings)||void 0===f||!f.pad)})})]}),(m(y)||p(y)||h(y))&&(0,ce.jsx)(a.InlineField,{label:"Minimize",labelWidth:16,children:(0,ce.jsx)(a.InlineSwitch,{id:`${_}-minimize`,onChange:e=>j(H({metric:y,settingName:"minimize",newValue:e.target.checked})),checked:!(null===(b=y.settings)||void 0===b||!b.minimize)})})]})},mt=e=>({value:e,label:e}),pt=e=>{var t,s,i,n;let{metric:l}=e;const o=c(),d=Fe(["number","date"]),u=Fe(l.type);return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(a.InlineField,{label:"Metrics",labelWidth:16,children:(0,ce.jsx)(a.AsyncMultiSelect,{onChange:e=>o(H({metric:l,settingName:"metrics",newValue:e.map(e=>e.value)})),loadOptions:u,value:null===(t=l.settings)||void 0===t?void 0:null===(s=t.metrics)||void 0===s?void 0:s.map(mt),closeMenuOnSelect:!1,defaultOptions:!0})}),(0,ce.jsx)(a.InlineField,{label:"Order",labelWidth:16,children:(0,ce.jsx)(a.Select,{onChange:e=>o(H({metric:l,settingName:"order",newValue:e.value})),options:te,value:null===(i=l.settings)||void 0===i?void 0:i.order})}),(0,ce.jsx)(a.InlineField,{label:"Order By",labelWidth:16,className:r.css`
          & > div {
            width: 100%;
          }
        `,children:(0,ce.jsx)(a.SegmentAsync,{className:r.css`
            margin-right: 0;
          `,loadOptions:d,onChange:e=>o(H({metric:l,settingName:"orderBy",newValue:e.value})),placeholder:"Select Field",value:null===(n=l.settings)||void 0===n?void 0:n.orderBy})})]})},ht={labelWidth:16},gt=e=>{var t,s,i,r,l,o,d;let{metric:u,previousMetrics:m}=e;const{current:p}=(0,n.useRef)((0,Ee.uniqueId)("es-setting-")),h=c(),g=(e=>{var t,s,i;switch(e.type){case"cardinality":var r;return`Precision threshold: ${(null===(r=e.settings)||void 0===r?void 0:r.precision_threshold)||""}`;case"percentiles":var n;return null!==(t=e.settings)&&void 0!==t&&t.percents&&(null===(s=e.settings)||void 0===s?void 0:null===(i=s.percents)||void 0===i?void 0:i.length)>=1?`Values: ${null===(n=e.settings)||void 0===n?void 0:n.percents}`:"Percents: Default";case"extended_stats":{const t=Object.entries(e.meta||{}).map(e=>{var t;let[s,i]=e;return i&&(null===(t=w.find((e=>t=>t.value===e)(s)))||void 0===t?void 0:t.label)}).filter(Boolean);return`Stats: ${t.length>0?t.join(", "):"None selected"}`}case"raw_document":case"raw_data":var a;return`Size: ${(null===(a=e.settings)||void 0===a?void 0:a.size)||500}`;default:return"Options"}})(u),v=ge();return(0,ce.jsxs)(ke,{label:g,hidden:u.hide,children:["derivative"===u.type&&(0,ce.jsx)(it,{label:"Unit",metric:u,settingName:"unit"}),"serial_diff"===u.type&&(0,ce.jsx)(it,{label:"Lag",metric:u,settingName:"lag",placeholder:"1"}),"cumulative_sum"===u.type&&(0,ce.jsx)(it,{label:"Format",metric:u,settingName:"format"}),"moving_avg"===u.type&&(0,ce.jsx)(ut,{metric:u}),"moving_fn"===u.type&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(it,{label:"Window",metric:u,settingName:"window"}),(0,ce.jsx)(it,{label:"Script",metric:u,settingName:"script"}),(0,ce.jsx)(it,{label:"Shift",metric:u,settingName:"shift"})]}),"top_metrics"===u.type&&(0,ce.jsx)(pt,{metric:u}),"bucket_script"===u.type&&(0,ce.jsx)(dt,{value:u,previousMetrics:m}),("raw_data"===u.type||"raw_document"===u.type)&&(0,ce.jsx)(a.InlineField,Object.assign({label:"Size"},ht,{children:(0,ce.jsx)(a.Input,{id:`ES-query-${v.refId}_metric-${u.id}-size`,onBlur:e=>h(H({metric:u,settingName:"size",newValue:e.target.value})),defaultValue:null!==(t=null===(s=u.settings)||void 0===s?void 0:s.size)&&void 0!==t?t:null===(i=x.raw_data.defaults.settings)||void 0===i?void 0:i.size})})),"logs"===u.type&&(0,ce.jsx)(it,{label:"Limit",metric:u,settingName:"limit",placeholder:"500"}),"cardinality"===u.type&&(0,ce.jsx)(it,{label:"Precision Threshold",metric:u,settingName:"precision_threshold"}),"extended_stats"===u.type&&(0,ce.jsxs)(ce.Fragment,{children:[w.map(e=>{var t,s,i;return(0,ce.jsx)(vt,{stat:e,onChange:t=>h(W({metric:u,meta:e.value,newValue:t})),value:void 0!==(null===(t=u.meta)||void 0===t?void 0:t[e.value])?!(null===(s=u.meta)||void 0===s||!s[e.value]):!(null===(i=x.extended_stats.defaults.meta)||void 0===i||!i[e.value])},e.value)}),(0,ce.jsx)(it,{label:"Sigma",metric:u,settingName:"sigma",placeholder:"3"})]}),"percentiles"===u.type&&(0,ce.jsx)(a.InlineField,Object.assign({label:"Percentiles"},ht,{children:(0,ce.jsx)(a.Input,{id:`${p}-percentiles-percents`,onBlur:e=>h(H({metric:u,settingName:"percents",newValue:e.target.value.split(",").filter(Boolean)})),defaultValue:(null===(r=u.settings)||void 0===r?void 0:r.percents)||(null===(l=x.percentiles.defaults.settings)||void 0===l?void 0:l.percents),placeholder:"1,5,25,50,75,95,99"})})),"rate"===u.type&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(a.InlineField,Object.assign({label:"Unit"},ht,{"data-testid":"unit-select",children:(0,ce.jsx)(a.Select,{id:`ES-query-${v.refId}_metric-${u.id}-unit`,onChange:e=>h(H({metric:u,settingName:"unit",newValue:e.value})),options:[{value:"second",label:"Second"},{value:"minute",label:"Minute"},{value:"hour",label:"Hour"},{value:"day",label:"Day"},{value:"week",label:"Week"},{value:"month",label:"Month"},{value:"quarter",label:"Quarter"},{value:"Year",label:"Year"}],value:null===(o=u.settings)||void 0===o?void 0:o.unit})})),(0,ce.jsx)(a.InlineField,Object.assign({label:"Mode"},ht,{"data-testid":"mode-select",children:(0,ce.jsx)(a.Select,{id:`ES-query-${v.refId}_metric-${u.id}-mode`,onChange:e=>h(H({metric:u,settingName:"mode",newValue:e.value})),options:[{value:"sum",label:"Sum"},{value:"value_count",label:"Value count"}],value:null===(d=u.settings)||void 0===d?void 0:d.unit})}))]}),j(u)&&(0,ce.jsx)(it,{label:"Script",metric:u,settingName:"script",placeholder:"_value * 1"}),(e=>x[e.type].supportsMissing)(u)&&(0,ce.jsx)(it,{label:"Missing",metric:u,settingName:"missing",tooltip:"The missing parameter defines how documents that are missing a value should be treated. By default they will be ignored but it is also possible to treat them as if they had a value"})]})},vt=e=>{let{stat:t,onChange:s,value:i}=e;const[r]=(0,n.useState)((0,Ee.uniqueId)("es-field-id-"));return(0,n.createElement)(a.InlineField,Object.assign({label:t.label},ht,{key:t.value}),(0,ce.jsx)(a.InlineSwitch,{id:r,onChange:e=>s(e.target.checked),value:i}))},ft=e=>!x[e.type].isPipelineAgg,bt=e=>{let{value:t}=e;const s=((e,t)=>({color:t&&r.css`
        &,
        &:hover,
        label,
        a {
          color: ${t?e.colors.text.disabled:e.colors.text.primary};
        }
      `}))((0,a.useTheme2)(),!!t.hide),i=ve(),l=ge(),o=c(),d=Fe(t.type),u=(0,n.useCallback)(async()=>{const e=await d();return j(t)?[{label:"None"},...e]:e},[d,t]),m=l.metrics.slice(0,l.metrics.findIndex(e=>e.id===t.id));return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)(a.InlineSegmentGroup,{children:[(0,ce.jsx)(a.Segment,{className:(0,r.cx)(s.color,Re),options:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=e.some(ft);return Object.entries(x).filter(e=>{let[s,{versionRange:i="*"}]=e;return(0,R.satisfies)(t,i)}).filter(e=>{let[t,s]=e;return i||!s.isPipelineAgg}).filter(e=>{let[t,i]=e;return!i.xpack||s}).map(e=>{let[t,{label:s}]=e;return{label:s,value:t}})}(m,i.esVersion,i.xpack),onChange:e=>o(G({id:t.id,type:e.value})),value:(e=>({label:x[e.type].label,value:e.type}))(t)}),v(t)&&!f(t)&&(0,ce.jsx)(a.SegmentAsync,{className:(0,r.cx)(s.color,Re),loadOptions:u,onChange:e=>o(B({id:t.id,field:e.value})),placeholder:"Select Field",value:t.field}),f(t)&&!b(t)&&(0,ce.jsx)(st,{className:(0,r.cx)(s.color,Re),onChange:e=>{var s;return o(B({id:t.id,field:null===(s=e.value)||void 0===s?void 0:s.id}))},options:m,value:t.field})]}),y(t)&&(0,ce.jsx)(gt,{metric:t,previousMetrics:m})]})},yt=e=>{let{nextId:t}=e;const s=c(),{metrics:i}=ge(),r=(null===i||void 0===i?void 0:i.length)||0;return(0,ce.jsx)(ce.Fragment,{children:null===i||void 0===i?void 0:i.map((e,i)=>(0,ce.jsxs)(Ie,{label:`Metric (${e.id})`,hidden:e.hide,onHideClick:()=>s(V(e.id)),onRemoveClick:r>1&&(()=>s(q(e.id))),children:[(0,ce.jsx)(bt,{value:e}),!x[e.type].isSingleMetric&&0===i&&(0,ce.jsx)(xe,{iconName:"plus",onClick:()=>s(D(t)),label:"add"})]},`${e.type}-${e.id}`))})};var jt,_t;const xt=e=>({root:r.css`
    display: flex;
  `,queryFieldWrapper:r.css`
    flex-grow: 1;
    margin: 0 ${e.spacing(.5)} ${e.spacing(.5)} 0;
  `}),Et=e=>{var t,s,i;let{value:r}=e;const l=c(),o=(()=>{const{metrics:e,bucketAggs:t}=ge();return(0,n.useMemo)(()=>(Math.max(...[...(null===e||void 0===e?void 0:e.map(be))||["0"],...(null===t||void 0===t?void 0:t.map(be))||["0"]].map(ye))+1).toString(),[e,t])})(),d=(0,a.useStyles2)(xt),u="date_histogram"===(null===(t=r.bucketAggs)||void 0===t?void 0:null===(s=t.slice(-1)[0])||void 0===s?void 0:s.type),m=null===(i=r.metrics)||void 0===i?void 0:i.every(e=>!x[e.type].isSingleMetric);return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{className:d.root,children:[_t||(_t=(0,ce.jsx)(a.InlineLabel,{width:17,children:"Query"})),(0,ce.jsx)("div",{className:d.queryFieldWrapper,children:(0,ce.jsx)(a.QueryField,{query:r.query,onBlur:()=>{},onChange:e=>l(X(e)),placeholder:"Lucene Query",portalOrigin:"elasticsearch"})}),(0,ce.jsx)(a.InlineField,{label:"Alias",labelWidth:15,disabled:!u,tooltip:"Aliasing only works for timeseries queries (when the last group is 'Date Histogram'). For all other query types this field is ignored.",children:(0,ce.jsx)(a.Input,{id:`ES-query-${r.refId}_alias`,placeholder:"Alias Pattern",onBlur:e=>l(Y(e.currentTarget.value)),defaultValue:r.alias})})]}),(0,ce.jsx)(yt,{nextId:o}),m&&(0,ce.jsx)(Ke,{nextId:o})]})};var It=s("./public/app/core/config.ts"),wt=s("./.yarn/__virtual__/react-use-virtual-00326e70ba/0/cache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/usePrevious.js"),St=s("./packages/grafana-runtime/src/index.ts");const{FormField:Ot,Switch:$t}=a.LegacyForms,Nt=(0,a.stylesFactory)(()=>({firstRow:r.css`
    display: flex;
  `,nameField:r.css`
    flex: 2;
  `,regexField:r.css`
    flex: 3;
  `,row:r.css`
    display: flex;
    align-items: baseline;
  `,urlField:r.css`
    flex: 1;
  `,urlDisplayLabelField:r.css`
    flex: 1;
  `})),At=e=>{const{value:t,onChange:s,onDelete:i,suggestions:r,className:l}=e,o=Nt(),[c,d]=function(e){const[t,s]=(0,n.useState)(!!e),i=(0,wt.Z)(e);return(0,n.useEffect)(()=>{i||!e||t||s(!0),i&&!e&&t&&s(!1)},[i,e,t]),[t,s]}(t.datasourceUid),u=e=>i=>{s(Object.assign({},t,{[e]:i.currentTarget.value}))};return(0,ce.jsxs)("div",{className:l,children:[(0,ce.jsxs)("div",{className:o.firstRow+" gf-form",children:[(0,ce.jsx)(Ot,{className:o.nameField,labelWidth:6,inputWidth:null,label:"Field",type:"text",value:t.field,tooltip:"Can be exact field name or a regex pattern that will match on the field name.",onChange:u("field")}),(0,ce.jsx)(a.Button,{variant:"destructive",title:"Remove field",icon:"times",onClick:e=>{e.preventDefault(),i()}})]}),(0,ce.jsxs)("div",{className:"gf-form",children:[(0,ce.jsx)(Ot,{label:c?"Query":"URL",labelWidth:6,inputEl:(0,ce.jsx)(a.DataLinkInput,{placeholder:c?"${__value.raw}":"http://example.com/${__value.raw}",value:t.url||"",onChange:e=>s(Object.assign({},t,{url:e})),suggestions:r}),className:o.urlField}),(0,ce.jsx)(Ot,{className:o.urlDisplayLabelField,inputWidth:null,label:"URL Label",type:"text",value:t.urlDisplayLabel,onChange:u("urlDisplayLabel"),tooltip:"Use to override the button label."})]}),(0,ce.jsxs)("div",{className:o.row,children:[(0,ce.jsx)($t,{labelClass:"width-6",label:"Internal link",checked:c,onChange:()=>{c&&s(Object.assign({},t,{datasourceUid:void 0})),d(!c)}}),c&&(0,ce.jsx)(St.DataSourcePicker,{tracing:!0,onChange:e=>{s(Object.assign({},t,{datasourceUid:e.uid}))},current:t.datasourceUid})]})]})};var Ft;const Rt=e=>({infoText:r.css`
      padding-bottom: ${e.spacing(2)};
      color: ${e.colors.text.secondary};
    `,dataLink:r.css`
      margin-bottom: ${e.spacing(1)};
    `}),kt=e=>{const{value:t,onChange:s}=e,n=(0,a.useStyles2)(Rt);return(0,ce.jsxs)(ce.Fragment,{children:[Ft||(Ft=(0,ce.jsx)("h3",{className:"page-heading",children:"Data links"})),(0,ce.jsx)("div",{className:n.infoText,children:"Add links to existing fields. Links will be shown in log row details next to the field value."}),t&&t.length>0&&(0,ce.jsx)("div",{className:"gf-form-group",children:t.map((e,r)=>(0,ce.jsx)(At,{className:n.dataLink,value:e,onChange:e=>{const i=[...t];i.splice(r,1,e),s(i)},onDelete:()=>{const e=[...t];e.splice(r,1),s(e)},suggestions:[{value:i.DataLinkBuiltInVars.valueRaw,label:"Raw value",documentation:"Raw value of the field",origin:i.VariableOrigin.Value}]},r))}),(0,ce.jsx)(a.Button,{type:"button",variant:"secondary",className:r.css`
          margin-right: 10px;
        `,icon:"plus",onClick:e=>{e.preventDefault();const i=[...t||[],{field:"",url:""}];s(i)},children:"Add"})]})},zt=e=>{var t;const s=M(e.jsonData.esVersion);return Object.assign({},e,{jsonData:Object.assign({},e.jsonData,{timeField:e.jsonData.timeField||"@timestamp",esVersion:s,maxConcurrentShardRequests:e.jsonData.maxConcurrentShardRequests||Gt(s),logMessageField:e.jsonData.logMessageField||"",logLevelField:e.jsonData.logLevelField||"",includeFrozen:null!==(t=e.jsonData.includeFrozen)&&void 0!==t&&t})})},Tt=e=>Boolean(e);var Lt;const Mt=[{label:"No pattern",value:"none"},{label:"Hourly",value:"Hourly",example:"[logstash-]YYYY.MM.DD.HH"},{label:"Daily",value:"Daily",example:"[logstash-]YYYY.MM.DD"},{label:"Weekly",value:"Weekly",example:"[logstash-]GGGG.WW"},{label:"Monthly",value:"Monthly",example:"[logstash-]YYYY.MM"},{label:"Yearly",value:"Yearly",example:"[logstash-]YYYY"}],Ct=[{label:"7.10+",value:"7.10.0"},{label:"8.0+",value:"8.0.0",description:"support for Elasticsearch 8 is currently experimental"}],Pt=e=>{var t;let{value:s,onChange:i}=e;const r=Ct.find(e=>e.value===s.jsonData.esVersion),n=!r&&(0,R.valid)(s.jsonData.esVersion)?{label:s.jsonData.esVersion,value:s.jsonData.esVersion}:void 0;return(0,ce.jsx)(ce.Fragment,{children:(0,ce.jsxs)(a.FieldSet,{label:"Elasticsearch details",children:[(0,ce.jsx)(a.InlineField,{label:"Index name",labelWidth:26,children:(0,ce.jsx)(a.Input,{id:"es_config_indexName",value:s.database||"",onChange:Dt("database",s,i),width:24,placeholder:"es-index-name",required:!0})}),(0,ce.jsx)(a.InlineField,{label:"Pattern",labelWidth:26,children:(0,ce.jsx)(a.Select,{inputId:"es_config_indexPattern",value:Mt.find(e=>e.value===(void 0===s.jsonData.interval?"none":s.jsonData.interval)),options:Mt,onChange:Bt(s,i),width:24})}),(0,ce.jsx)(a.InlineField,{label:"Time field name",labelWidth:26,children:(0,ce.jsx)(a.Input,{id:"es_config_timeField",value:s.jsonData.timeField||"",onChange:qt("timeField",s,i),width:24,placeholder:"@timestamp",required:!0})}),(0,ce.jsx)(a.InlineField,{label:"ElasticSearch version",labelWidth:26,children:(0,ce.jsx)(a.Select,{inputId:"es_config_version",options:[n,...Ct].filter(Tt),onChange:e=>{const t=function(e,t){if(5===e&&(0,R.lt)(t,"7.0.0"))return 256;if(256===e&&(0,R.gte)(t,"7.0.0"))return 5;return e||Gt(t)}(s.jsonData.maxConcurrentShardRequests,e.value);i(Object.assign({},s,{jsonData:Object.assign({},s.jsonData,{esVersion:e.value,maxConcurrentShardRequests:t})}))},value:r||n,width:24})}),(0,R.gte)(s.jsonData.esVersion,"5.6.0")&&(0,ce.jsx)(a.InlineField,{label:"Max concurrent Shard Requests",labelWidth:26,children:(0,ce.jsx)(a.Input,{id:"es_config_shardRequests",value:s.jsonData.maxConcurrentShardRequests||"",onChange:qt("maxConcurrentShardRequests",s,i),width:24})}),(0,ce.jsx)(a.InlineField,{label:"Min time interval",labelWidth:26,tooltip:(0,ce.jsxs)(ce.Fragment,{children:["A lower limit for the auto group by time interval. Recommended to be set to write frequency, for example"," ",Lt||(Lt=(0,ce.jsx)("code",{children:"1m"}))," if your data is written every minute."]}),error:"Value is not valid, you can use number with time unit specifier: y, M, w, d, h, m, s",invalid:!!s.jsonData.timeInterval&&!/^\d+(ms|[Mwdhmsy])$/.test(s.jsonData.timeInterval),children:(0,ce.jsx)(a.Input,{id:"es_config_minTimeInterval",value:s.jsonData.timeInterval||"",onChange:qt("timeInterval",s,i),width:24,placeholder:"10s"})}),(0,ce.jsx)(a.InlineField,{label:"X-Pack enabled",labelWidth:26,children:(0,ce.jsx)(a.InlineSwitch,{id:"es_config_xpackEnabled",checked:s.jsonData.xpack||!1,onChange:Vt("xpack",s,i)})}),(0,R.gte)(s.jsonData.esVersion,"6.6.0")&&s.jsonData.xpack&&(0,ce.jsx)(a.InlineField,{label:"Include Frozen Indices",labelWidth:26,children:(0,ce.jsx)(a.InlineSwitch,{id:"es_config_frozenIndices",checked:null!==(t=s.jsonData.includeFrozen)&&void 0!==t&&t,onChange:Vt("includeFrozen",s,i)})})]})})},Dt=(e,t,s)=>i=>{s(Object.assign({},t,{[e]:i.currentTarget.value}))},qt=(e,t,s)=>i=>{s(Object.assign({},t,{jsonData:Object.assign({},t.jsonData,{[e]:i.currentTarget.value})}))},Vt=(e,t,s)=>i=>{s(Object.assign({},t,{jsonData:Object.assign({},t.jsonData,{[e]:i.currentTarget.checked})}))},Bt=(e,t)=>s=>{const{database:i}=e,r="none"===s.value?void 0:s.value;if(!i||0===i.length||i.startsWith("[logstash-]")){let s="";if(void 0!==r){const e=Mt.find(e=>e.value===r);var n;if(e)s=null!==(n=e.example)&&void 0!==n?n:""}t(Object.assign({},e,{database:s,jsonData:Object.assign({},e.jsonData,{interval:r})}))}else t(Object.assign({},e,{jsonData:Object.assign({},e.jsonData,{interval:r})}))};function Gt(e){return(0,R.gte)(e,"7.0.0")?5:256}const Ut=e=>{const{value:t,onChange:s}=e,i=e=>i=>{s(Object.assign({},t,{[e]:i.currentTarget.value}))};return(0,ce.jsxs)(a.FieldSet,{label:"Logs",children:[(0,ce.jsx)(a.InlineField,{label:"Message field name",labelWidth:22,children:(0,ce.jsx)(a.Input,{id:"es_logs-config_logMessageField",value:t.logMessageField,onChange:i("logMessageField"),placeholder:"_source",width:24})}),(0,ce.jsx)(a.InlineField,{label:"Level field name",labelWidth:22,children:(0,ce.jsx)(a.Input,{id:"es_logs-config_logLevelField",value:t.logLevelField,onChange:i("logLevelField"),width:24})})]})};var Ht,Wt;var Qt=s("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/observable/throwError.js"),Xt=s("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/observable/generate.js"),Yt=s("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js"),Zt=s("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),Jt=s("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),Kt=s("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),es=s("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/operators/skipWhile.js"),ts=s("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/operators/throwIfEmpty.js"),ss=s("./.yarn/cache/rxjs-npm-7.5.5-d0546b1ccb-e034f60805.zip/node_modules/rxjs/dist/esm5/internal/operators/first.js"),is=s("./public/app/core/logs_model.ts"),rs=s("./public/app/features/templating/template_srv.ts"),ns=s("./public/app/core/table_model.ts"),as=s("./public/app/core/utils/flatten.ts");const ls=`${O.pre}([^@]+)${O.post}`;class os{constructor(e,t){var s,i,r;this.targets=e,this.response=t,r=(()=>{const e=[];for(let t=0;t<this.response.responses.length;t++){const s=this.response.responses[t],i=this.targets[t];if(s.error)throw this.getErrorFromElasticResponse(this.response,s.error);if(s.hits&&s.hits.hits.length>0&&this.processHits(s.hits,e,i),s.aggregations){const i=s.aggregations,r=this.targets[t],n=[],a=new ns.Z;a.refId=r.refId,this.processBuckets(i,r,n,a,{},0),this.trimDatapoints(n,r),this.nameSeries(n,r);for(let t=0;t<n.length;t++)e.push(n[t]);a.rows.length>0&&e.push(a)}}return{data:e}}),(i="processResponseToSeries")in(s=this)?Object.defineProperty(s,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[i]=r,this.targets=e,this.response=t,this.targets=e,this.response=t}processMetrics(e,t,s,i){let r;for(let o=0;o<t.metrics.length;o++){const c=t.metrics[o];if(!c.hide)switch(c.type){case"count":r={datapoints:[],metric:"count",props:i,refId:t.refId};for(let t=0;t<e.buckets.length;t++){const s=e.buckets[t],i=s.doc_count;r.datapoints.push([i,s.key])}s.push(r);break;case"percentiles":{if(0===e.buckets.length)break;const n=e.buckets[0][c.id].values;for(const a in n){r={datapoints:[],metric:"p"+a,props:i,field:c.field,refId:t.refId};for(let t=0;t<e.buckets.length;t++){const s=e.buckets[t],i=s[c.id].values;r.datapoints.push([i[a],s.key])}s.push(r)}break}case"extended_stats":for(const n in c.meta)if(c.meta[n]){r={datapoints:[],metric:n,props:i,field:c.field,refId:t.refId};for(let t=0;t<e.buckets.length;t++){const s=e.buckets[t],i=s[c.id];i.std_deviation_bounds_upper=i.std_deviation_bounds.upper,i.std_deviation_bounds_lower=i.std_deviation_bounds.lower,r.datapoints.push([i[n],s.key])}s.push(r)}break;case"top_metrics":var n,a;if(null!==(n=c.settings)&&void 0!==n&&null!==(a=n.metrics)&&void 0!==a&&a.length)for(const n of null===(l=c.settings)||void 0===l?void 0:l.metrics){var l;r={datapoints:[],metric:c.type,props:i,refId:t.refId,field:n};for(let t=0;t<e.buckets.length;t++){const s=e.buckets[t],i=s[c.id].top.map(e=>e.metrics[n]?e.metrics[n]:null),a=[i[i.length-1],s.key];r.datapoints.push(a)}s.push(r)}break;default:r={datapoints:[],metric:c.type,metricId:c.id,props:i,refId:t.refId},v(c)&&(r.field=c.field);for(let t=0;t<e.buckets.length;t++){const s=e.buckets[t],i=s[c.id];void 0!==i&&(i.normalized_value?r.datapoints.push([i.normalized_value,s.key]):r.datapoints.push([i.value,s.key]))}s.push(r)}}}processAggregationDocs(e,t,s,i,r){if(0===i.columns.length){for(const e of(0,Ee.keys)(r))i.addColumn({text:e,filterable:!0});i.addColumn({text:t.field,filterable:!0})}const n=(e,t,s)=>{i.addColumn({text:t}),e.push(s)},a=(0,Ee.isArray)(e.buckets)?e.buckets:[e.buckets];for(const e of a){const t=[];for(const e of(0,Ee.values)(r))t.push(e);t.push(e.key);for(const i of s.metrics||[])switch(i.type){case"count":n(t,this.getMetricName(i.type),e.doc_count);break;case"extended_stats":for(const s in i.meta){if(!i.meta[s])continue;const r=e[i.id];r.std_deviation_bounds_upper=r.std_deviation_bounds.upper,r.std_deviation_bounds_lower=r.std_deviation_bounds.lower,n(t,this.getMetricName(s),r[s])}break;case"percentiles":{const s=e[i.id].values;for(const e in s)n(t,`p${e} ${i.field}`,s[e]);break}case"top_metrics":{var l;const s=this.getMetricName(i.type);if(null!==(l=i.settings)&&void 0!==l&&l.metrics)for(const r of i.settings.metrics){n(t,i.settings.metrics.length>1?`${s} ${r}`:s,e[i.id].top[0].metrics[r])}break}default:{let r=this.getMetricName(i.type);(0,Ee.filter)(s.metrics,{type:i.type}).length>1&&(v(i)&&(r+=" "+i.field),"bucket_script"===i.type&&(r=L(i))),n(t,r,e[i.id].value);break}}i.rows.push(t)}}processBuckets(e,t,s,i,r,n){let a,l,o,c;const d=t.bucketAggs.length-1;for(c in e)if(l=(0,Ee.find)(t.bucketAggs,{id:c}),o=e[c],l)if(n===d)"date_histogram"===l.type?this.processMetrics(o,t,s,r):this.processAggregationDocs(o,l,t,i,r);else for(const e in o.buckets)a=o.buckets[e],r=(0,Ee.clone)(r),void 0!==a.key?r[l.field]=a.key:r.filter=e,a.key_as_string&&(r[l.field]=a.key_as_string),this.processBuckets(a,t,s,i,r,n+1)}getMetricName(e){const t=Object.entries(x).filter(t=>{let[s]=t;return s===e}).map(e=>{let[t,s]=e;return s})[0];if(t)return t.label;const s=w.find(t=>t.value===e);return s?s.label:e}getSeriesName(e,t,s){let i=this.getMetricName(e.metric);if(t.alias){const s=/\{\{([\s\S]+?)\}\}/g;return t.alias.replace(s,(t,s,r)=>{const n=s||r;return 0===n.indexOf("term ")?e.props[n.substring(5)]:void 0!==e.props[n]?e.props[n]:"metric"===n?i:"field"===n?e.field||"":t})}if(e.metric in E)if(e.metric&&function(e){return!!x[e].supportsMultipleBucketPaths}(e.metric)){const s=(0,Ee.find)(t.metrics,{id:e.metricId});if(s&&s.settings.script){i=L(s);for(const e of s.pipelineVariables){const s=(0,Ee.find)(t.metrics,{id:e.pipelineAgg});s&&(i=i.replace("params."+e.name,k(s)))}}else i="Unset"}else{const s=(0,Ee.find)(t.metrics,{id:e.field});s?i+=" "+k(s):i="Unset"}else e.field&&(i+=" "+e.field);if(0===(0,Ee.keys)(e.props).length)return i;let r="";for(const t in e.props)r+=e.props[t]+" ";return s?r.trim()+" "+i:r.trim()}nameSeries(e,t){var s;const i=(0,Ee.uniq)((0,Ee.map)(e,"metric")).length,r=(null===(s=t.metrics)||void 0===s?void 0:s.filter(e=>"top_metrics"===e.type)).some(e=>{var t,s;return((null===e||void 0===e?void 0:null===(t=e.settings)||void 0===t?void 0:null===(s=t.metrics)||void 0===s?void 0:s.length)||0)>1});for(let s=0;s<e.length;s++){const n=e[s];n.target=this.getSeriesName(n,t,i>1||r)}}processHits(e,t,s){const i="number"==typeof e.total?e.total:e.total.value,r={target:s.refId,type:"docs",refId:s.refId,datapoints:[],total:i,filterable:!0};let n,a,l,o;for(o=0;o<e.hits.length;o++){if(l={_id:(a=e.hits[o])._id,_type:a._type,_index:a._index,sort:a.sort,highlight:a.highlight},a._source)for(n in a._source)l[n]=a._source[n];for(n in a.fields)l[n]=a.fields[n];r.datapoints.push(l)}t.push(r)}trimDatapoints(e,t){const s=(0,Ee.find)(t.bucketAggs,{type:"date_histogram"});if(s&&s.settings&&s.settings.trimEdges){const t=s.settings.trimEdges;for(const s in e){const i=e[s];i.datapoints.length>2*t&&(i.datapoints=i.datapoints.slice(t,i.datapoints.length-t))}}}getErrorFromElasticResponse(e,t){const s={};return s.data=JSON.stringify(t,null,4),t.root_cause&&t.root_cause.length>0&&t.root_cause[0].reason?s.message=t.root_cause[0].reason:s.message=t.reason||"Unknown elastic error response",e.$$config&&(s.config=e.$$config),s}getTimeSeries(){return this.targets.some(e=>F(e,"raw_data"))?this.processResponseToDataFrames(!1):this.processResponseToSeries()}getLogs(e,t){return this.processResponseToDataFrames(!0,e,t)}processResponseToDataFrames(e,t,s){const r=[];for(let a=0;a<this.response.responses.length;a++){const l=this.response.responses[a];if(l.error)throw this.getErrorFromElasticResponse(this.response,l.error);if(l.hits){const{propNames:i,docs:o}=cs(l.hits.hits),c=o.length?ds(i.map(ms(o)),e,this.targets[0].timeField,t,s):ds([],e);e&&us(c,"logs");for(const e of o){if(s&&(e.level=e[s]),e.highlight){var n;const t=new RegExp(ls,"g"),s=new RegExp(ls),i=Object.keys(e.highlight).flatMap(i=>e.highlight[i].flatMap(e=>{const i=e.match(t);return i?i.map(e=>{const t=e.match(s);return t&&t[1]||null}):[]})).filter(Ee.identity),r=null!==(n=c.meta)&&void 0!==n&&n.searchWords?(0,Ee.uniq)([...c.meta.searchWords,...i]):[...i];c.meta=c.meta?Object.assign({},c.meta,{searchWords:r}):{searchWords:r}}c.add(e)}const d=this.targets[a];c.refId=d.refId,r.push(c)}if(l.aggregations){const t=l.aggregations,s=this.targets[a],n=[],o=new ns.Z;if(this.processBuckets(t,s,n,o,{},0),this.trimDatapoints(n,s),this.nameSeries(n,s),o.rows.length>0){const e=(0,i.toDataFrame)(o);e.refId=s.refId,r.push(e)}for(let t=0;t<n.length;t++){let a=(0,i.toDataFrame)(n[t]);e&&us(a,"graph"),a.refId=s.refId,r.push(a)}}}return{data:r}}}const cs=e=>{const t=[];let s=[];for(const i of e){const e=i._source?(0,as.default)(i._source):{},r=Object.assign({_id:i._id,_type:i._type,_index:i._index,sort:i.sort,highlight:i.highlight,_source:Object.assign({},e)},e);for(const e of Object.keys(r))-1===s.indexOf(e)&&s.push(e);t.push(r)}return s.sort(),{docs:t,propNames:s}},ds=(e,t,s,r,n)=>{const a=new i.MutableDataFrame({fields:[]});if(s&&a.addField({config:{filterable:!0},name:s,type:i.FieldType.time}),r){const e=a.addField({name:r,type:i.FieldType.string});a.setParser(e,e=>e||"")}if(n){const e=a.addField({name:"level",type:i.FieldType.string});a.setParser(e,e=>e||"")}const l=a.fields.map(e=>e.name);for(const[s,i]of e){if(l.includes(s))continue;if(!t&&"_source"===s)continue;const e=a.addField({config:{filterable:!0},name:s,type:i});a.setParser(e,e=>e||"")}return a},us=(e,t)=>{let s=e;s.meta?s.meta.preferredVisualisationType=t:s.meta={preferredVisualisationType:t}},ms=e=>t=>{var s;return[t,ps(null===(s=e.find(e=>void 0!==e[t]))||void 0===s?void 0:s[t])]},ps=e=>{switch(typeof e){case"number":return i.FieldType.number;case"string":return i.FieldType.string;default:return i.FieldType.other}};const hs={Hourly:{startOf:"hour",amount:"hours"},Daily:{startOf:"day",amount:"days"},Weekly:{startOf:"isoWeek",amount:"weeks"},Monthly:{startOf:"month",amount:"months"},Yearly:{startOf:"year",amount:"years"}};class gs{constructor(e,t){var s,i,r;this.pattern=e,this.interval=t,r="en",(i="dateLocale")in(s=this)?Object.defineProperty(s,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[i]=r,this.pattern=e,this.interval=t}getIndexForToday(){return this.interval?(0,i.toUtc)().locale(this.dateLocale).format(this.pattern):this.pattern}getIndexList(e,t){if(!this.interval)return this.pattern;const s=hs[this.interval],r=(0,i.dateTime)(e||(0,i.dateTime)(t).add(-7,s.amount)).utc().startOf(s.startOf),n=(0,i.dateTime)(t||(0,i.dateTime)(e).add(7,s.amount)).utc().startOf(s.startOf).valueOf(),a=[];for(;r.valueOf()<=n;)a.push(r.locale(this.dateLocale).format(this.pattern)),r.add(1,s.amount);return a}}class vs extends i.LanguageProvider{constructor(e,t){var s,i,r;super(),r=void 0,(i="datasource")in(s=this)?Object.defineProperty(s,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[i]=r,this.datasource=e,Object.assign(this,t)}importFromAbstractQuery(e){return{metrics:[{id:"1",type:"logs"}],query:this.getElasticsearchQuery(e.labelMatchers),refId:e.refId}}getElasticsearchQuery(e){return e.map(e=>{switch(e.operator){case i.AbstractLabelOperator.Equal:return e.name+':"'+e.value+'"';case i.AbstractLabelOperator.NotEqual:return"NOT "+e.name+':"'+e.value+'"';case i.AbstractLabelOperator.EqualRegEx:return e.name+":/"+e.value+"/";case i.AbstractLabelOperator.NotEqualRegEx:return"NOT "+e.name+":/"+e.value+"/"}}).join(" AND ")}}function fs(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class bs{constructor(e){fs(this,"timeField",void 0),fs(this,"esVersion",void 0),this.timeField=e.timeField,this.esVersion=e.esVersion}getRangeFilter(){const e={};return e[this.timeField]={gte:"$timeFrom",lte:"$timeTo",format:"epoch_millis"},e}buildTermsAgg(e,t,s){var i;if(t.terms={field:e.field},!e.settings)return t;const r=null!==(i=e.settings)&&void 0!==i&&i.size?parseInt(e.settings.size,10):500;if(t.terms.size=0===r?500:r,void 0!==e.settings.orderBy){t.terms.order={},"_term"===e.settings.orderBy&&(0,R.gte)(this.esVersion,"6.0.0")?t.terms.order._key=e.settings.order:t.terms.order[e.settings.orderBy]=e.settings.order;const i=T(e.settings.orderBy);if(i)for(let r of s.metrics||[])if(r.id===i){"count"===r.type?t.terms.order={_count:e.settings.order}:v(r)&&(t.aggs={},t.aggs[r.id]={[r.type]:{field:r.field}});break}}return void 0!==e.settings.min_doc_count&&(t.terms.min_doc_count=parseInt(e.settings.min_doc_count,10),isNaN(t.terms.min_doc_count)&&(t.terms.min_doc_count=e.settings.min_doc_count)),e.settings.missing&&(t.terms.missing=e.settings.missing),t}getDateHistogramAgg(e){const t={},s=e.settings||{};t.field=e.field||this.timeField,t.min_doc_count=s.min_doc_count||0,t.extended_bounds={min:"$timeFrom",max:"$timeTo"},t.format="epoch_millis",s.timeZone&&s.timeZone!==i.InternalTimeZones.utc&&(t.time_zone=s.timeZone),""!==s.offset&&(t.offset=s.offset);const r="auto"===s.interval?"$__interval":s.interval;return(0,R.gte)(this.esVersion,"8.0.0")?t.fixed_interval=r:t.interval=r,t}getHistogramAgg(e){const t={},s=e.settings||{};return t.interval=s.interval,t.field=e.field,t.min_doc_count=s.min_doc_count||0,t}getFiltersAgg(e){const t={};for(let{query:i,label:r}of(null===(s=e.settings)||void 0===s?void 0:s.filters)||[]){var s;t[r||i]={query_string:{query:i,analyze_wildcard:!0}}}return t}documentQuery(e,t){return e.size=t,e.sort=[{[this.timeField]:{order:"desc",unmapped_type:"boolean"}},{_doc:{order:"desc"}}],(0,R.lt)(this.esVersion,"5.0.0")&&(e.fields=["*","_source"]),e.script_fields={},e}addAdhocFilters(e,t){if(!t)return;let s,i,r,n;for(s=0;s<t.length;s++)switch((r={})[(i=t[s]).key]=i.value,(n={})[i.key]={query:i.value},i.operator){case"=":e.query.bool.must||(e.query.bool.must=[]),e.query.bool.must.push({match_phrase:n});break;case"!=":e.query.bool.must_not||(e.query.bool.must_not=[]),e.query.bool.must_not.push({match_phrase:n});break;case"<":r[i.key]={lt:i.value},e.query.bool.filter.push({range:r});break;case">":r[i.key]={gt:i.value},e.query.bool.filter.push({range:r});break;case"=~":e.query.bool.filter.push({regexp:r});break;case"!~":e.query.bool.filter.push({bool:{must_not:{regexp:r}}})}}build(e,t){var s,i,r,n,a,l,o,c,d;let u,m,p,h,j;e.metrics=e.metrics||[$()],e.bucketAggs=e.bucketAggs||[N()],e.timeField=this.timeField;const _={size:0,query:{bool:{filter:[{range:this.getRangeFilter()}]}}};if(e.query&&""!==e.query&&(_.query.bool.filter=[..._.query.bool.filter,{query_string:{analyze_wildcard:!0,query:e.query}}]),this.addAdhocFilters(_,t),0===e.bucketAggs.length&&(!(u=e.metrics[0])||"raw_document"!==u.type&&"raw_data"!==u.type))throw{message:"Invalid query"};if("raw_document"===(null===(s=e.metrics)||void 0===s?void 0:null===(i=s[0])||void 0===i?void 0:i.type)||"raw_data"===(null===(r=e.metrics)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.type)){var x;const t=null!==(x=(u=e.metrics[0]).settings)&&void 0!==x&&x.size?parseInt(u.settings.size,10):500;return this.documentQuery(_,t||500)}for(j=_,m=0;m<e.bucketAggs.length;m++){const t=e.bucketAggs[m],s={};switch(t.type){case"date_histogram":s.date_histogram=this.getDateHistogramAgg(t);break;case"histogram":s.histogram=this.getHistogramAgg(t);break;case"filters":s.filters={filters:this.getFiltersAgg(t)};break;case"terms":this.buildTermsAgg(t,s,e);break;case"geohash_grid":var E;s.geohash_grid={field:t.field,precision:null===(E=t.settings)||void 0===E?void 0:E.precision}}j.aggs=j.aggs||{},j.aggs[t.id]=s,j=s}for(j.aggs={},m=0;m<e.metrics.length;m++){if("count"===(u=e.metrics[m]).type)continue;const t={};let s={};if(f(u))if(b(u)){if(!u.pipelineVariables)continue;for(s={buckets_path:{}},p=0;p<u.pipelineVariables.length;p++)if((h=u.pipelineVariables[p]).name&&h.pipelineAgg&&/^\d*$/.test(h.pipelineAgg)){const t=A(e.metrics,h.pipelineAgg);t&&("count"===t.type?s.buckets_path[h.name]="_count":s.buckets_path[h.name]=h.pipelineAgg)}}else{if(!u.field||!/^\d*$/.test(u.field))continue;{const t=A(e.metrics,u.field);t&&(s="count"===t.type?{buckets_path:"_count"}:{buckets_path:u.field})}}else v(u)&&(s={field:u.field});if(y(u))switch(Object.entries(u.settings||{}).filter(e=>{let[t,s]=e;return null!==s}).forEach(e=>{let[t,i]=e;s[t]="script"===t?this.buildScript(L(u)):i}),u.type){case"moving_avg":s=Object.assign({},s,void 0!==(null===(a=s)||void 0===a?void 0:a.window)&&{window:this.toNumber(s.window)},void 0!==(null===(l=s)||void 0===l?void 0:l.predict)&&{predict:this.toNumber(s.predict)},g(u)&&{settings:Object.assign({},s.settings,Object.fromEntries(Object.entries(s.settings||{}).filter(e=>{let[t]=e;return["alpha","beta","gamma","period"].includes(t)}).filter(e=>{let[t,s]=e;return void 0!==s}).map(e=>{let[t,s]=e;return[t,this.toNumber(s)]})))});break;case"serial_diff":s=Object.assign({},s,void 0!==s.lag&&{lag:this.toNumber(s.lag)});break;case"top_metrics":var I,w;if(s={metrics:null===(o=u.settings)||void 0===o?void 0:null===(c=o.metrics)||void 0===c?void 0:c.map(e=>({field:e})),size:1},null!==(d=u.settings)&&void 0!==d&&d.orderBy)s.sort=[{[null===(I=u.settings)||void 0===I?void 0:I.orderBy]:null===(w=u.settings)||void 0===w?void 0:w.order}]}t[u.type]=s,j.aggs[u.id]=t}return _}buildScript(e){return(0,R.gte)(this.esVersion,"5.6.0")?e:{inline:e}}toNumber(e){const t=parseFloat(`${e}`);return isNaN(t)?e:t}getTermsQuery(e){const t={size:0,query:{bool:{filter:[{range:this.getRangeFilter()}]}}};e.query&&t.query.bool.filter.push({query_string:{analyze_wildcard:!0,query:e.query}});let s=500;e.size&&(s=e.size),t.aggs={1:{terms:{field:e.field,size:s,order:{}}}};const{orderBy:i="key",order:r=("doc_count"===i?"desc":"asc")}=e;if(["asc","desc"].indexOf(r)<0)throw{message:`Invalid query sort order ${r}`};switch(i){case"key":case"term":const e=(0,R.gte)(this.esVersion,"6.0.0")?"_key":"_term";t.aggs[1].terms.order[e]=r;break;case"doc_count":t.aggs[1].terms.order._count=r;break;default:throw{message:`Invalid query sort type ${i}`}}return t}getLogsQuery(e,t,s){let i={size:0,query:{bool:{filter:[{range:this.getRangeFilter()}]}}};return this.addAdhocFilters(i,s),e.query&&i.query.bool.filter.push({query_string:{analyze_wildcard:!0,query:e.query}}),i=this.documentQuery(i,t),Object.assign({},i,{aggs:this.build(e,null).aggs,highlight:{fields:{"*":{}},pre_tags:[O.pre],post_tags:[O.post],fragment_size:2147483647}})}}function ys(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const js=["_index","_type","_id","_source","_size","_field_names","_ignored","_routing","_meta"];function _s(e){const t=(0,St.getDataSourceSrv)();if(e.datasourceUid){var s;const i=t.getInstanceSettings(e.datasourceUid);return{title:e.urlDisplayLabel||"",url:"",internal:{query:{query:e.url},datasourceUid:e.datasourceUid,datasourceName:null!==(s=null===i||void 0===i?void 0:i.name)&&void 0!==s?s:"Data source not found"}}}return{title:e.urlDisplayLabel||"",url:e.url}}class xs{}!function(e,t,s){t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s}(xs,"templateUrl","partials/annotations.editor.html");const Es=new i.DataSourcePlugin(class extends i.DataSourceApi{constructor(e){var t,s;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,rs.J)();super(e),this.templateSrv=r,ys(this,"basicAuth",void 0),ys(this,"withCredentials",void 0),ys(this,"url",void 0),ys(this,"name",void 0),ys(this,"index",void 0),ys(this,"timeField",void 0),ys(this,"esVersion",void 0),ys(this,"xpack",void 0),ys(this,"interval",void 0),ys(this,"maxConcurrentShardRequests",void 0),ys(this,"queryBuilder",void 0),ys(this,"indexPattern",void 0),ys(this,"logMessageField",void 0),ys(this,"logLevelField",void 0),ys(this,"dataLinks",void 0),ys(this,"languageProvider",void 0),ys(this,"includeFrozen",void 0),ys(this,"getLogRowContext",async(e,t)=>{var s;const r=e.dataFrame.fields.find(e=>"sort"===e.name),n=(null===r||void 0===r?void 0:r.values.get(e.rowIndex))||[e.timeEpochMs],a="FORWARD"===(null===t||void 0===t?void 0:t.direction)?"asc":"desc",l="FORWARD"===(null===t||void 0===t?void 0:t.direction)?this.getQueryHeader("query_then_fetch",(0,i.dateTime)(e.timeEpochMs)):this.getQueryHeader("query_then_fetch",void 0,(0,i.dateTime)(e.timeEpochMs)),o=null!==(s=null===t||void 0===t?void 0:t.limit)&&void 0!==s?s:10,c=[l,JSON.stringify({size:o,query:{bool:{filter:[{range:{[this.timeField]:{["FORWARD"===(null===t||void 0===t?void 0:t.direction)?"gte":"lte"]:e.timeEpochMs,format:"epoch_millis"}}}]}},sort:[{[this.timeField]:a},{_doc:a}],search_after:n})].join("\n")+"\n",d=this.getMultiSearchUrl(),u=await(0,Se.n)(this.post(d,c)),m=[{refId:`${e.dataFrame.refId}`,metrics:[{type:"logs",id:"1"}]}],p=new os(m,function(e,t){if("desc"===t)return e;const s=e.responses[0];return Object.assign({},e,{responses:[Object.assign({},s,{hits:Object.assign({},s.hits,{hits:s.hits.hits.reverse()})})]})}(u,a)).getLogs(this.logMessageField,this.logLevelField),h=(0,Ee.first)(p.data);if(!h)return{data:[]};const g=h.fields.find(e=>e.name===this.timeField),v=h.fields.find(e=>e.name===this.logMessageField);return g&&v?{data:[Object.assign({},h,{fields:[...h.fields,Object.assign({},g,{name:"ts"}),Object.assign({},v,{name:"line"})]})]}:p}),this.templateSrv=r,this.basicAuth=e.basicAuth,this.withCredentials=e.withCredentials,this.url=e.url,this.name=e.name,this.index=null!==(t=e.database)&&void 0!==t?t:"";const n=e.jsonData||{};this.timeField=n.timeField,this.esVersion=M(n.esVersion),this.xpack=Boolean(n.xpack),this.indexPattern=new gs(this.index,n.interval),this.interval=n.timeInterval,this.maxConcurrentShardRequests=n.maxConcurrentShardRequests,this.queryBuilder=new bs({timeField:this.timeField,esVersion:this.esVersion}),this.logMessageField=n.logMessageField||"",this.logLevelField=n.logLevelField||"",this.dataLinks=n.dataLinks||[],this.includeFrozen=null!==(s=n.includeFrozen)&&void 0!==s&&s,""===this.logMessageField&&(this.logMessageField=void 0),""===this.logLevelField&&(this.logLevelField=void 0),this.languageProvider=new vs(this)}request(e,t,s,i){if(!C(this.esVersion)){const e=new Error("Support for Elasticsearch versions after their end-of-life (currently versions < 7.10) was removed.");return(0,Qt._)(()=>e)}const r={url:this.url+"/"+t,method:e,data:s,headers:i};return(this.basicAuth||this.withCredentials)&&(r.withCredentials=!0),this.basicAuth&&(r.headers={Authorization:this.basicAuth}),(0,St.getBackendSrv)().fetch(r).pipe((0,Zt.U)(e=>(e.data.$$config=e.config,e.data)),(0,Jt.K)(e=>{if(e.data){var t,s,i;const r=null!==(t=null!==(s=null===(i=e.data.error)||void 0===i?void 0:i.reason)&&void 0!==s?s:e.data.message)&&void 0!==t?t:"Unknown error";return(0,Qt._)({message:"Elasticsearch error: "+r,error:e.data.error})}return(0,Qt._)(e)}))}async importFromAbstractQueries(e){return e.map(e=>this.languageProvider.importFromAbstractQuery(e))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,i.getDefaultTimeRange)(),s=this.indexPattern.getIndexList(t.from,t.to);Array.isArray(s)||(s=[this.indexPattern.getIndexForToday()]);const r=s.map(t=>t+e);return this.requestAllIndices(r)}requestAllIndices(e){const t=e.length;return(0,Xt.R)({initialState:0,condition:e=>e<Math.min(t,7),iterate:e=>e+1}).pipe((0,Kt.z)(s=>this.request("GET",e[t-s-1]).pipe((0,Jt.K)(e=>(0,Yt.of)({err:e})))),(0,es.n)(e=>{var t;return 404===(null===e||void 0===e?void 0:null===(t=e.err)||void 0===t?void 0:t.status)}),(0,ts.T)(()=>"Could not find an available index for this time range."),(0,ss.P)(),(0,Zt.U)(e=>{if(e.err)throw e.err;return e}))}post(e,t){return this.request("POST",e,t,{"Content-Type":"application/x-ndjson"})}annotationQuery(e){const t=e.annotation,s=t.timeField||"@timestamp",r=t.timeEndField||null,n=t.query,a=t.tagsField||"tags",l=t.textField||null,o=[],c={};if(c[s]={from:e.range.from.valueOf(),to:e.range.to.valueOf(),format:"epoch_millis"},o.push({range:c}),r){const t={};t[r]={from:e.range.from.valueOf(),to:e.range.to.valueOf(),format:"epoch_millis"},o.push({range:t})}const d=this.interpolateLuceneQuery(n),u={bool:{filter:[{bool:{should:o,minimum_should_match:1}}]}};d&&u.bool.filter.push({query_string:{query:d}});const m={query:u,size:1e4};(0,R.lt)(this.esVersion,"5.0.0")&&(m.fields=[s,"_source"]);const p={search_type:"query_then_fetch",ignore_unavailable:!0};t.index?p.index=t.index:p.index=this.indexPattern.getIndexList(e.range.from,e.range.to);const h=JSON.stringify(p)+"\n"+JSON.stringify(m)+"\n";return(0,Se.n)(this.post("_msearch",h).pipe((0,Zt.U)(e=>{const n=[],o=e.responses[0].hits.hits,c=(e,t)=>{if(!t)return;const s=t.split(".");let i=e;for(let e=0;e<s.length;e++)if(!(i=i[s[e]]))return console.log("could not find field in annotation: ",t),"";return i};for(let e=0;e<o.length;e++){const d=o[e]._source;let u=c(d,s);if(void 0!==o[e].fields){const t=o[e].fields;((0,Ee.isString)(t[s])||(0,Ee.isNumber)(t[s]))&&(u=t[s])}const m={annotation:t,time:(0,i.toUtc)(u).valueOf(),text:c(d,l),tags:c(d,a)};if(r){const e=c(d,r);e&&(m.timeEnd=(0,i.toUtc)(e).valueOf())}if(t.titleField){const e=c(d,t.titleField);e&&(m.text=e+"\n"+m.text)}"string"==typeof m.tags&&(m.tags=m.tags.split(",")),n.push(m)}return n})))}interpolateLuceneQuery(e,t){return this.templateSrv.replace(e,t,"lucene")}interpolateVariablesInQueries(e,t){const s=e=>{var s,i;return"filters"===e.type?Object.assign({},e,{settings:Object.assign({},e.settings,{filters:null===(s=e.settings)||void 0===s?void 0:null===(i=s.filters)||void 0===i?void 0:i.map(e=>Object.assign({},e,{query:this.interpolateLuceneQuery(e.query,t)||"*"}))})}):e},i=e.map(e=>{var i;return Object.assign({},e,{datasource:this.getRef(),query:this.interpolateLuceneQuery(e.query||"",t),bucketAggs:null===(i=e.bucketAggs)||void 0===i?void 0:i.map(s)})});return JSON.parse(this.templateSrv.replace(JSON.stringify(i),t))}testDatasource(){return(0,Se.n)(this.getFields(["date"]).pipe((0,Kt.z)(e=>(0,Ee.find)(e,{text:this.timeField})?(0,Yt.of)({status:"success",message:"Index OK. Time field name OK."}):(0,Yt.of)({status:"error",message:"No date field named "+this.timeField+" found"})),(0,Jt.K)(e=>(console.error(e),e.message?(0,Yt.of)({status:"error",message:e.message}):(0,Yt.of)({status:"error",message:e.status})))))}getQueryHeader(e,t,s){const i={search_type:e,ignore_unavailable:!0,index:this.indexPattern.getIndexList(t,s)};return(0,R.satisfies)(this.esVersion,">=5.6.0 <7.0.0")&&(i.max_concurrent_shard_requests=this.maxConcurrentShardRequests),JSON.stringify(i)}getQueryDisplayText(e){const t=e.metrics,s=e.bucketAggs;let i="";return e.query&&(i+="Query: "+e.query+", "),i+="Metrics: ",i+=null===t||void 0===t?void 0:t.reduce((e,t)=>{let s=x[t.type].label+"(";return v(t)&&(s+=t.field),b(t)&&(s+=L(t).replace(new RegExp("params.","g"),"")),`${e} ${s+="), "}`},""),i+=null===s||void 0===s?void 0:s.reduce((e,t,s)=>{const i=K[t.type];let r="";return 0===s&&(r+=" Group by: "),r+=i.label+"(",Oe(t)&&(r+=t.field),`${e} ${r}), `},""),e.alias&&(i+="Alias: "+e.alias),i}showContextToggle(){return(0,R.gte)(this.esVersion,"5.0.0")}getLogsVolumeDataProvider(e){if(!e.targets.some(e=>{var t;return 1===(null===(t=e.metrics)||void 0===t?void 0:t.length)&&"logs"===e.metrics[0].type}))return;const t=(0,Ee.cloneDeep)(e);return t.targets=t.targets.map(e=>{var t;const s=[],r=null!==(t=this.timeField)&&void 0!==t?t:"@timestamp";return this.logLevelField&&s.push({id:"2",type:"terms",settings:{min_doc_count:"0",size:"0",order:"desc",orderBy:"_count",missing:i.LogLevel.unknown},field:this.logLevelField}),s.push({id:"3",type:"date_histogram",settings:{interval:"auto",min_doc_count:"0",trimEdges:"0"},field:r}),{refId:e.refId,query:e.query,metrics:[{type:"count",id:"1"}],timeField:r,bucketAggs:s}}),(0,is.Bz)(this,t,{range:e.range,targets:e.targets,extractLevel:e=>(0,i.getLogLevelFromKey)(e.name||"")})}query(e){let t="";const s=this.interpolateVariablesInQueries((0,Ee.cloneDeep)(e.targets),e.scopedVars),i=[];let r=s.some(e=>F(e,"logs"));const n=this.templateSrv.getAdhocFilters(this.name),a=[];for(const r of s){if(r.hide)continue;let s;if(F(r,"logs")){var l,o,c;r.bucketAggs=[N()];const e=null===(l=r.metrics)||void 0===l?void 0:l.find(e=>"logs"===e.type),t=null!==(o=e.settings)&&void 0!==o&&o.limit?parseInt(null===(c=e.settings)||void 0===c?void 0:c.limit,10):500;a.push(t),r.metrics=[],s=this.queryBuilder.getLogsQuery(r,t,n)}else a.push(),r.alias&&(r.alias=this.interpolateLuceneQuery(r.alias,e.scopedVars)),s=this.queryBuilder.build(r,n);const d=JSON.stringify(s),u=0===s.size&&(0,R.lt)(this.esVersion,"5.0.0")?"count":"query_then_fetch";t+=this.getQueryHeader(u,e.range.from,e.range.to)+"\n",t+=d+"\n",i.push(r)}if(0===i.length)return(0,Yt.of)({data:[]});t=(t=t.replace(/"\$timeFrom"/g,e.range.from.valueOf().toString())).replace(/"\$timeTo"/g,e.range.to.valueOf().toString()),t=this.templateSrv.replace(t,e.scopedVars);const d=this.getMultiSearchUrl();return this.post(d,t).pipe((0,Zt.U)(e=>{const t=new os(i,e);if(r){const e=t.getLogs(this.logMessageField,this.logLevelField);return e.data.forEach((e,t)=>{!function(e,t,s){if(s&&(e.meta=Object.assign({},e.meta,{limit:s})),t.length)for(const s of e.fields){const e=t.filter(e=>new RegExp(e.field).test(s.name));0!==e.length&&(s.config=s.config||{},s.config.links=[...(s.config.links,e.map(_s))])}}(e,this.dataLinks,a[t])}),e}return t.getTimeSeries()}))}isMetadataField(e){return js.includes(e)}getFields(e,t){const s={float:"number",double:"number",integer:"number",long:"number",date:"date",date_nanos:"date",string:"string",text:"string",scaled_float:"number",nested:"nested",histogram:"number"};return this.get("/_mapping",t).pipe((0,Zt.U)(t=>{const i=(t,i)=>!this.isMetadataField(i)&&(!e||0===e.length||e.includes(t.type)||e.includes(s[t.type])),r=[],n={};function a(e){for(const t in e){const s=e[t];if((0,Ee.isObject)(s.properties)&&(r.push(t),a(s.properties)),(0,Ee.isObject)(s.fields)&&(r.push(t),a(s.fields)),(0,Ee.isString)(s.type)){const e=r.concat(t).join(".");i(s,t)&&(n[e]={text:e,type:s.type})}}r.pop()}for(const e in t){const s=t[e];if(s&&s.mappings){const e=s.mappings;if((0,R.lt)(this.esVersion,"7.0.0"))for(const t in e)a(e[t].properties);else a(e.properties)}}return(0,Ee.map)(n,e=>e)}))}getTerms(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,i.getDefaultTimeRange)();const s=(0,R.gte)(this.esVersion,"5.0.0")?"query_then_fetch":"count",r=this.getQueryHeader(s,t.from,t.to);let n=JSON.stringify(this.queryBuilder.getTermsQuery(e));n=r+"\n"+(n=(n=n.replace(/\$timeFrom/g,t.from.valueOf().toString())).replace(/\$timeTo/g,t.to.valueOf().toString()))+"\n";const a=this.getMultiSearchUrl();return this.post(a,n).pipe((0,Zt.U)(e=>{if(!e.responses[0].aggregations)return[];const t=e.responses[0].aggregations[1].buckets;return(0,Ee.map)(t,e=>({text:e.key_as_string||e.key,value:e.key}))}))}getMultiSearchUrl(){const e=new URLSearchParams;return(0,R.gte)(this.esVersion,"7.0.0")&&this.maxConcurrentShardRequests&&e.append("max_concurrent_shard_requests",`${this.maxConcurrentShardRequests}`),(0,R.gte)(this.esVersion,"6.6.0")&&this.xpack&&this.includeFrozen&&e.append("ignore_throttled","false"),("_msearch?"+e.toString()).replace(/\?$/,"")}metricFindQuery(e,t){const s=null===t||void 0===t?void 0:t.range,i=JSON.parse(e);if(e){if("fields"===i.find)return i.type=this.interpolateLuceneQuery(i.type),(0,Se.n)(this.getFields(i.type,s));if("terms"===i.find)return i.field=this.interpolateLuceneQuery(i.field),i.query=this.interpolateLuceneQuery(i.query),(0,Se.n)(this.getTerms(i,s))}return Promise.resolve([])}getTagKeys(){return(0,Se.n)(this.getFields())}getTagValues(e){return(0,Se.n)(this.getTerms({field:e.key}))}targetContainsTemplate(e){if(this.templateSrv.containsTemplate(e.query)||this.templateSrv.containsTemplate(e.alias))return!0;for(const t of e.bucketAggs)if(this.templateSrv.containsTemplate(t.field)||this.objectContainsTemplate(t.settings))return!0;for(const t of e.metrics)if(this.templateSrv.containsTemplate(t.field)||this.objectContainsTemplate(t.settings)||this.objectContainsTemplate(t.meta))return!0;return!1}isPrimitive(e){return null===e||void 0===e||!!["string","number","boolean"].some(e=>e===typeof!0)}objectContainsTemplate(e){if(!e)return!1;for(const t of Object.keys(e))if(this.isPrimitive(e[t])){if(this.templateSrv.containsTemplate(e[t]))return!0}else if(Array.isArray(e[t])){for(const s of e[t])if(this.objectContainsTemplate(s))return!0}else if(this.objectContainsTemplate(e[t]))return!0;return!1}}).setQueryEditor(e=>{let{query:t,onChange:s,onRunQuery:r,datasource:n,range:l}=e;return C(n.esVersion)?(0,ce.jsx)(pe,{datasource:n,onChange:s,onRunQuery:r,query:t,range:l||(0,i.getDefaultTimeRange)(),children:(0,ce.jsx)(Et,{value:t})}):jt||(jt=(0,ce.jsx)(a.Alert,{title:"Support for Elasticsearch versions after their end-of-life (currently versions < 7.10) was removed"}))}).setConfigEditor(e=>{const{options:t,onOptionsChange:s}=e,i=zt(t);(0,n.useEffect)(()=>{(e=>!!(0,R.valid)(e.jsonData.esVersion)&&!!e.jsonData.timeField&&!!e.jsonData.maxConcurrentShardRequests&&void 0!==e.jsonData.logMessageField&&void 0!==e.jsonData.logLevelField)(t)||s(zt(t))},[]);const r=C(i.jsonData.esVersion);return(0,ce.jsxs)(ce.Fragment,{children:["direct"===i.access&&(Ht||(Ht=(0,ce.jsx)(a.Alert,{title:"Deprecation Notice",severity:"warning",children:"Browser access mode in the Elasticsearch datasource is deprecated and will be removed in a future release."}))),!r&&(Wt||(Wt=(0,ce.jsx)(a.Alert,{title:"Deprecation notice",severity:"error",children:"Support for Elasticsearch versions after their end-of-life (currently versions < 7.10) was removed"}))),(0,ce.jsx)(a.DataSourceHttpSettings,{defaultUrl:"http://localhost:9200",dataSourceConfig:i,showAccessOptions:!0,onChange:s,sigV4AuthToggleEnabled:It.vc.sigV4AuthEnabled}),(0,ce.jsx)(Pt,{value:i,onChange:s}),(0,ce.jsx)(Ut,{value:i.jsonData,onChange:e=>s(Object.assign({},i,{jsonData:e}))}),(0,ce.jsx)(kt,{value:i.jsonData.dataLinks,onChange:e=>{s(Object.assign({},i,{jsonData:Object.assign({},i.jsonData,{dataLinks:e})}))}})]})}).setAnnotationQueryCtrl(xs)},"./.yarn/__virtual__/react-use-virtual-00326e70ba/0/cache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/usePrevious.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>(function(e){var t=(0,i.useRef)();return(0,i.useEffect)(function(){t.current=e}),t.current})});var i=s("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js")},"./.yarn/cache/lru-cache-npm-6.0.0-b4c8668fe1-f97f499f89.zip/node_modules/lru-cache/index.js":(e,t,s)=>{"use strict";const i=s("./.yarn/cache/yallist-npm-4.0.0-b493d9e907-343617202a.zip/node_modules/yallist/yallist.js"),r=Symbol("max"),n=Symbol("length"),a=Symbol("lengthCalculator"),l=Symbol("allowStale"),o=Symbol("maxAge"),c=Symbol("dispose"),d=Symbol("noDisposeOnSet"),u=Symbol("lruList"),m=Symbol("cache"),p=Symbol("updateAgeOnGet"),h=()=>1;const g=(e,t,s)=>{const i=e[m].get(t);if(i){const t=i.value;if(v(e,t)){if(b(e,i),!e[l])return}else s&&(e[p]&&(i.value.now=Date.now()),e[u].unshiftNode(i));return t.value}},v=(e,t)=>{if(!t||!t.maxAge&&!e[o])return!1;const s=Date.now()-t.now;return t.maxAge?s>t.maxAge:e[o]&&s>e[o]},f=e=>{if(e[n]>e[r])for(let t=e[u].tail;e[n]>e[r]&&null!==t;){const s=t.prev;b(e,t),t=s}},b=(e,t)=>{if(t){const s=t.value;e[c]&&e[c](s.key,s.value),e[n]-=s.length,e[m].delete(s.key),e[u].removeNode(t)}};class y{constructor(e,t,s,i,r){this.key=e,this.value=t,this.length=s,this.now=i,this.maxAge=r||0}}const j=(e,t,s,i)=>{let r=s.value;v(e,r)&&(b(e,s),e[l]||(r=void 0)),r&&t.call(i,r.value,r.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[r]=e.max||1/0;const t=e.length||h;if(this[a]="function"!=typeof t?h:t,this[l]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[o]=e.maxAge||0,this[c]=e.dispose,this[d]=e.noDisposeOnSet||!1,this[p]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[r]=e||1/0,f(this)}get max(){return this[r]}set allowStale(e){this[l]=!!e}get allowStale(){return this[l]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[o]=e,f(this)}get maxAge(){return this[o]}set lengthCalculator(e){"function"!=typeof e&&(e=h),e!==this[a]&&(this[a]=e,this[n]=0,this[u].forEach(e=>{e.length=this[a](e.value,e.key),this[n]+=e.length})),f(this)}get lengthCalculator(){return this[a]}get length(){return this[n]}get itemCount(){return this[u].length}rforEach(e,t){t=t||this;for(let s=this[u].tail;null!==s;){const i=s.prev;j(this,e,s,t),s=i}}forEach(e,t){t=t||this;for(let s=this[u].head;null!==s;){const i=s.next;j(this,e,s,t),s=i}}keys(){return this[u].toArray().map(e=>e.key)}values(){return this[u].toArray().map(e=>e.value)}reset(){this[c]&&this[u]&&this[u].length&&this[u].forEach(e=>this[c](e.key,e.value)),this[m]=new Map,this[u]=new i,this[n]=0}dump(){return this[u].map(e=>!v(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[u]}set(e,t,s){if((s=s||this[o])&&"number"!=typeof s)throw new TypeError("maxAge must be a number");const i=s?Date.now():0,l=this[a](t,e);if(this[m].has(e)){if(l>this[r])return b(this,this[m].get(e)),!1;const a=this[m].get(e).value;return this[c]&&(this[d]||this[c](e,a.value)),a.now=i,a.maxAge=s,a.value=t,this[n]+=l-a.length,a.length=l,this.get(e),f(this),!0}const p=new y(e,t,l,i,s);return p.length>this[r]?(this[c]&&this[c](e,t),!1):(this[n]+=p.length,this[u].unshift(p),this[m].set(e,this[u].head),f(this),!0)}has(e){if(!this[m].has(e))return!1;const t=this[m].get(e).value;return!v(this,t)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){const e=this[u].tail;return e?(b(this,e),e.value):null}del(e){b(this,this[m].get(e))}load(e){this.reset();const t=Date.now();for(let s=e.length-1;s>=0;s--){const i=e[s],r=i.e||0;if(0===r)this.set(i.k,i.v);else{const e=r-t;e>0&&this.set(i.k,i.v,e)}}}prune(){this[m].forEach((e,t)=>g(this,t,!1))}}},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/comparator.js":(e,t,s)=>{const i=Symbol("SemVer ANY");class r{static get ANY(){return i}constructor(e,t){if(t=n(t),e instanceof r){if(e.loose===!!t.loose)return e;e=e.value}c("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===i?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(e){const t=this.options.loose?a[l.COMPARATORLOOSE]:a[l.COMPARATOR],s=e.match(t);if(!s)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==s[1]?s[1]:"","="===this.operator&&(this.operator=""),s[2]?this.semver=new d(s[2],this.options.loose):this.semver=i}toString(){return this.value}test(e){if(c("Comparator.test",e,this.options.loose),this.semver===i||e===i)return!0;if("string"==typeof e)try{e=new d(e,this.options)}catch(e){return!1}return o(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new u(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new u(this.value,t).test(e.semver);const s=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),n=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),l=o(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=o(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return s||i||n&&a||l||c}}e.exports=r;const n=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/parse-options.js"),{re:a,t:l}=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/re.js"),o=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/cmp.js"),c=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/debug.js"),d=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/semver.js"),u=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/range.js")},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/range.js":(e,t,s)=>{class i{constructor(e,t){if(t=n(t),e instanceof i)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new i(e.raw,t);if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter(e=>!h(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&g(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,s=r.get(t);if(s)return s;const i=this.options.loose,n=i?c[d.HYPHENRANGELOOSE]:c[d.HYPHENRANGE];e=e.replace(n,O(this.options.includePrerelease)),l("hyphen replace",e),e=e.replace(c[d.COMPARATORTRIM],u),l("comparator trim",e,c[d.COMPARATORTRIM]),e=(e=(e=e.replace(c[d.TILDETRIM],m)).replace(c[d.CARETTRIM],p)).split(/\s+/).join(" ");const o=i?c[d.COMPARATORLOOSE]:c[d.COMPARATOR],g=e.split(" ").map(e=>f(e,this.options)).join(" ").split(/\s+/).map(e=>S(e,this.options)).filter(this.options.loose?e=>!!e.match(o):()=>!0).map(e=>new a(e,this.options)),v=(g.length,new Map);for(const e of g){if(h(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");const b=[...v.values()];return r.set(t,b),b}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Range is required");return this.set.some(s=>v(s,t)&&e.set.some(e=>v(e,t)&&s.every(s=>e.every(e=>s.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new o(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if($(this.set[t],e,this.options))return!0;return!1}}e.exports=i;const r=new(s("./.yarn/cache/lru-cache-npm-6.0.0-b4c8668fe1-f97f499f89.zip/node_modules/lru-cache/index.js"))({max:1e3}),n=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/parse-options.js"),a=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/comparator.js"),l=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/debug.js"),o=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/semver.js"),{re:c,t:d,comparatorTrimReplace:u,tildeTrimReplace:m,caretTrimReplace:p}=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/re.js"),h=e=>"<0.0.0-0"===e.value,g=e=>""===e.value,v=(e,t)=>{let s=!0;const i=e.slice();let r=i.pop();for(;s&&i.length;)s=i.every(e=>r.intersects(e,t)),r=i.pop();return s},f=(e,t)=>(l("comp",e,t),e=_(e,t),l("caret",e),e=y(e,t),l("tildes",e),e=E(e,t),l("xrange",e),e=w(e,t),l("stars",e),e),b=e=>!e||"x"===e.toLowerCase()||"*"===e,y=(e,t)=>e.trim().split(/\s+/).map(e=>j(e,t)).join(" "),j=(e,t)=>{const s=t.loose?c[d.TILDELOOSE]:c[d.TILDE];return e.replace(s,(t,s,i,r,n)=>{let a;return l("tilde",e,t,s,i,r,n),b(s)?a="":b(i)?a=`>=${s}.0.0 <${+s+1}.0.0-0`:b(r)?a=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:n?(l("replaceTilde pr",n),a=`>=${s}.${i}.${r}-${n} <${s}.${+i+1}.0-0`):a=`>=${s}.${i}.${r} <${s}.${+i+1}.0-0`,l("tilde return",a),a})},_=(e,t)=>e.trim().split(/\s+/).map(e=>x(e,t)).join(" "),x=(e,t)=>{l("caret",e,t);const s=t.loose?c[d.CARETLOOSE]:c[d.CARET],i=t.includePrerelease?"-0":"";return e.replace(s,(t,s,r,n,a)=>{let o;return l("caret",e,t,s,r,n,a),b(s)?o="":b(r)?o=`>=${s}.0.0${i} <${+s+1}.0.0-0`:b(n)?o="0"===s?`>=${s}.${r}.0${i} <${s}.${+r+1}.0-0`:`>=${s}.${r}.0${i} <${+s+1}.0.0-0`:a?(l("replaceCaret pr",a),o="0"===s?"0"===r?`>=${s}.${r}.${n}-${a} <${s}.${r}.${+n+1}-0`:`>=${s}.${r}.${n}-${a} <${s}.${+r+1}.0-0`:`>=${s}.${r}.${n}-${a} <${+s+1}.0.0-0`):(l("no pr"),o="0"===s?"0"===r?`>=${s}.${r}.${n}${i} <${s}.${r}.${+n+1}-0`:`>=${s}.${r}.${n}${i} <${s}.${+r+1}.0-0`:`>=${s}.${r}.${n} <${+s+1}.0.0-0`),l("caret return",o),o})},E=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map(e=>I(e,t)).join(" ")),I=(e,t)=>{e=e.trim();const s=t.loose?c[d.XRANGELOOSE]:c[d.XRANGE];return e.replace(s,(s,i,r,n,a,o)=>{l("xRange",e,s,i,r,n,a,o);const c=b(r),d=c||b(n),u=d||b(a),m=u;return"="===i&&m&&(i=""),o=t.includePrerelease?"-0":"",c?s=">"===i||"<"===i?"<0.0.0-0":"*":i&&m?(d&&(n=0),a=0,">"===i?(i=">=",d?(r=+r+1,n=0,a=0):(n=+n+1,a=0)):"<="===i&&(i="<",d?r=+r+1:n=+n+1),"<"===i&&(o="-0"),s=`${i+r}.${n}.${a}${o}`):d?s=`>=${r}.0.0${o} <${+r+1}.0.0-0`:u&&(s=`>=${r}.${n}.0${o} <${r}.${+n+1}.0-0`),l("xRange return",s),s})},w=(e,t)=>(l("replaceStars",e,t),e.trim().replace(c[d.STAR],"")),S=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),O=e=>(t,s,i,r,n,a,l,o,c,d,u,m,p)=>`${s=b(i)?"":b(r)?`>=${i}.0.0${e?"-0":""}`:b(n)?`>=${i}.${r}.0${e?"-0":""}`:a?`>=${s}`:`>=${s}${e?"-0":""}`} ${o=b(c)?"":b(d)?`<${+c+1}.0.0-0`:b(u)?`<${c}.${+d+1}.0-0`:m?`<=${c}.${d}.${u}-${m}`:e?`<${c}.${d}.${+u+1}-0`:`<=${o}`}`.trim(),$=(e,t,s)=>{for(let s=0;s<e.length;s++)if(!e[s].test(t))return!1;if(t.prerelease.length&&!s.includePrerelease){for(let s=0;s<e.length;s++)if(l(e[s].semver),e[s].semver!==a.ANY&&e[s].semver.prerelease.length>0){const i=e[s].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/semver.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/debug.js"),{MAX_LENGTH:r,MAX_SAFE_INTEGER:n}=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/constants.js"),{re:a,t:l}=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/re.js"),o=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/parse-options.js"),{compareIdentifiers:c}=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/identifiers.js");class d{constructor(e,t){if(t=o(t),e instanceof d){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>r)throw new TypeError(`version is longer than ${r} characters`);i("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const s=e.trim().match(t.loose?a[l.LOOSE]:a[l.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<n)return t}return e}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(i("SemVer.compare",this.version,this.options,e),!(e instanceof d)){if("string"==typeof e&&e===this.version)return 0;e=new d(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof d||(e=new d(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof d||(e=new d(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const s=this.prerelease[t],r=e.prerelease[t];if(i("prerelease compare",t,s,r),void 0===s&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===s)return-1;if(s!==r)return c(s,r)}while(++t)}compareBuild(e){e instanceof d||(e=new d(e,this.options));let t=0;do{const s=this.build[t],r=e.build[t];if(i("prerelease compare",t,s,r),void 0===s&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===s)return-1;if(s!==r)return c(s,r)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=d},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/clean.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/parse.js");e.exports=((e,t)=>{const s=i(e.trim().replace(/^[=v]+/,""),t);return s?s.version:null})},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/cmp.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/eq.js"),r=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/neq.js"),n=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/gt.js"),a=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/gte.js"),l=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/lt.js"),o=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/lte.js");e.exports=((e,t,s,c)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof s&&(s=s.version),e===s;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof s&&(s=s.version),e!==s;case"":case"=":case"==":return i(e,s,c);case"!=":return r(e,s,c);case">":return n(e,s,c);case">=":return a(e,s,c);case"<":return l(e,s,c);case"<=":return o(e,s,c);default:throw new TypeError(`Invalid operator: ${t}`)}})},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/coerce.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/semver.js"),r=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/parse.js"),{re:n,t:a}=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/re.js");e.exports=((e,t)=>{if(e instanceof i)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let s=null;if((t=t||{}).rtl){let t;for(;(t=n[a.COERCERTL].exec(e))&&(!s||s.index+s[0].length!==e.length);)s&&t.index+t[0].length===s.index+s[0].length||(s=t),n[a.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;n[a.COERCERTL].lastIndex=-1}else s=e.match(n[a.COERCE]);return null===s?null:r(`${s[2]}.${s[3]||"0"}.${s[4]||"0"}`,t)})},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare-build.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/semver.js");e.exports=((e,t,s)=>{const r=new i(e,s),n=new i(t,s);return r.compare(n)||r.compareBuild(n)})},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare-loose.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare.js");e.exports=((e,t)=>i(e,t,!0))},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/semver.js");e.exports=((e,t,s)=>new i(e,s).compare(new i(t,s)))},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/diff.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/parse.js"),r=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/eq.js");e.exports=((e,t)=>{if(r(e,t))return null;{const s=i(e),r=i(t),n=s.prerelease.length||r.prerelease.length,a=n?"pre":"",l=n?"prerelease":"";for(const e in s)if(("major"===e||"minor"===e||"patch"===e)&&s[e]!==r[e])return a+e;return l}})},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/eq.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare.js");e.exports=((e,t,s)=>0===i(e,t,s))},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/gt.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare.js");e.exports=((e,t,s)=>i(e,t,s)>0)},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/gte.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare.js");e.exports=((e,t,s)=>i(e,t,s)>=0)},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/inc.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/semver.js");e.exports=((e,t,s,r)=>{"string"==typeof s&&(r=s,s=void 0);try{return new i(e,s).inc(t,r).version}catch(e){return null}})},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/lt.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare.js");e.exports=((e,t,s)=>i(e,t,s)<0)},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/lte.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare.js");e.exports=((e,t,s)=>i(e,t,s)<=0)},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/major.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/semver.js");e.exports=((e,t)=>new i(e,t).major)},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/minor.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/semver.js");e.exports=((e,t)=>new i(e,t).minor)},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/neq.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare.js");e.exports=((e,t,s)=>0!==i(e,t,s))},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/parse.js":(e,t,s)=>{const{MAX_LENGTH:i}=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/constants.js"),{re:r,t:n}=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/re.js"),a=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/semver.js"),l=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/parse-options.js");e.exports=((e,t)=>{if(t=l(t),e instanceof a)return e;if("string"!=typeof e)return null;if(e.length>i)return null;if(!(t.loose?r[n.LOOSE]:r[n.FULL]).test(e))return null;try{return new a(e,t)}catch(e){return null}})},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/patch.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/semver.js");e.exports=((e,t)=>new i(e,t).patch)},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/prerelease.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/parse.js");e.exports=((e,t)=>{const s=i(e,t);return s&&s.prerelease.length?s.prerelease:null})},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/rcompare.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare.js");e.exports=((e,t,s)=>i(t,e,s))},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/rsort.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare-build.js");e.exports=((e,t)=>e.sort((e,s)=>i(s,e,t)))},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/satisfies.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/range.js");e.exports=((e,t,s)=>{try{t=new i(t,s)}catch(e){return!1}return t.test(e)})},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/sort.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare-build.js");e.exports=((e,t)=>e.sort((e,s)=>i(e,s,t)))},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/valid.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/parse.js");e.exports=((e,t)=>{const s=i(e,t);return s?s.version:null})},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/index.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/re.js");e.exports={re:i.re,src:i.src,tokens:i.t,SEMVER_SPEC_VERSION:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/constants.js").SEMVER_SPEC_VERSION,SemVer:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/semver.js"),compareIdentifiers:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/identifiers.js").compareIdentifiers,rcompareIdentifiers:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/identifiers.js").rcompareIdentifiers,parse:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/parse.js"),valid:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/valid.js"),clean:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/clean.js"),inc:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/inc.js"),diff:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/diff.js"),major:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/major.js"),minor:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/minor.js"),patch:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/patch.js"),prerelease:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/prerelease.js"),compare:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare.js"),rcompare:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/rcompare.js"),compareLoose:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare-loose.js"),compareBuild:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare-build.js"),sort:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/sort.js"),rsort:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/rsort.js"),gt:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/gt.js"),lt:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/lt.js"),eq:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/eq.js"),neq:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/neq.js"),gte:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/gte.js"),lte:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/lte.js"),cmp:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/cmp.js"),coerce:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/coerce.js"),Comparator:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/comparator.js"),Range:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/range.js"),satisfies:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/satisfies.js"),toComparators:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/to-comparators.js"),maxSatisfying:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/max-satisfying.js"),minSatisfying:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/min-satisfying.js"),minVersion:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/min-version.js"),validRange:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/valid.js"),outside:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/outside.js"),gtr:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/gtr.js"),ltr:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/ltr.js"),intersects:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/intersects.js"),simplifyRange:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/simplify.js"),subset:s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/subset.js")}},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/constants.js":e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:t,MAX_SAFE_COMPONENT_LENGTH:16}},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/debug.js":e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/identifiers.js":e=>{const t=/^[0-9]+$/,s=(e,s)=>{const i=t.test(e),r=t.test(s);return i&&r&&(e=+e,s=+s),e===s?0:i&&!r?-1:r&&!i?1:e<s?-1:1};e.exports={compareIdentifiers:s,rcompareIdentifiers:(e,t)=>s(t,e)}},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/parse-options.js":e=>{const t=["includePrerelease","loose","rtl"];e.exports=(e=>e?"object"!=typeof e?{loose:!0}:t.filter(t=>e[t]).reduce((e,t)=>(e[t]=!0,e),{}):{})},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/re.js":(e,t,s)=>{const{MAX_SAFE_COMPONENT_LENGTH:i}=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/constants.js"),r=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/internal/debug.js"),n=(t=e.exports={}).re=[],a=t.src=[],l=t.t={};let o=0;const c=(e,t,s)=>{const i=o++;r(i,t),l[e]=i,a[i]=t,n[i]=new RegExp(t,s?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${a[l.NUMERICIDENTIFIER]})\\.`+`(${a[l.NUMERICIDENTIFIER]})\\.`+`(${a[l.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${a[l.NUMERICIDENTIFIERLOOSE]})\\.`+`(${a[l.NUMERICIDENTIFIERLOOSE]})\\.`+`(${a[l.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${a[l.NUMERICIDENTIFIER]}|${a[l.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${a[l.NUMERICIDENTIFIERLOOSE]}|${a[l.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${a[l.PRERELEASEIDENTIFIER]}(?:\\.${a[l.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${a[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[l.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${a[l.BUILDIDENTIFIER]}(?:\\.${a[l.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${a[l.MAINVERSION]}${a[l.PRERELEASE]}?${a[l.BUILD]}?`),c("FULL",`^${a[l.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${a[l.MAINVERSIONLOOSE]}${a[l.PRERELEASELOOSE]}?${a[l.BUILD]}?`),c("LOOSE",`^${a[l.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",`${a[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),c("XRANGEIDENTIFIER",`${a[l.NUMERICIDENTIFIER]}|x|X|\\*`),c("XRANGEPLAIN",`[v=\\s]*(${a[l.XRANGEIDENTIFIER]})`+`(?:\\.(${a[l.XRANGEIDENTIFIER]})`+`(?:\\.(${a[l.XRANGEIDENTIFIER]})`+`(?:${a[l.PRERELEASE]})?${a[l.BUILD]}?`+")?)?"),c("XRANGEPLAINLOOSE",`[v=\\s]*(${a[l.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${a[l.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${a[l.XRANGEIDENTIFIERLOOSE]})`+`(?:${a[l.PRERELEASELOOSE]})?${a[l.BUILD]}?`+")?)?"),c("XRANGE",`^${a[l.GTLT]}\\s*${a[l.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${a[l.GTLT]}\\s*${a[l.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${i}})`+`(?:\\.(\\d{1,${i}}))?`+`(?:\\.(\\d{1,${i}}))?`+"(?:$|[^\\d])"),c("COERCERTL",a[l.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${a[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",c("TILDE",`^${a[l.LONETILDE]}${a[l.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${a[l.LONETILDE]}${a[l.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${a[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",c("CARET",`^${a[l.LONECARET]}${a[l.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${a[l.LONECARET]}${a[l.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${a[l.GTLT]}\\s*(${a[l.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${a[l.GTLT]}\\s*(${a[l.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${a[l.GTLT]}\\s*(${a[l.LOOSEPLAIN]}|${a[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${a[l.XRANGEPLAIN]})`+"\\s+-\\s+"+`(${a[l.XRANGEPLAIN]})`+"\\s*$"),c("HYPHENRANGELOOSE",`^\\s*(${a[l.XRANGEPLAINLOOSE]})`+"\\s+-\\s+"+`(${a[l.XRANGEPLAINLOOSE]})`+"\\s*$"),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0.0.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/gtr.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/outside.js");e.exports=((e,t,s)=>i(e,t,">",s))},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/intersects.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/range.js");e.exports=((e,t,s)=>(e=new i(e,s),t=new i(t,s),e.intersects(t)))},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/ltr.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/outside.js");e.exports=((e,t,s)=>i(e,t,"<",s))},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/max-satisfying.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/semver.js"),r=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/range.js");e.exports=((e,t,s)=>{let n=null,a=null,l=null;try{l=new r(t,s)}catch(e){return null}return e.forEach(e=>{l.test(e)&&(n&&-1!==a.compare(e)||(a=new i(n=e,s)))}),n})},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/min-satisfying.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/semver.js"),r=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/range.js");e.exports=((e,t,s)=>{let n=null,a=null,l=null;try{l=new r(t,s)}catch(e){return null}return e.forEach(e=>{l.test(e)&&(n&&1!==a.compare(e)||(a=new i(n=e,s)))}),n})},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/min-version.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/semver.js"),r=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/range.js"),n=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/gt.js");e.exports=((e,t)=>{e=new r(e,t);let s=new i("0.0.0");if(e.test(s))return s;if(s=new i("0.0.0-0"),e.test(s))return s;s=null;for(let t=0;t<e.set.length;++t){let r=null;e.set[t].forEach(e=>{const t=new i(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!n(t,r)||(r=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}}),!r||s&&!n(s,r)||(s=r)}return s&&e.test(s)?s:null})},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/outside.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/semver.js"),r=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/comparator.js"),{ANY:n}=r,a=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/range.js"),l=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/satisfies.js"),o=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/gt.js"),c=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/lt.js"),d=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/lte.js"),u=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/gte.js");e.exports=((e,t,s,m)=>{let p,h,g,v,f;switch(e=new i(e,m),t=new a(t,m),s){case">":p=o,h=d,g=c,v=">",f=">=";break;case"<":p=c,h=u,g=o,v="<",f="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(l(e,t,m))return!1;for(let s=0;s<t.set.length;++s){let i=null,a=null;if(t.set[s].forEach(e=>{e.semver===n&&(e=new r(">=0.0.0")),i=i||e,a=a||e,p(e.semver,i.semver,m)?i=e:g(e.semver,a.semver,m)&&(a=e)}),i.operator===v||i.operator===f)return!1;if((!a.operator||a.operator===v)&&h(e,a.semver))return!1;if(a.operator===f&&g(e,a.semver))return!1}return!0})},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/simplify.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/satisfies.js"),r=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare.js");e.exports=((e,t,s)=>{const n=[];let a=null,l=null;const o=e.sort((e,t)=>r(e,t,s));for(const e of o){i(e,t,s)?(l=e,a||(a=e)):(l&&n.push([a,l]),l=null,a=null)}a&&n.push([a,null]);const c=[];for(const[e,t]of n)e===t?c.push(e):t||e!==o[0]?t?e===o[0]?c.push(`<=${t}`):c.push(`${e} - ${t}`):c.push(`>=${e}`):c.push("*");const d=c.join(" || "),u="string"==typeof t.raw?t.raw:String(t);return d.length<u.length?d:t})},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/subset.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/range.js"),r=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/comparator.js"),{ANY:n}=r,a=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/satisfies.js"),l=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/functions/compare.js"),o=(e,t,s)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===n){if(1===t.length&&t[0].semver===n)return!0;e=s.includePrerelease?[new r(">=0.0.0-0")]:[new r(">=0.0.0")]}if(1===t.length&&t[0].semver===n){if(s.includePrerelease)return!0;t=[new r(">=0.0.0")]}const i=new Set;let o,u,m,p,h,g,v;for(const t of e)">"===t.operator||">="===t.operator?o=c(o,t,s):"<"===t.operator||"<="===t.operator?u=d(u,t,s):i.add(t.semver);if(i.size>1)return null;if(o&&u){if((m=l(o.semver,u.semver,s))>0)return null;if(0===m&&(">="!==o.operator||"<="!==u.operator))return null}for(const e of i){if(o&&!a(e,String(o),s))return null;if(u&&!a(e,String(u),s))return null;for(const i of t)if(!a(e,String(i),s))return!1;return!0}let f=!(!u||s.includePrerelease||!u.semver.prerelease.length)&&u.semver,b=!(!o||s.includePrerelease||!o.semver.prerelease.length)&&o.semver;f&&1===f.prerelease.length&&"<"===u.operator&&0===f.prerelease[0]&&(f=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,o)if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),">"===e.operator||">="===e.operator){if((p=c(o,e,s))===e&&p!==o)return!1}else if(">="===o.operator&&!a(o.semver,String(e),s))return!1;if(u)if(f&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===f.major&&e.semver.minor===f.minor&&e.semver.patch===f.patch&&(f=!1),"<"===e.operator||"<="===e.operator){if((h=d(u,e,s))===e&&h!==u)return!1}else if("<="===u.operator&&!a(u.semver,String(e),s))return!1;if(!e.operator&&(u||o)&&0!==m)return!1}return!(o&&g&&!u&&0!==m)&&(!(u&&v&&!o&&0!==m)&&(!b&&!f))},c=(e,t,s)=>{if(!e)return t;const i=l(e.semver,t.semver,s);return i>0?e:i<0?t:">"===t.operator&&">="===e.operator?t:e},d=(e,t,s)=>{if(!e)return t;const i=l(e.semver,t.semver,s);return i<0?e:i>0?t:"<"===t.operator&&"<="===e.operator?t:e};e.exports=((e,t,s={})=>{if(e===t)return!0;e=new i(e,s),t=new i(t,s);let r=!1;e:for(const i of e.set){for(const e of t.set){const t=o(i,e,s);if(r=r||null!==t,t)continue e}if(r)return!1}return!0})},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/to-comparators.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/range.js");e.exports=((e,t)=>new i(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" ")))},"./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/ranges/valid.js":(e,t,s)=>{const i=s("./.yarn/cache/semver-npm-7.3.5-618cf5db6a-5eafe6102b.zip/node_modules/semver/classes/range.js");e.exports=((e,t)=>{try{return new i(e,t).range||"*"}catch(e){return null}})},"./.yarn/cache/yallist-npm-4.0.0-b493d9e907-343617202a.zip/node_modules/yallist/iterator.js":e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},"./.yarn/cache/yallist-npm-4.0.0-b493d9e907-343617202a.zip/node_modules/yallist/yallist.js":(e,t,s)=>{"use strict";function i(e){var t=this;if(t instanceof i||(t=new i),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var s=0,r=arguments.length;s<r;s++)t.push(arguments[s]);return t}function r(e,t,s){var i=t===e.head?new l(s,null,t,e):new l(s,t,t.next,e);return null===i.next&&(e.tail=i),null===i.prev&&(e.head=i),e.length++,i}function n(e,t){e.tail=new l(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function a(e,t){e.head=new l(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function l(e,t,s,i){if(!(this instanceof l))return new l(e,t,s,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,s?(s.prev=this,this.next=s):this.next=null}e.exports=i,i.Node=l,i.create=i,i.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,s=e.prev;return t&&(t.prev=s),s&&(s.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=s),e.list.length--,e.next=null,e.prev=null,e.list=null,t},i.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},i.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},i.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)n(this,arguments[e]);return this.length},i.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},i.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},i.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},i.prototype.forEach=function(e,t){t=t||this;for(var s=this.head,i=0;null!==s;i++)e.call(t,s.value,i,this),s=s.next},i.prototype.forEachReverse=function(e,t){t=t||this;for(var s=this.tail,i=this.length-1;null!==s;i--)e.call(t,s.value,i,this),s=s.prev},i.prototype.get=function(e){for(var t=0,s=this.head;null!==s&&t<e;t++)s=s.next;if(t===e&&null!==s)return s.value},i.prototype.getReverse=function(e){for(var t=0,s=this.tail;null!==s&&t<e;t++)s=s.prev;if(t===e&&null!==s)return s.value},i.prototype.map=function(e,t){t=t||this;for(var s=new i,r=this.head;null!==r;)s.push(e.call(t,r.value,this)),r=r.next;return s},i.prototype.mapReverse=function(e,t){t=t||this;for(var s=new i,r=this.tail;null!==r;)s.push(e.call(t,r.value,this)),r=r.prev;return s},i.prototype.reduce=function(e,t){var s,i=this.head;if(arguments.length>1)s=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,s=this.head.value}for(var r=0;null!==i;r++)s=e(s,i.value,r),i=i.next;return s},i.prototype.reduceReverse=function(e,t){var s,i=this.tail;if(arguments.length>1)s=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,s=this.tail.value}for(var r=this.length-1;null!==i;r--)s=e(s,i.value,r),i=i.prev;return s},i.prototype.toArray=function(){for(var e=new Array(this.length),t=0,s=this.head;null!==s;t++)e[t]=s.value,s=s.next;return e},i.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,s=this.tail;null!==s;t++)e[t]=s.value,s=s.prev;return e},i.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var s=new i;if(t<e||t<0)return s;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,n=this.head;null!==n&&r<e;r++)n=n.next;for(;null!==n&&r<t;r++,n=n.next)s.push(n.value);return s},i.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var s=new i;if(t<e||t<0)return s;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,n=this.tail;null!==n&&r>t;r--)n=n.prev;for(;null!==n&&r>e;r--,n=n.prev)s.push(n.value);return s},i.prototype.splice=function(e,t,...s){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,n=this.head;null!==n&&i<e;i++)n=n.next;var a=[];for(i=0;n&&i<t;i++)a.push(n.value),n=this.removeNode(n);null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(i=0;i<s.length;i++)n=r(this,n,s[i]);return a},i.prototype.reverse=function(){for(var e=this.head,t=this.tail,s=e;null!==s;s=s.prev){var i=s.prev;s.prev=s.next,s.next=i}return this.head=t,this.tail=e,this};try{s("./.yarn/cache/yallist-npm-4.0.0-b493d9e907-343617202a.zip/node_modules/yallist/iterator.js")(i)}catch(e){}}}]);