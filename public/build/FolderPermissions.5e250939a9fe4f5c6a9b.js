"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8431],{"./public/app/features/folders/AccessControlFolderPermissions.tsx":(e,s,i)=>{i.r(s),i.d(s,{AccessControlFolderPermissions:()=>x,default:()=>f});var n=i("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),o=i("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/0/cache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js"),r=i("./public/app/core/components/AccessControl/index.ts"),t=i("./public/app/core/components/Page/Page.tsx"),d=i("./public/app/core/core.ts"),a=i("./public/app/core/selectors/navModel.ts"),c=i("./public/app/types/index.ts"),l=i("./public/app/features/folders/state/actions.ts"),p=i("./public/app/features/folders/state/navModel.ts"),m=i("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const u={getFolderByUid:l.Pb},h=(0,o.connect)((function(e,s){const i=s.match.params.uid;return{uid:i,navModel:(0,a.h)(e.navIndex,`folder-permissions-${i}`,(0,p._)(1))}}),u),x=e=>{let{uid:s,getFolderByUid:i,navModel:o}=e;(0,n.useEffect)((()=>{i(s)}),[i,s]);const a=d.Vt.hasPermission(c.bW.FoldersPermissionsWrite);return(0,m.jsx)(t.Z,{navModel:o,children:(0,m.jsx)(t.Z.Contents,{children:(0,m.jsx)(r.P,{resource:"folders",resourceId:s,canSetPermissions:a})})})},f=h(x)},"./public/app/features/folders/FolderPermissions.tsx":(e,s,i)=>{i.r(s),i.d(s,{FolderPermissions:()=>F,default:()=>_});var n,o,r,t,d=i("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),a=i("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/0/cache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js"),c=i("./packages/grafana-ui/src/index.ts"),l=i("./public/app/core/components/Animations/SlideDown.tsx"),p=i("./public/app/core/components/Page/Page.tsx"),m=i("./public/app/core/components/PermissionList/AddPermission.tsx"),u=i("./public/app/core/components/PermissionList/PermissionList.tsx"),h=i("./public/app/core/components/PermissionList/PermissionsInfo.tsx"),x=i("./public/app/core/selectors/navModel.ts"),f=i("./public/app/features/folders/state/actions.ts"),P=i("./public/app/features/folders/state/navModel.ts"),b=i("./.yarn/cache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function g(e,s,i){return s in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i,e}const v={getFolderByUid:f.Pb,getFolderPermissions:f.a,updateFolderPermission:f.v7,removeFolderPermission:f.Uk,addFolderPermission:f.pz},j=(0,a.connect)(((e,s)=>{const i=s.match.params.uid;return{navModel:(0,x.h)(e.navIndex,`folder-permissions-${i}`,(0,P._)(1)),folderUid:i,folder:e.folder}}),v);class F extends d.PureComponent{constructor(e){super(e),g(this,"onOpenAddPermissions",(()=>{this.setState({isAdding:!0})})),g(this,"onRemoveItem",(e=>{this.props.removeFolderPermission(e)})),g(this,"onPermissionChanged",((e,s)=>{this.props.updateFolderPermission(e,s)})),g(this,"onAddPermission",(e=>this.props.addFolderPermission(e))),g(this,"onCancelAddPermission",(()=>{this.setState({isAdding:!1})})),this.state={isAdding:!1}}componentDidMount(){this.props.getFolderByUid(this.props.folderUid),this.props.getFolderPermissions(this.props.folderUid)}render(){const{navModel:e,folder:s}=this.props,{isAdding:i}=this.state;if(0===s.id)return(0,b.jsx)(p.Z,{navModel:e,children:n||(n=(0,b.jsx)(p.Z.Contents,{isLoading:!0,children:(0,b.jsx)("span",{})}))});const d={title:s.title,url:s.url,id:s.id};return(0,b.jsx)(p.Z,{navModel:e,children:(0,b.jsxs)(p.Z.Contents,{children:[(0,b.jsxs)("div",{className:"page-action-bar",children:[o||(o=(0,b.jsx)("h3",{className:"page-sub-heading",children:"Folder Permissions"})),r||(r=(0,b.jsx)(c.Tooltip,{placement:"auto",content:(0,b.jsx)(h.Z,{}),children:(0,b.jsx)(c.Icon,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"})})),t||(t=(0,b.jsx)("div",{className:"page-action-bar__spacer"})),(0,b.jsx)(c.Button,{className:"pull-right",onClick:this.onOpenAddPermissions,disabled:i,children:"Add Permission"})]}),(0,b.jsx)(l.s,{in:i,children:(0,b.jsx)(m.Z,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})}),(0,b.jsx)(u.Z,{items:s.permissions,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:d})]})})}}const _=j(F)}}]);